function Ph(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function Rh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nu={exports:{}},ul={},wu={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=Symbol.for("react.element"),Mh=Symbol.for("react.portal"),Lh=Symbol.for("react.fragment"),Ih=Symbol.for("react.strict_mode"),Fh=Symbol.for("react.profiler"),Oh=Symbol.for("react.provider"),$h=Symbol.for("react.context"),zh=Symbol.for("react.forward_ref"),Vh=Symbol.for("react.suspense"),Bh=Symbol.for("react.memo"),Uh=Symbol.for("react.lazy"),Mc=Symbol.iterator;function Wh(e){return e===null||typeof e!="object"?null:(e=Mc&&e[Mc]||e["@@iterator"],typeof e=="function"?e:null)}var Su={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cu=Object.assign,ku={};function zs(e,t,s){this.props=e,this.context=t,this.refs=ku,this.updater=s||Su}zs.prototype.isReactComponent={};zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Eu(){}Eu.prototype=zs.prototype;function Di(e,t,s){this.props=e,this.context=t,this.refs=ku,this.updater=s||Su}var Ti=Di.prototype=new Eu;Ti.constructor=Di;Cu(Ti,zs.prototype);Ti.isPureReactComponent=!0;var Lc=Array.isArray,Du=Object.prototype.hasOwnProperty,Ai={current:null},Tu={key:!0,ref:!0,__self:!0,__source:!0};function Au(e,t,s){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Du.call(t,r)&&!Tu.hasOwnProperty(r)&&(a[r]=t[r]);var i=arguments.length-2;if(i===1)a.children=s;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:Ur,type:e,key:l,ref:o,props:a,_owner:Ai.current}}function Hh(e,t){return{$$typeof:Ur,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _i(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ur}function qh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Ic=/\/+/g;function Hl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qh(""+e.key):t.toString(36)}function Sa(e,t,s,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ur:case Mh:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Hl(o,0):r,Lc(a)?(s="",e!=null&&(s=e.replace(Ic,"$&/")+"/"),Sa(a,t,s,"",function(d){return d})):a!=null&&(_i(a)&&(a=Hh(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Ic,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",Lc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+Hl(l,i);o+=Sa(l,t,s,c,a)}else if(c=Wh(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+Hl(l,i++),o+=Sa(l,t,s,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ra(e,t,s){if(e==null)return e;var r=[],a=0;return Sa(e,r,"","",function(l){return t.call(s,l,a++)}),r}function Jh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},Ca={transition:null},Kh={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Ca,ReactCurrentOwner:Ai};function _u(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:ra,forEach:function(e,t,s){ra(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return ra(e,function(){t++}),t},toArray:function(e){return ra(e,function(t){return t})||[]},only:function(e){if(!_i(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=zs;Ne.Fragment=Lh;Ne.Profiler=Fh;Ne.PureComponent=Di;Ne.StrictMode=Ih;Ne.Suspense=Vh;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kh;Ne.act=_u;Ne.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cu({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ai.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Du.call(t,c)&&!Tu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:Ur,type:e.type,key:a,ref:l,props:r,_owner:o}};Ne.createContext=function(e){return e={$$typeof:$h,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Oh,_context:e},e.Consumer=e};Ne.createElement=Au;Ne.createFactory=function(e){var t=Au.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:zh,render:e}};Ne.isValidElement=_i;Ne.lazy=function(e){return{$$typeof:Uh,_payload:{_status:-1,_result:e},_init:Jh}};Ne.memo=function(e,t){return{$$typeof:Bh,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=Ca.transition;Ca.transition={};try{e()}finally{Ca.transition=t}};Ne.unstable_act=_u;Ne.useCallback=function(e,t){return pt.current.useCallback(e,t)};Ne.useContext=function(e){return pt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return pt.current.useEffect(e,t)};Ne.useId=function(){return pt.current.useId()};Ne.useImperativeHandle=function(e,t,s){return pt.current.useImperativeHandle(e,t,s)};Ne.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return pt.current.useMemo(e,t)};Ne.useReducer=function(e,t,s){return pt.current.useReducer(e,t,s)};Ne.useRef=function(e){return pt.current.useRef(e)};Ne.useState=function(e){return pt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,s){return pt.current.useSyncExternalStore(e,t,s)};Ne.useTransition=function(){return pt.current.useTransition()};Ne.version="18.3.1";wu.exports=Ne;var h=wu.exports;const Pu=Rh(h),Yh=Ph({__proto__:null,default:Pu},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh=h,Qh=Symbol.for("react.element"),Xh=Symbol.for("react.fragment"),Zh=Object.prototype.hasOwnProperty,ef=Gh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tf={key:!0,ref:!0,__self:!0,__source:!0};function Ru(e,t,s){var r,a={},l=null,o=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Zh.call(t,r)&&!tf.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Qh,type:e,key:l,ref:o,props:a,_owner:ef.current}}ul.Fragment=Xh;ul.jsx=Ru;ul.jsxs=Ru;Nu.exports=ul;var n=Nu.exports,Co={},Mu={exports:{}},Dt={},Lu={exports:{}},Iu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,I){var q=M.length;M.push(I);e:for(;0<q;){var U=q-1>>>1,W=M[U];if(0<a(W,I))M[U]=I,M[q]=W,q=U;else break e}}function s(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var I=M[0],q=M.pop();if(q!==I){M[0]=q;e:for(var U=0,W=M.length,te=W>>>1;U<te;){var ae=2*(U+1)-1,me=M[ae],ue=ae+1,pe=M[ue];if(0>a(me,q))ue<W&&0>a(pe,me)?(M[U]=pe,M[ue]=q,U=ue):(M[U]=me,M[ae]=q,U=ae);else if(ue<W&&0>a(pe,q))M[U]=pe,M[ue]=q,U=ue;else break e}}return I}function a(M,I){var q=M.sortIndex-I.sortIndex;return q!==0?q:M.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],m=1,f=null,N=3,C=!1,x=!1,j=!1,v=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var I=s(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=M)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=s(d)}}function E(M){if(j=!1,b(M),!x)if(s(c)!==null)x=!0,y(D);else{var I=s(d);I!==null&&z(E,I.startTime-M)}}function D(M,I){x=!1,j&&(j=!1,u(g),g=-1),C=!0;var q=N;try{for(b(I),f=s(c);f!==null&&(!(f.expirationTime>I)||M&&!T());){var U=f.callback;if(typeof U=="function"){f.callback=null,N=f.priorityLevel;var W=U(f.expirationTime<=I);I=e.unstable_now(),typeof W=="function"?f.callback=W:f===s(c)&&r(c),b(I)}else r(c);f=s(c)}if(f!==null)var te=!0;else{var ae=s(d);ae!==null&&z(E,ae.startTime-I),te=!1}return te}finally{f=null,N=q,C=!1}}var F=!1,R=null,g=-1,P=5,$=-1;function T(){return!(e.unstable_now()-$<P)}function w(){if(R!==null){var M=e.unstable_now();$=M;var I=!0;try{I=R(!0,M)}finally{I?A():(F=!1,R=null)}}else F=!1}var A;if(typeof p=="function")A=function(){p(w)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,V=S.port2;S.port1.onmessage=w,A=function(){V.postMessage(null)}}else A=function(){v(w,0)};function y(M){R=M,F||(F=!0,A())}function z(M,I){g=v(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){x||C||(x=!0,y(D))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(M){switch(N){case 1:case 2:case 3:var I=3;break;default:I=N}var q=N;N=I;try{return M()}finally{N=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var q=N;N=M;try{return I()}finally{N=q}},e.unstable_scheduleCallback=function(M,I,q){var U=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?U+q:U):q=U,M){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,M={id:m++,callback:I,priorityLevel:M,startTime:q,expirationTime:W,sortIndex:-1},q>U?(M.sortIndex=q,t(d,M),s(c)===null&&M===s(d)&&(j?(u(g),g=-1):j=!0,z(E,q-U))):(M.sortIndex=W,t(c,M),x||C||(x=!0,y(D))),M},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(M){var I=N;return function(){var q=N;N=I;try{return M.apply(this,arguments)}finally{N=q}}}})(Iu);Lu.exports=Iu;var nf=Lu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf=h,Et=nf;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fu=new Set,wr={};function is(e,t){Ps(e,t),Ps(e+"Capture",t)}function Ps(e,t){for(wr[e]=t,e=0;e<t.length;e++)Fu.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ko=Object.prototype.hasOwnProperty,rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fc={},Oc={};function af(e){return ko.call(Oc,e)?!0:ko.call(Fc,e)?!1:rf.test(e)?Oc[e]=!0:(Fc[e]=!0,!1)}function lf(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function of(e,t,s,r){if(t===null||typeof t>"u"||lf(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ht(e,t,s,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pi=/[\-:]([a-z])/g;function Ri(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pi,Ri);st[t]=new ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pi,Ri);st[t]=new ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pi,Ri);st[t]=new ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new ht(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mi(e,t,s,r){var a=st.hasOwnProperty(t)?st[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(of(t,s,a,r)&&(s=null),r||a===null?af(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,r=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var xn=sf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),hs=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Li=Symbol.for("react.strict_mode"),Eo=Symbol.for("react.profiler"),Ou=Symbol.for("react.provider"),$u=Symbol.for("react.context"),Ii=Symbol.for("react.forward_ref"),Do=Symbol.for("react.suspense"),To=Symbol.for("react.suspense_list"),Fi=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),zu=Symbol.for("react.offscreen"),$c=Symbol.iterator;function Zs(e){return e===null||typeof e!="object"?null:(e=$c&&e[$c]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,ql;function cr(e){if(ql===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ql=t&&t[1]||""}return`
`+ql+e}var Jl=!1;function Kl(e,t){if(!e||Jl)return"";Jl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{Jl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?cr(e):""}function cf(e){switch(e.tag){case 5:return cr(e.type);case 16:return cr("Lazy");case 13:return cr("Suspense");case 19:return cr("SuspenseList");case 0:case 2:case 15:return e=Kl(e.type,!1),e;case 11:return e=Kl(e.type.render,!1),e;case 1:return e=Kl(e.type,!0),e;default:return""}}function Ao(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fs:return"Fragment";case hs:return"Portal";case Eo:return"Profiler";case Li:return"StrictMode";case Do:return"Suspense";case To:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $u:return(e.displayName||"Context")+".Consumer";case Ou:return(e._context.displayName||"Context")+".Provider";case Ii:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fi:return t=e.displayName||null,t!==null?t:Ao(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return Ao(e(t))}catch{}}return null}function df(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ao(t);case 8:return t===Li?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function In(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uf(e){var t=Vu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function la(e){e._valueTracker||(e._valueTracker=uf(e))}function Bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Vu(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function $a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _o(e,t){var s=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function zc(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=In(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uu(e,t){t=t.checked,t!=null&&Mi(e,"checked",t,!1)}function Po(e,t){Uu(e,t);var s=In(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ro(e,t.type,s):t.hasOwnProperty("defaultValue")&&Ro(e,t.type,In(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Ro(e,t,s){(t!=="number"||$a(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var dr=Array.isArray;function ks(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+In(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ee(92));if(dr(s)){if(1<s.length)throw Error(ee(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:In(s)}}function Wu(e,t){var s=In(t.value),r=In(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Uc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oa,qu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sr(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mf=["Webkit","ms","Moz","O"];Object.keys(pr).forEach(function(e){mf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pr[t]=pr[e]})});function Ju(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||pr.hasOwnProperty(e)&&pr[e]?(""+t).trim():t+"px"}function Ku(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,a=Ju(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}var pf=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Io(e,t){if(t){if(pf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function Fo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=null;function Oi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $o=null,Es=null,Ds=null;function Wc(e){if(e=qr(e)){if(typeof $o!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=gl(t),$o(e.stateNode,e.type,t))}}function Yu(e){Es?Ds?Ds.push(e):Ds=[e]:Es=e}function Gu(){if(Es){var e=Es,t=Ds;if(Ds=Es=null,Wc(e),t)for(e=0;e<t.length;e++)Wc(t[e])}}function Qu(e,t){return e(t)}function Xu(){}var Yl=!1;function Zu(e,t,s){if(Yl)return e(t,s);Yl=!0;try{return Qu(e,t,s)}finally{Yl=!1,(Es!==null||Ds!==null)&&(Xu(),Gu())}}function Cr(e,t){var s=e.stateNode;if(s===null)return null;var r=gl(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ee(231,t,typeof s));return s}var zo=!1;if(pn)try{var er={};Object.defineProperty(er,"passive",{get:function(){zo=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{zo=!1}function hf(e,t,s,r,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(m){this.onError(m)}}var hr=!1,za=null,Va=!1,Vo=null,ff={onError:function(e){hr=!0,za=e}};function gf(e,t,s,r,a,l,o,i,c){hr=!1,za=null,hf.apply(ff,arguments)}function xf(e,t,s,r,a,l,o,i,c){if(gf.apply(this,arguments),hr){if(hr){var d=za;hr=!1,za=null}else throw Error(ee(198));Va||(Va=!0,Vo=d)}}function cs(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function em(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hc(e){if(cs(e)!==e)throw Error(ee(188))}function vf(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){s=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===s)return Hc(a),e;if(l===r)return Hc(a),t;l=l.sibling}throw Error(ee(188))}if(s.return!==r.return)s=a,r=l;else{for(var o=!1,i=a.child;i;){if(i===s){o=!0,s=a,r=l;break}if(i===r){o=!0,r=a,s=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===s){o=!0,s=l,r=a;break}if(i===r){o=!0,r=l,s=a;break}i=i.sibling}if(!o)throw Error(ee(189))}}if(s.alternate!==r)throw Error(ee(190))}if(s.tag!==3)throw Error(ee(188));return s.stateNode.current===s?e:t}function tm(e){return e=vf(e),e!==null?nm(e):null}function nm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nm(e);if(t!==null)return t;e=e.sibling}return null}var sm=Et.unstable_scheduleCallback,qc=Et.unstable_cancelCallback,yf=Et.unstable_shouldYield,jf=Et.unstable_requestPaint,He=Et.unstable_now,bf=Et.unstable_getCurrentPriorityLevel,$i=Et.unstable_ImmediatePriority,rm=Et.unstable_UserBlockingPriority,Ba=Et.unstable_NormalPriority,Nf=Et.unstable_LowPriority,am=Et.unstable_IdlePriority,ml=null,tn=null;function wf(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ml,e,void 0,(e.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:kf,Sf=Math.log,Cf=Math.LN2;function kf(e){return e>>>=0,e===0?32:31-(Sf(e)/Cf|0)|0}var ia=64,ca=4194304;function ur(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ua(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=s&268435455;if(o!==0){var i=o&~a;i!==0?r=ur(i):(l&=o,l!==0&&(r=ur(l)))}else o=s&~a,o!==0?r=ur(o):l!==0&&(r=ur(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-qt(t),a=1<<s,r|=e[s],t&=~a;return r}function Ef(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Df(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-qt(l),i=1<<o,c=a[o];c===-1?(!(i&s)||i&r)&&(a[o]=Ef(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function Bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lm(){var e=ia;return ia<<=1,!(ia&4194240)&&(ia=64),e}function Gl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Wr(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qt(t),e[t]=s}function Tf(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-qt(s),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~l}}function zi(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-qt(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var _e=0;function om(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var im,Vi,cm,dm,um,Uo=!1,da=[],En=null,Dn=null,Tn=null,kr=new Map,Er=new Map,Nn=[],Af="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jc(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":kr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(t.pointerId)}}function tr(e,t,s,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=qr(t),t!==null&&Vi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function _f(e,t,s,r,a){switch(t){case"focusin":return En=tr(En,e,t,s,r,a),!0;case"dragenter":return Dn=tr(Dn,e,t,s,r,a),!0;case"mouseover":return Tn=tr(Tn,e,t,s,r,a),!0;case"pointerover":var l=a.pointerId;return kr.set(l,tr(kr.get(l)||null,e,t,s,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Er.set(l,tr(Er.get(l)||null,e,t,s,r,a)),!0}return!1}function mm(e){var t=Yn(e.target);if(t!==null){var s=cs(t);if(s!==null){if(t=s.tag,t===13){if(t=em(s),t!==null){e.blockedOn=t,um(e.priority,function(){cm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Oo=r,s.target.dispatchEvent(r),Oo=null}else return t=qr(s),t!==null&&Vi(t),e.blockedOn=s,!1;t.shift()}return!0}function Kc(e,t,s){ka(e)&&s.delete(t)}function Pf(){Uo=!1,En!==null&&ka(En)&&(En=null),Dn!==null&&ka(Dn)&&(Dn=null),Tn!==null&&ka(Tn)&&(Tn=null),kr.forEach(Kc),Er.forEach(Kc)}function nr(e,t){e.blockedOn===t&&(e.blockedOn=null,Uo||(Uo=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,Pf)))}function Dr(e){function t(a){return nr(a,e)}if(0<da.length){nr(da[0],e);for(var s=1;s<da.length;s++){var r=da[s];r.blockedOn===e&&(r.blockedOn=null)}}for(En!==null&&nr(En,e),Dn!==null&&nr(Dn,e),Tn!==null&&nr(Tn,e),kr.forEach(t),Er.forEach(t),s=0;s<Nn.length;s++)r=Nn[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&(s=Nn[0],s.blockedOn===null);)mm(s),s.blockedOn===null&&Nn.shift()}var Ts=xn.ReactCurrentBatchConfig,Wa=!0;function Rf(e,t,s,r){var a=_e,l=Ts.transition;Ts.transition=null;try{_e=1,Bi(e,t,s,r)}finally{_e=a,Ts.transition=l}}function Mf(e,t,s,r){var a=_e,l=Ts.transition;Ts.transition=null;try{_e=4,Bi(e,t,s,r)}finally{_e=a,Ts.transition=l}}function Bi(e,t,s,r){if(Wa){var a=Wo(e,t,s,r);if(a===null)lo(e,t,r,Ha,s),Jc(e,r);else if(_f(a,e,t,s,r))r.stopPropagation();else if(Jc(e,r),t&4&&-1<Af.indexOf(e)){for(;a!==null;){var l=qr(a);if(l!==null&&im(l),l=Wo(e,t,s,r),l===null&&lo(e,t,r,Ha,s),l===a)break;a=l}a!==null&&r.stopPropagation()}else lo(e,t,r,null,s)}}var Ha=null;function Wo(e,t,s,r){if(Ha=null,e=Oi(r),e=Yn(e),e!==null)if(t=cs(e),t===null)e=null;else if(s=t.tag,s===13){if(e=em(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ha=e,null}function pm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bf()){case $i:return 1;case rm:return 4;case Ba:case Nf:return 16;case am:return 536870912;default:return 16}default:return 16}}var Sn=null,Ui=null,Ea=null;function hm(){if(Ea)return Ea;var e,t=Ui,s=t.length,r,a="value"in Sn?Sn.value:Sn.textContent,l=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(r=1;r<=o&&t[s-r]===a[l-r];r++);return Ea=a.slice(e,1<r?1-r:void 0)}function Da(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ua(){return!0}function Yc(){return!1}function Tt(e){function t(s,r,a,l,o){this._reactName=s,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s?s(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ua:Yc,this.isPropagationStopped=Yc,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),t}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wi=Tt(Vs),Hr=Ve({},Vs,{view:0,detail:0}),Lf=Tt(Hr),Ql,Xl,sr,pl=Ve({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&e.type==="mousemove"?(Ql=e.screenX-sr.screenX,Xl=e.screenY-sr.screenY):Xl=Ql=0,sr=e),Ql)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),Gc=Tt(pl),If=Ve({},pl,{dataTransfer:0}),Ff=Tt(If),Of=Ve({},Hr,{relatedTarget:0}),Zl=Tt(Of),$f=Ve({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),zf=Tt($f),Vf=Ve({},Vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bf=Tt(Vf),Uf=Ve({},Vs,{data:0}),Qc=Tt(Uf),Wf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qf[e])?!!t[e]:!1}function Hi(){return Jf}var Kf=Ve({},Hr,{key:function(e){if(e.key){var t=Wf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hi,charCode:function(e){return e.type==="keypress"?Da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yf=Tt(Kf),Gf=Ve({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xc=Tt(Gf),Qf=Ve({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hi}),Xf=Tt(Qf),Zf=Ve({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),eg=Tt(Zf),tg=Ve({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ng=Tt(tg),sg=[9,13,27,32],qi=pn&&"CompositionEvent"in window,fr=null;pn&&"documentMode"in document&&(fr=document.documentMode);var rg=pn&&"TextEvent"in window&&!fr,fm=pn&&(!qi||fr&&8<fr&&11>=fr),Zc=" ",ed=!1;function gm(e,t){switch(e){case"keyup":return sg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function ag(e,t){switch(e){case"compositionend":return xm(t);case"keypress":return t.which!==32?null:(ed=!0,Zc);case"textInput":return e=t.data,e===Zc&&ed?null:e;default:return null}}function lg(e,t){if(gs)return e==="compositionend"||!qi&&gm(e,t)?(e=hm(),Ea=Ui=Sn=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fm&&t.locale!=="ko"?null:t.data;default:return null}}var og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!og[e.type]:t==="textarea"}function vm(e,t,s,r){Yu(r),t=qa(t,"onChange"),0<t.length&&(s=new Wi("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var gr=null,Tr=null;function ig(e){Tm(e,0)}function hl(e){var t=ys(e);if(Bu(t))return e}function cg(e,t){if(e==="change")return t}var ym=!1;if(pn){var eo;if(pn){var to="oninput"in document;if(!to){var nd=document.createElement("div");nd.setAttribute("oninput","return;"),to=typeof nd.oninput=="function"}eo=to}else eo=!1;ym=eo&&(!document.documentMode||9<document.documentMode)}function sd(){gr&&(gr.detachEvent("onpropertychange",jm),Tr=gr=null)}function jm(e){if(e.propertyName==="value"&&hl(Tr)){var t=[];vm(t,Tr,e,Oi(e)),Zu(ig,t)}}function dg(e,t,s){e==="focusin"?(sd(),gr=t,Tr=s,gr.attachEvent("onpropertychange",jm)):e==="focusout"&&sd()}function ug(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(Tr)}function mg(e,t){if(e==="click")return hl(t)}function pg(e,t){if(e==="input"||e==="change")return hl(t)}function hg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:hg;function Ar(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!ko.call(t,a)||!Kt(e[a],t[a]))return!1}return!0}function rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ad(e,t){var s=rd(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=rd(s)}}function bm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nm(){for(var e=window,t=$a();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=$a(e.document)}return t}function Ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fg(e){var t=Nm(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&bm(s.ownerDocument.documentElement,s)){if(r!==null&&Ji(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=ad(s,l);var o=ad(s,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gg=pn&&"documentMode"in document&&11>=document.documentMode,xs=null,Ho=null,xr=null,qo=!1;function ld(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qo||xs==null||xs!==$a(r)||(r=xs,"selectionStart"in r&&Ji(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xr&&Ar(xr,r)||(xr=r,r=qa(Ho,"onSelect"),0<r.length&&(t=new Wi("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=xs)))}function ma(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var vs={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},no={},wm={};pn&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function fl(e){if(no[e])return no[e];if(!vs[e])return e;var t=vs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in wm)return no[e]=t[s];return e}var Sm=fl("animationend"),Cm=fl("animationiteration"),km=fl("animationstart"),Em=fl("transitionend"),Dm=new Map,od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){Dm.set(e,t),is(t,[e])}for(var so=0;so<od.length;so++){var ro=od[so],xg=ro.toLowerCase(),vg=ro[0].toUpperCase()+ro.slice(1);On(xg,"on"+vg)}On(Sm,"onAnimationEnd");On(Cm,"onAnimationIteration");On(km,"onAnimationStart");On("dblclick","onDoubleClick");On("focusin","onFocus");On("focusout","onBlur");On(Em,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(mr));function id(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,xf(r,t,void 0,e),e.currentTarget=null}function Tm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;id(a,i,d),l=c}else for(o=0;o<r.length;o++){if(i=r[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;id(a,i,d),l=c}}}if(Va)throw e=Vo,Va=!1,Vo=null,e}function Me(e,t){var s=t[Qo];s===void 0&&(s=t[Qo]=new Set);var r=e+"__bubble";s.has(r)||(Am(t,e,2,!1),s.add(r))}function ao(e,t,s){var r=0;t&&(r|=4),Am(s,e,r,t)}var pa="_reactListening"+Math.random().toString(36).slice(2);function _r(e){if(!e[pa]){e[pa]=!0,Fu.forEach(function(s){s!=="selectionchange"&&(yg.has(s)||ao(s,!1,e),ao(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pa]||(t[pa]=!0,ao("selectionchange",!1,t))}}function Am(e,t,s,r){switch(pm(t)){case 1:var a=Rf;break;case 4:a=Mf;break;default:a=Bi}s=a.bind(null,t,s,e),a=void 0,!zo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function lo(e,t,s,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var i=r.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=Yn(i),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}i=i.parentNode}}r=r.return}Zu(function(){var d=l,m=Oi(s),f=[];e:{var N=Dm.get(e);if(N!==void 0){var C=Wi,x=e;switch(e){case"keypress":if(Da(s)===0)break e;case"keydown":case"keyup":C=Yf;break;case"focusin":x="focus",C=Zl;break;case"focusout":x="blur",C=Zl;break;case"beforeblur":case"afterblur":C=Zl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Xf;break;case Sm:case Cm:case km:C=zf;break;case Em:C=eg;break;case"scroll":C=Lf;break;case"wheel":C=ng;break;case"copy":case"cut":case"paste":C=Bf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Xc}var j=(t&4)!==0,v=!j&&e==="scroll",u=j?N!==null?N+"Capture":null:N;j=[];for(var p=d,b;p!==null;){b=p;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,u!==null&&(E=Cr(p,u),E!=null&&j.push(Pr(p,E,b)))),v)break;p=p.return}0<j.length&&(N=new C(N,x,null,s,m),f.push({event:N,listeners:j}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",N&&s!==Oo&&(x=s.relatedTarget||s.fromElement)&&(Yn(x)||x[hn]))break e;if((C||N)&&(N=m.window===m?m:(N=m.ownerDocument)?N.defaultView||N.parentWindow:window,C?(x=s.relatedTarget||s.toElement,C=d,x=x?Yn(x):null,x!==null&&(v=cs(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(C=null,x=d),C!==x)){if(j=Gc,E="onMouseLeave",u="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(j=Xc,E="onPointerLeave",u="onPointerEnter",p="pointer"),v=C==null?N:ys(C),b=x==null?N:ys(x),N=new j(E,p+"leave",C,s,m),N.target=v,N.relatedTarget=b,E=null,Yn(m)===d&&(j=new j(u,p+"enter",x,s,m),j.target=b,j.relatedTarget=v,E=j),v=E,C&&x)t:{for(j=C,u=x,p=0,b=j;b;b=ps(b))p++;for(b=0,E=u;E;E=ps(E))b++;for(;0<p-b;)j=ps(j),p--;for(;0<b-p;)u=ps(u),b--;for(;p--;){if(j===u||u!==null&&j===u.alternate)break t;j=ps(j),u=ps(u)}j=null}else j=null;C!==null&&cd(f,N,C,j,!1),x!==null&&v!==null&&cd(f,v,x,j,!0)}}e:{if(N=d?ys(d):window,C=N.nodeName&&N.nodeName.toLowerCase(),C==="select"||C==="input"&&N.type==="file")var D=cg;else if(td(N))if(ym)D=pg;else{D=ug;var F=dg}else(C=N.nodeName)&&C.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(D=mg);if(D&&(D=D(e,d))){vm(f,D,s,m);break e}F&&F(e,N,d),e==="focusout"&&(F=N._wrapperState)&&F.controlled&&N.type==="number"&&Ro(N,"number",N.value)}switch(F=d?ys(d):window,e){case"focusin":(td(F)||F.contentEditable==="true")&&(xs=F,Ho=d,xr=null);break;case"focusout":xr=Ho=xs=null;break;case"mousedown":qo=!0;break;case"contextmenu":case"mouseup":case"dragend":qo=!1,ld(f,s,m);break;case"selectionchange":if(gg)break;case"keydown":case"keyup":ld(f,s,m)}var R;if(qi)e:{switch(e){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else gs?gm(e,s)&&(g="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(g="onCompositionStart");g&&(fm&&s.locale!=="ko"&&(gs||g!=="onCompositionStart"?g==="onCompositionEnd"&&gs&&(R=hm()):(Sn=m,Ui="value"in Sn?Sn.value:Sn.textContent,gs=!0)),F=qa(d,g),0<F.length&&(g=new Qc(g,e,null,s,m),f.push({event:g,listeners:F}),R?g.data=R:(R=xm(s),R!==null&&(g.data=R)))),(R=rg?ag(e,s):lg(e,s))&&(d=qa(d,"onBeforeInput"),0<d.length&&(m=new Qc("onBeforeInput","beforeinput",null,s,m),f.push({event:m,listeners:d}),m.data=R))}Tm(f,t)})}function Pr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function qa(e,t){for(var s=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Cr(e,s),l!=null&&r.unshift(Pr(e,l,a)),l=Cr(e,t),l!=null&&r.push(Pr(e,l,a))),e=e.return}return r}function ps(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cd(e,t,s,r,a){for(var l=t._reactName,o=[];s!==null&&s!==r;){var i=s,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,a?(c=Cr(s,l),c!=null&&o.unshift(Pr(s,c,i))):a||(c=Cr(s,l),c!=null&&o.push(Pr(s,c,i)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var jg=/\r\n?/g,bg=/\u0000|\uFFFD/g;function dd(e){return(typeof e=="string"?e:""+e).replace(jg,`
`).replace(bg,"")}function ha(e,t,s){if(t=dd(t),dd(e)!==t&&s)throw Error(ee(425))}function Ja(){}var Jo=null,Ko=null;function Yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Go=typeof setTimeout=="function"?setTimeout:void 0,Ng=typeof clearTimeout=="function"?clearTimeout:void 0,ud=typeof Promise=="function"?Promise:void 0,wg=typeof queueMicrotask=="function"?queueMicrotask:typeof ud<"u"?function(e){return ud.resolve(null).then(e).catch(Sg)}:Go;function Sg(e){setTimeout(function(){throw e})}function oo(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(r===0){e.removeChild(a),Dr(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=a}while(s);Dr(t)}function An(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function md(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),en="__reactFiber$"+Bs,Rr="__reactProps$"+Bs,hn="__reactContainer$"+Bs,Qo="__reactEvents$"+Bs,Cg="__reactListeners$"+Bs,kg="__reactHandles$"+Bs;function Yn(e){var t=e[en];if(t)return t;for(var s=e.parentNode;s;){if(t=s[hn]||s[en]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=md(e);e!==null;){if(s=e[en])return s;e=md(e)}return t}e=s,s=e.parentNode}return null}function qr(e){return e=e[en]||e[hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ys(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function gl(e){return e[Rr]||null}var Xo=[],js=-1;function $n(e){return{current:e}}function Le(e){0>js||(e.current=Xo[js],Xo[js]=null,js--)}function Re(e,t){js++,Xo[js]=e.current,e.current=t}var Fn={},it=$n(Fn),xt=$n(!1),ns=Fn;function Rs(e,t){var s=e.type.contextTypes;if(!s)return Fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in s)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vt(e){return e=e.childContextTypes,e!=null}function Ka(){Le(xt),Le(it)}function pd(e,t,s){if(it.current!==Fn)throw Error(ee(168));Re(it,t),Re(xt,s)}function _m(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ee(108,df(e)||"Unknown",a));return Ve({},s,r)}function Ya(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fn,ns=it.current,Re(it,e),Re(xt,xt.current),!0}function hd(e,t,s){var r=e.stateNode;if(!r)throw Error(ee(169));s?(e=_m(e,t,ns),r.__reactInternalMemoizedMergedChildContext=e,Le(xt),Le(it),Re(it,e)):Le(xt),Re(xt,s)}var cn=null,xl=!1,io=!1;function Pm(e){cn===null?cn=[e]:cn.push(e)}function Eg(e){xl=!0,Pm(e)}function zn(){if(!io&&cn!==null){io=!0;var e=0,t=_e;try{var s=cn;for(_e=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}cn=null,xl=!1}catch(a){throw cn!==null&&(cn=cn.slice(e+1)),sm($i,zn),a}finally{_e=t,io=!1}}return null}var bs=[],Ns=0,Ga=null,Qa=0,Pt=[],Rt=0,ss=null,dn=1,un="";function Jn(e,t){bs[Ns++]=Qa,bs[Ns++]=Ga,Ga=e,Qa=t}function Rm(e,t,s){Pt[Rt++]=dn,Pt[Rt++]=un,Pt[Rt++]=ss,ss=e;var r=dn;e=un;var a=32-qt(r)-1;r&=~(1<<a),s+=1;var l=32-qt(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,dn=1<<32-qt(t)+a|s<<a|r,un=l+e}else dn=1<<l|s<<a|r,un=e}function Ki(e){e.return!==null&&(Jn(e,1),Rm(e,1,0))}function Yi(e){for(;e===Ga;)Ga=bs[--Ns],bs[Ns]=null,Qa=bs[--Ns],bs[Ns]=null;for(;e===ss;)ss=Pt[--Rt],Pt[Rt]=null,un=Pt[--Rt],Pt[Rt]=null,dn=Pt[--Rt],Pt[Rt]=null}var kt=null,Ct=null,Fe=!1,Ht=null;function Mm(e,t){var s=Mt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function fd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,Ct=An(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=ss!==null?{id:dn,overflow:un}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Mt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,kt=e,Ct=null,!0):!1;default:return!1}}function Zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ei(e){if(Fe){var t=Ct;if(t){var s=t;if(!fd(e,t)){if(Zo(e))throw Error(ee(418));t=An(s.nextSibling);var r=kt;t&&fd(e,t)?Mm(r,s):(e.flags=e.flags&-4097|2,Fe=!1,kt=e)}}else{if(Zo(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Fe=!1,kt=e}}}function gd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function fa(e){if(e!==kt)return!1;if(!Fe)return gd(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yo(e.type,e.memoizedProps)),t&&(t=Ct)){if(Zo(e))throw Lm(),Error(ee(418));for(;t;)Mm(e,t),t=An(t.nextSibling)}if(gd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Ct=An(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=kt?An(e.stateNode.nextSibling):null;return!0}function Lm(){for(var e=Ct;e;)e=An(e.nextSibling)}function Ms(){Ct=kt=null,Fe=!1}function Gi(e){Ht===null?Ht=[e]:Ht.push(e)}var Dg=xn.ReactCurrentBatchConfig;function rr(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ee(309));var r=s.stateNode}if(!r)throw Error(ee(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(ee(284));if(!s._owner)throw Error(ee(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xd(e){var t=e._init;return t(e._payload)}function Im(e){function t(u,p){if(e){var b=u.deletions;b===null?(u.deletions=[p],u.flags|=16):b.push(p)}}function s(u,p){if(!e)return null;for(;p!==null;)t(u,p),p=p.sibling;return null}function r(u,p){for(u=new Map;p!==null;)p.key!==null?u.set(p.key,p):u.set(p.index,p),p=p.sibling;return u}function a(u,p){return u=Mn(u,p),u.index=0,u.sibling=null,u}function l(u,p,b){return u.index=b,e?(b=u.alternate,b!==null?(b=b.index,b<p?(u.flags|=2,p):b):(u.flags|=2,p)):(u.flags|=1048576,p)}function o(u){return e&&u.alternate===null&&(u.flags|=2),u}function i(u,p,b,E){return p===null||p.tag!==6?(p=go(b,u.mode,E),p.return=u,p):(p=a(p,b),p.return=u,p)}function c(u,p,b,E){var D=b.type;return D===fs?m(u,p,b.props.children,E,b.key):p!==null&&(p.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===jn&&xd(D)===p.type)?(E=a(p,b.props),E.ref=rr(u,p,b),E.return=u,E):(E=La(b.type,b.key,b.props,null,u.mode,E),E.ref=rr(u,p,b),E.return=u,E)}function d(u,p,b,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=xo(b,u.mode,E),p.return=u,p):(p=a(p,b.children||[]),p.return=u,p)}function m(u,p,b,E,D){return p===null||p.tag!==7?(p=es(b,u.mode,E,D),p.return=u,p):(p=a(p,b),p.return=u,p)}function f(u,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=go(""+p,u.mode,b),p.return=u,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case aa:return b=La(p.type,p.key,p.props,null,u.mode,b),b.ref=rr(u,null,p),b.return=u,b;case hs:return p=xo(p,u.mode,b),p.return=u,p;case jn:var E=p._init;return f(u,E(p._payload),b)}if(dr(p)||Zs(p))return p=es(p,u.mode,b,null),p.return=u,p;ga(u,p)}return null}function N(u,p,b,E){var D=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:i(u,p,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case aa:return b.key===D?c(u,p,b,E):null;case hs:return b.key===D?d(u,p,b,E):null;case jn:return D=b._init,N(u,p,D(b._payload),E)}if(dr(b)||Zs(b))return D!==null?null:m(u,p,b,E,null);ga(u,b)}return null}function C(u,p,b,E,D){if(typeof E=="string"&&E!==""||typeof E=="number")return u=u.get(b)||null,i(p,u,""+E,D);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case aa:return u=u.get(E.key===null?b:E.key)||null,c(p,u,E,D);case hs:return u=u.get(E.key===null?b:E.key)||null,d(p,u,E,D);case jn:var F=E._init;return C(u,p,b,F(E._payload),D)}if(dr(E)||Zs(E))return u=u.get(b)||null,m(p,u,E,D,null);ga(p,E)}return null}function x(u,p,b,E){for(var D=null,F=null,R=p,g=p=0,P=null;R!==null&&g<b.length;g++){R.index>g?(P=R,R=null):P=R.sibling;var $=N(u,R,b[g],E);if($===null){R===null&&(R=P);break}e&&R&&$.alternate===null&&t(u,R),p=l($,p,g),F===null?D=$:F.sibling=$,F=$,R=P}if(g===b.length)return s(u,R),Fe&&Jn(u,g),D;if(R===null){for(;g<b.length;g++)R=f(u,b[g],E),R!==null&&(p=l(R,p,g),F===null?D=R:F.sibling=R,F=R);return Fe&&Jn(u,g),D}for(R=r(u,R);g<b.length;g++)P=C(R,u,g,b[g],E),P!==null&&(e&&P.alternate!==null&&R.delete(P.key===null?g:P.key),p=l(P,p,g),F===null?D=P:F.sibling=P,F=P);return e&&R.forEach(function(T){return t(u,T)}),Fe&&Jn(u,g),D}function j(u,p,b,E){var D=Zs(b);if(typeof D!="function")throw Error(ee(150));if(b=D.call(b),b==null)throw Error(ee(151));for(var F=D=null,R=p,g=p=0,P=null,$=b.next();R!==null&&!$.done;g++,$=b.next()){R.index>g?(P=R,R=null):P=R.sibling;var T=N(u,R,$.value,E);if(T===null){R===null&&(R=P);break}e&&R&&T.alternate===null&&t(u,R),p=l(T,p,g),F===null?D=T:F.sibling=T,F=T,R=P}if($.done)return s(u,R),Fe&&Jn(u,g),D;if(R===null){for(;!$.done;g++,$=b.next())$=f(u,$.value,E),$!==null&&(p=l($,p,g),F===null?D=$:F.sibling=$,F=$);return Fe&&Jn(u,g),D}for(R=r(u,R);!$.done;g++,$=b.next())$=C(R,u,g,$.value,E),$!==null&&(e&&$.alternate!==null&&R.delete($.key===null?g:$.key),p=l($,p,g),F===null?D=$:F.sibling=$,F=$);return e&&R.forEach(function(w){return t(u,w)}),Fe&&Jn(u,g),D}function v(u,p,b,E){if(typeof b=="object"&&b!==null&&b.type===fs&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case aa:e:{for(var D=b.key,F=p;F!==null;){if(F.key===D){if(D=b.type,D===fs){if(F.tag===7){s(u,F.sibling),p=a(F,b.props.children),p.return=u,u=p;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===jn&&xd(D)===F.type){s(u,F.sibling),p=a(F,b.props),p.ref=rr(u,F,b),p.return=u,u=p;break e}s(u,F);break}else t(u,F);F=F.sibling}b.type===fs?(p=es(b.props.children,u.mode,E,b.key),p.return=u,u=p):(E=La(b.type,b.key,b.props,null,u.mode,E),E.ref=rr(u,p,b),E.return=u,u=E)}return o(u);case hs:e:{for(F=b.key;p!==null;){if(p.key===F)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){s(u,p.sibling),p=a(p,b.children||[]),p.return=u,u=p;break e}else{s(u,p);break}else t(u,p);p=p.sibling}p=xo(b,u.mode,E),p.return=u,u=p}return o(u);case jn:return F=b._init,v(u,p,F(b._payload),E)}if(dr(b))return x(u,p,b,E);if(Zs(b))return j(u,p,b,E);ga(u,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(s(u,p.sibling),p=a(p,b),p.return=u,u=p):(s(u,p),p=go(b,u.mode,E),p.return=u,u=p),o(u)):s(u,p)}return v}var Ls=Im(!0),Fm=Im(!1),Xa=$n(null),Za=null,ws=null,Qi=null;function Xi(){Qi=ws=Za=null}function Zi(e){var t=Xa.current;Le(Xa),e._currentValue=t}function ti(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function As(e,t){Za=e,Qi=ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function It(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},ws===null){if(Za===null)throw Error(ee(308));ws=e,Za.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Gn=null;function ec(e){Gn===null?Gn=[e]:Gn.push(e)}function Om(e,t,s,r){var a=t.interleaved;return a===null?(s.next=s,ec(t)):(s.next=a.next,a.next=s),t.interleaved=s,fn(e,r)}function fn(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var bn=!1;function tc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $m(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _n(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,fn(e,s)}return a=r.interleaved,a===null?(t.next=t,ec(r)):(t.next=a.next,a.next=t),r.interleaved=t,fn(e,s)}function Ta(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,zi(e,s)}}function vd(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var a=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?a=l=o:l=l.next=o,s=s.next}while(s!==null);l===null?a=l=t:l=l.next=t}else a=l=t;s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function el(e,t,s,r){var a=e.updateQueue;bn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,i=m.lastBaseUpdate,i!==o&&(i===null?m.firstBaseUpdate=d:i.next=d,m.lastBaseUpdate=c))}if(l!==null){var f=a.baseState;o=0,m=d=c=null,i=l;do{var N=i.lane,C=i.eventTime;if((r&N)===N){m!==null&&(m=m.next={eventTime:C,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var x=e,j=i;switch(N=t,C=s,j.tag){case 1:if(x=j.payload,typeof x=="function"){f=x.call(C,f,N);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=j.payload,N=typeof x=="function"?x.call(C,f,N):x,N==null)break e;f=Ve({},f,N);break e;case 2:bn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,N=a.effects,N===null?a.effects=[i]:N.push(i))}else C={eventTime:C,lane:N,tag:i.tag,payload:i.payload,callback:i.callback,next:null},m===null?(d=m=C,c=f):m=m.next=C,o|=N;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;N=i,i=N.next,N.next=null,a.lastBaseUpdate=N,a.shared.pending=null}}while(!0);if(m===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);as|=o,e.lanes=o,e.memoizedState=f}}function yd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=s,typeof a!="function")throw Error(ee(191,a));a.call(r)}}}var Jr={},nn=$n(Jr),Mr=$n(Jr),Lr=$n(Jr);function Qn(e){if(e===Jr)throw Error(ee(174));return e}function nc(e,t){switch(Re(Lr,t),Re(Mr,e),Re(nn,Jr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lo(t,e)}Le(nn),Re(nn,t)}function Is(){Le(nn),Le(Mr),Le(Lr)}function zm(e){Qn(Lr.current);var t=Qn(nn.current),s=Lo(t,e.type);t!==s&&(Re(Mr,e),Re(nn,s))}function sc(e){Mr.current===e&&(Le(nn),Le(Mr))}var $e=$n(0);function tl(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function rc(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var Aa=xn.ReactCurrentDispatcher,uo=xn.ReactCurrentBatchConfig,rs=0,ze=null,Ke=null,Qe=null,nl=!1,vr=!1,Ir=0,Tg=0;function rt(){throw Error(ee(321))}function ac(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Kt(e[s],t[s]))return!1;return!0}function lc(e,t,s,r,a,l){if(rs=l,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Aa.current=e===null||e.memoizedState===null?Rg:Mg,e=s(r,a),vr){l=0;do{if(vr=!1,Ir=0,25<=l)throw Error(ee(301));l+=1,Qe=Ke=null,t.updateQueue=null,Aa.current=Lg,e=s(r,a)}while(vr)}if(Aa.current=sl,t=Ke!==null&&Ke.next!==null,rs=0,Qe=Ke=ze=null,nl=!1,t)throw Error(ee(300));return e}function oc(){var e=Ir!==0;return Ir=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?ze.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ft(){if(Ke===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=Qe===null?ze.memoizedState:Qe.next;if(t!==null)Qe=t,Ke=e;else{if(e===null)throw Error(ee(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Qe===null?ze.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Fr(e,t){return typeof t=="function"?t(e):t}function mo(e){var t=Ft(),s=t.queue;if(s===null)throw Error(ee(311));s.lastRenderedReducer=e;var r=Ke,a=r.baseQueue,l=s.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,s.pending=null}if(a!==null){l=a.next,r=r.baseState;var i=o=null,c=null,d=l;do{var m=d.lane;if((rs&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,o=r):c=c.next=f,ze.lanes|=m,as|=m}d=d.next}while(d!==null&&d!==l);c===null?o=r:c.next=i,Kt(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){a=e;do l=a.lane,ze.lanes|=l,as|=l,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function po(e){var t=Ft(),s=t.queue;if(s===null)throw Error(ee(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,l=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);Kt(l,t.memoizedState)||(gt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,r]}function Vm(){}function Bm(e,t){var s=ze,r=Ft(),a=t(),l=!Kt(r.memoizedState,a);if(l&&(r.memoizedState=a,gt=!0),r=r.queue,ic(Hm.bind(null,s,r,e),[e]),r.getSnapshot!==t||l||Qe!==null&&Qe.memoizedState.tag&1){if(s.flags|=2048,Or(9,Wm.bind(null,s,r,a,t),void 0,null),Xe===null)throw Error(ee(349));rs&30||Um(s,t,a)}return a}function Um(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Wm(e,t,s,r){t.value=s,t.getSnapshot=r,qm(t)&&Jm(e)}function Hm(e,t,s){return s(function(){qm(t)&&Jm(e)})}function qm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Kt(e,s)}catch{return!0}}function Jm(e){var t=fn(e,1);t!==null&&Jt(t,e,1,-1)}function jd(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:e},t.queue=e,e=e.dispatch=Pg.bind(null,ze,e),[t.memoizedState,e]}function Or(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function Km(){return Ft().memoizedState}function _a(e,t,s,r){var a=Zt();ze.flags|=e,a.memoizedState=Or(1|t,s,void 0,r===void 0?null:r)}function vl(e,t,s,r){var a=Ft();r=r===void 0?null:r;var l=void 0;if(Ke!==null){var o=Ke.memoizedState;if(l=o.destroy,r!==null&&ac(r,o.deps)){a.memoizedState=Or(t,s,l,r);return}}ze.flags|=e,a.memoizedState=Or(1|t,s,l,r)}function bd(e,t){return _a(8390656,8,e,t)}function ic(e,t){return vl(2048,8,e,t)}function Ym(e,t){return vl(4,2,e,t)}function Gm(e,t){return vl(4,4,e,t)}function Qm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xm(e,t,s){return s=s!=null?s.concat([e]):null,vl(4,4,Qm.bind(null,t,e),s)}function cc(){}function Zm(e,t){var s=Ft();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&ac(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function ep(e,t){var s=Ft();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&ac(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function tp(e,t,s){return rs&21?(Kt(s,t)||(s=lm(),ze.lanes|=s,as|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=s)}function Ag(e,t){var s=_e;_e=s!==0&&4>s?s:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{_e=s,uo.transition=r}}function np(){return Ft().memoizedState}function _g(e,t,s){var r=Rn(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},sp(e))rp(t,s);else if(s=Om(e,t,s,r),s!==null){var a=mt();Jt(s,e,r,a),ap(s,t,r)}}function Pg(e,t,s){var r=Rn(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(sp(e))rp(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,s);if(a.hasEagerState=!0,a.eagerState=i,Kt(i,o)){var c=t.interleaved;c===null?(a.next=a,ec(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=Om(e,t,a,r),s!==null&&(a=mt(),Jt(s,e,r,a),ap(s,t,r))}}function sp(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function rp(e,t){vr=nl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function ap(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,zi(e,s)}}var sl={readContext:It,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Rg={readContext:It,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:It,useEffect:bd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,_a(4194308,4,Qm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return _a(4194308,4,e,t)},useInsertionEffect:function(e,t){return _a(4,2,e,t)},useMemo:function(e,t){var s=Zt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=Zt();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_g.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:jd,useDebugValue:cc,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=jd(!1),t=e[0];return e=Ag.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=ze,a=Zt();if(Fe){if(s===void 0)throw Error(ee(407));s=s()}else{if(s=t(),Xe===null)throw Error(ee(349));rs&30||Um(r,t,s)}a.memoizedState=s;var l={value:s,getSnapshot:t};return a.queue=l,bd(Hm.bind(null,r,l,e),[e]),r.flags|=2048,Or(9,Wm.bind(null,r,l,s,t),void 0,null),s},useId:function(){var e=Zt(),t=Xe.identifierPrefix;if(Fe){var s=un,r=dn;s=(r&~(1<<32-qt(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ir++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Tg++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mg={readContext:It,useCallback:Zm,useContext:It,useEffect:ic,useImperativeHandle:Xm,useInsertionEffect:Ym,useLayoutEffect:Gm,useMemo:ep,useReducer:mo,useRef:Km,useState:function(){return mo(Fr)},useDebugValue:cc,useDeferredValue:function(e){var t=Ft();return tp(t,Ke.memoizedState,e)},useTransition:function(){var e=mo(Fr)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:Vm,useSyncExternalStore:Bm,useId:np,unstable_isNewReconciler:!1},Lg={readContext:It,useCallback:Zm,useContext:It,useEffect:ic,useImperativeHandle:Xm,useInsertionEffect:Ym,useLayoutEffect:Gm,useMemo:ep,useReducer:po,useRef:Km,useState:function(){return po(Fr)},useDebugValue:cc,useDeferredValue:function(e){var t=Ft();return Ke===null?t.memoizedState=e:tp(t,Ke.memoizedState,e)},useTransition:function(){var e=po(Fr)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:Vm,useSyncExternalStore:Bm,useId:np,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function ni(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:Ve({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var yl={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=mt(),a=Rn(e),l=mn(r,a);l.payload=t,s!=null&&(l.callback=s),t=_n(e,l,a),t!==null&&(Jt(t,e,a,r),Ta(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=mt(),a=Rn(e),l=mn(r,a);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=_n(e,l,a),t!==null&&(Jt(t,e,a,r),Ta(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=mt(),r=Rn(e),a=mn(s,r);a.tag=2,t!=null&&(a.callback=t),t=_n(e,a,r),t!==null&&(Jt(t,e,r,s),Ta(t,e,r))}};function Nd(e,t,s,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!Ar(s,r)||!Ar(a,l):!0}function lp(e,t,s){var r=!1,a=Fn,l=t.contextType;return typeof l=="object"&&l!==null?l=It(l):(a=vt(t)?ns:it.current,r=t.contextTypes,l=(r=r!=null)?Rs(e,a):Fn),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function wd(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&yl.enqueueReplaceState(t,t.state,null)}function si(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},tc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=It(l):(l=vt(t)?ns:it.current,a.context=Rs(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ni(e,t,l,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&yl.enqueueReplaceState(a,a.state,null),el(e,s,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Fs(e,t){try{var s="",r=t;do s+=cf(r),r=r.return;while(r);var a=s}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function ho(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function ri(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Ig=typeof WeakMap=="function"?WeakMap:Map;function op(e,t,s){s=mn(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){al||(al=!0,hi=r),ri(e,t)},s}function ip(e,t,s){s=mn(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){ri(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){ri(e,t),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Sd(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Ig;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=Gg.bind(null,e,t,s),t.then(e,e))}function Cd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kd(e,t,s,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=mn(-1,1),t.tag=2,_n(s,t,1))),s.lanes|=1),e)}var Fg=xn.ReactCurrentOwner,gt=!1;function ut(e,t,s,r){t.child=e===null?Fm(t,null,s,r):Ls(t,e.child,s,r)}function Ed(e,t,s,r,a){s=s.render;var l=t.ref;return As(t,a),r=lc(e,t,s,r,l,a),s=oc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gn(e,t,a)):(Fe&&s&&Ki(t),t.flags|=1,ut(e,t,r,a),t.child)}function Dd(e,t,s,r,a){if(e===null){var l=s.type;return typeof l=="function"&&!xc(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,cp(e,t,l,r,a)):(e=La(s.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(s=s.compare,s=s!==null?s:Ar,s(o,r)&&e.ref===t.ref)return gn(e,t,a)}return t.flags|=1,e=Mn(l,r),e.ref=t.ref,e.return=t,t.child=e}function cp(e,t,s,r,a){if(e!==null){var l=e.memoizedProps;if(Ar(l,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,gn(e,t,a)}return ai(e,t,s,r,a)}function dp(e,t,s){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Cs,St),St|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Cs,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:s,Re(Cs,St),St|=r}else l!==null?(r=l.baseLanes|s,t.memoizedState=null):r=s,Re(Cs,St),St|=r;return ut(e,t,a,s),t.child}function up(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function ai(e,t,s,r,a){var l=vt(s)?ns:it.current;return l=Rs(t,l),As(t,a),s=lc(e,t,s,r,l,a),r=oc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gn(e,t,a)):(Fe&&r&&Ki(t),t.flags|=1,ut(e,t,s,a),t.child)}function Td(e,t,s,r,a){if(vt(s)){var l=!0;Ya(t)}else l=!1;if(As(t,a),t.stateNode===null)Pa(e,t),lp(t,s,r),si(t,s,r,a),r=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=It(d):(d=vt(s)?ns:it.current,d=Rs(t,d));var m=s.getDerivedStateFromProps,f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==r||c!==d)&&wd(t,o,r,d),bn=!1;var N=t.memoizedState;o.state=N,el(t,r,o,a),c=t.memoizedState,i!==r||N!==c||xt.current||bn?(typeof m=="function"&&(ni(t,s,m,r),c=t.memoizedState),(i=bn||Nd(t,s,i,r,N,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,$m(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Ut(t.type,i),o.props=d,f=t.pendingProps,N=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=It(c):(c=vt(s)?ns:it.current,c=Rs(t,c));var C=s.getDerivedStateFromProps;(m=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==f||N!==c)&&wd(t,o,r,c),bn=!1,N=t.memoizedState,o.state=N,el(t,r,o,a);var x=t.memoizedState;i!==f||N!==x||xt.current||bn?(typeof C=="function"&&(ni(t,s,C,r),x=t.memoizedState),(d=bn||Nd(t,s,d,r,N,x,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return li(e,t,s,r,l,a)}function li(e,t,s,r,a,l){up(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&hd(t,s,!1),gn(e,t,l);r=t.stateNode,Fg.current=t;var i=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ls(t,e.child,null,l),t.child=Ls(t,null,i,l)):ut(e,t,i,l),t.memoizedState=r.state,a&&hd(t,s,!0),t.child}function mp(e){var t=e.stateNode;t.pendingContext?pd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pd(e,t.context,!1),nc(e,t.containerInfo)}function Ad(e,t,s,r,a){return Ms(),Gi(a),t.flags|=256,ut(e,t,s,r),t.child}var oi={dehydrated:null,treeContext:null,retryLane:0};function ii(e){return{baseLanes:e,cachePool:null,transitions:null}}function pp(e,t,s){var r=t.pendingProps,a=$e.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Re($e,a&1),e===null)return ei(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Nl(o,r,0,null),e=es(e,r,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ii(s),t.memoizedState=oi,e):dc(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return Og(e,t,o,r,i,a,s);if(l){l=r.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=Mn(i,l):(l=es(l,o,s,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?ii(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=oi,r}return l=e.child,e=l.sibling,r=Mn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function dc(e,t){return t=Nl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xa(e,t,s,r){return r!==null&&Gi(r),Ls(t,e.child,null,s),e=dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Og(e,t,s,r,a,l,o){if(s)return t.flags&256?(t.flags&=-257,r=ho(Error(ee(422))),xa(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=Nl({mode:"visible",children:r.children},a,0,null),l=es(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ls(t,e.child,null,o),t.child.memoizedState=ii(o),t.memoizedState=oi,l);if(!(t.mode&1))return xa(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(ee(419)),r=ho(l,r,void 0),xa(e,t,o,r)}if(i=(o&e.childLanes)!==0,gt||i){if(r=Xe,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,fn(e,a),Jt(r,e,a,-1))}return gc(),r=ho(Error(ee(421))),xa(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Qg.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ct=An(a.nextSibling),kt=t,Fe=!0,Ht=null,e!==null&&(Pt[Rt++]=dn,Pt[Rt++]=un,Pt[Rt++]=ss,dn=e.id,un=e.overflow,ss=t),t=dc(t,r.children),t.flags|=4096,t)}function _d(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ti(e.return,t,s)}function fo(e,t,s,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=s,l.tailMode=a)}function hp(e,t,s){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(ut(e,t,r.children,s),r=$e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_d(e,s,t);else if(e.tag===19)_d(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re($e,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&tl(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),fo(t,!1,a,s,l);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&tl(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}fo(t,!0,s,null,l);break;case"together":fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),as|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,s=Mn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Mn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function $g(e,t,s){switch(t.tag){case 3:mp(t),Ms();break;case 5:zm(t);break;case 1:vt(t.type)&&Ya(t);break;case 4:nc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Re(Xa,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re($e,$e.current&1),t.flags|=128,null):s&t.child.childLanes?pp(e,t,s):(Re($e,$e.current&1),e=gn(e,t,s),e!==null?e.sibling:null);Re($e,$e.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return hp(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Re($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,dp(e,t,s)}return gn(e,t,s)}var fp,ci,gp,xp;fp=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};ci=function(){};gp=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qn(nn.current);var l=null;switch(s){case"input":a=_o(e,a),r=_o(e,r),l=[];break;case"select":a=Ve({},a,{value:void 0}),r=Ve({},r,{value:void 0}),l=[];break;case"textarea":a=Mo(e,a),r=Mo(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ja)}Io(s,r);var o;s=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wr.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(l||(l=[]),l.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}s&&(l=l||[]).push("style",s);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};xp=function(e,t,s,r){s!==r&&(t.flags|=4)};function ar(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function zg(e,t,s){var r=t.pendingProps;switch(Yi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return vt(t.type)&&Ka(),at(t),null;case 3:return r=t.stateNode,Is(),Le(xt),Le(it),rc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(xi(Ht),Ht=null))),ci(e,t),at(t),null;case 5:sc(t);var a=Qn(Lr.current);if(s=t.type,e!==null&&t.stateNode!=null)gp(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return at(t),null}if(e=Qn(nn.current),fa(t)){r=t.stateNode,s=t.type;var l=t.memoizedProps;switch(r[en]=t,r[Rr]=l,e=(t.mode&1)!==0,s){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(a=0;a<mr.length;a++)Me(mr[a],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":zc(r,l),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Me("invalid",r);break;case"textarea":Bc(r,l),Me("invalid",r)}Io(s,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&ha(r.textContent,i,e),a=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&ha(r.textContent,i,e),a=["children",""+i]):wr.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Me("scroll",r)}switch(s){case"input":la(r),Vc(r,l,!0);break;case"textarea":la(r),Uc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ja)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),s==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[en]=t,e[Rr]=r,fp(e,t,!1,!1),t.stateNode=e;e:{switch(o=Fo(s,r),s){case"dialog":Me("cancel",e),Me("close",e),a=r;break;case"iframe":case"object":case"embed":Me("load",e),a=r;break;case"video":case"audio":for(a=0;a<mr.length;a++)Me(mr[a],e);a=r;break;case"source":Me("error",e),a=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),a=r;break;case"details":Me("toggle",e),a=r;break;case"input":zc(e,r),a=_o(e,r),Me("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ve({},r,{value:void 0}),Me("invalid",e);break;case"textarea":Bc(e,r),a=Mo(e,r),Me("invalid",e);break;default:a=r}Io(s,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Ku(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qu(e,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Sr(e,c):typeof c=="number"&&Sr(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(wr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Me("scroll",e):c!=null&&Mi(e,l,c,o))}switch(s){case"input":la(e),Vc(e,r,!1);break;case"textarea":la(e),Uc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+In(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?ks(e,!!r.multiple,l,!1):r.defaultValue!=null&&ks(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ja)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)xp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(s=Qn(Lr.current),Qn(nn.current),fa(t)){if(r=t.stateNode,s=t.memoizedProps,r[en]=t,(l=r.nodeValue!==s)&&(e=kt,e!==null))switch(e.tag){case 3:ha(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[en]=t,t.stateNode=r}return at(t),null;case 13:if(Le($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&Ct!==null&&t.mode&1&&!(t.flags&128))Lm(),Ms(),t.flags|=98560,l=!1;else if(l=fa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(ee(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ee(317));l[en]=t}else Ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),l=!1}else Ht!==null&&(xi(Ht),Ht=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?Ye===0&&(Ye=3):gc())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return Is(),ci(e,t),e===null&&_r(t.stateNode.containerInfo),at(t),null;case 10:return Zi(t.type._context),at(t),null;case 17:return vt(t.type)&&Ka(),at(t),null;case 19:if(Le($e),l=t.memoizedState,l===null)return at(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)ar(l,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=tl(e),o!==null){for(t.flags|=128,ar(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)l=s,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Re($e,$e.current&1|2),t.child}e=e.sibling}l.tail!==null&&He()>Os&&(t.flags|=128,r=!0,ar(l,!1),t.lanes=4194304)}else{if(!r)if(e=tl(o),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ar(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Fe)return at(t),null}else 2*He()-l.renderingStartTime>Os&&s!==1073741824&&(t.flags|=128,r=!0,ar(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=He(),t.sibling=null,s=$e.current,Re($e,r?s&1|2:s&1),t):(at(t),null);case 22:case 23:return fc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?St&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function Vg(e,t){switch(Yi(t),t.tag){case 1:return vt(t.type)&&Ka(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Is(),Le(xt),Le(it),rc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sc(t),null;case 13:if(Le($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Le($e),null;case 4:return Is(),null;case 10:return Zi(t.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var va=!1,lt=!1,Bg=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ss(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Be(e,t,r)}else s.current=null}function di(e,t,s){try{s()}catch(r){Be(e,t,r)}}var Pd=!1;function Ug(e,t){if(Jo=Wa,e=Nm(),Ji(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var o=0,i=-1,c=-1,d=0,m=0,f=e,N=null;t:for(;;){for(var C;f!==s||a!==0&&f.nodeType!==3||(i=o+a),f!==l||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(C=f.firstChild)!==null;)N=f,f=C;for(;;){if(f===e)break t;if(N===s&&++d===a&&(i=o),N===l&&++m===r&&(c=o),(C=f.nextSibling)!==null)break;f=N,N=f.parentNode}f=C}s=i===-1||c===-1?null:{start:i,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ko={focusedElem:e,selectionRange:s},Wa=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var j=x.memoizedProps,v=x.memoizedState,u=t.stateNode,p=u.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ut(t.type,j),v);u.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(E){Be(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return x=Pd,Pd=!1,x}function yr(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&di(t,s,l)}a=a.next}while(a!==r)}}function jl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function ui(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function vp(e){var t=e.alternate;t!==null&&(e.alternate=null,vp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[Rr],delete t[Qo],delete t[Cg],delete t[kg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yp(e){return e.tag===5||e.tag===3||e.tag===4}function Rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mi(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ja));else if(r!==4&&(e=e.child,e!==null))for(mi(e,t,s),e=e.sibling;e!==null;)mi(e,t,s),e=e.sibling}function pi(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pi(e,t,s),e=e.sibling;e!==null;)pi(e,t,s),e=e.sibling}var tt=null,Wt=!1;function yn(e,t,s){for(s=s.child;s!==null;)jp(e,t,s),s=s.sibling}function jp(e,t,s){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ml,s)}catch{}switch(s.tag){case 5:lt||Ss(s,t);case 6:var r=tt,a=Wt;tt=null,yn(e,t,s),tt=r,Wt=a,tt!==null&&(Wt?(e=tt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):tt.removeChild(s.stateNode));break;case 18:tt!==null&&(Wt?(e=tt,s=s.stateNode,e.nodeType===8?oo(e.parentNode,s):e.nodeType===1&&oo(e,s),Dr(e)):oo(tt,s.stateNode));break;case 4:r=tt,a=Wt,tt=s.stateNode.containerInfo,Wt=!0,yn(e,t,s),tt=r,Wt=a;break;case 0:case 11:case 14:case 15:if(!lt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&di(s,t,o),a=a.next}while(a!==r)}yn(e,t,s);break;case 1:if(!lt&&(Ss(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(i){Be(s,t,i)}yn(e,t,s);break;case 21:yn(e,t,s);break;case 22:s.mode&1?(lt=(r=lt)||s.memoizedState!==null,yn(e,t,s),lt=r):yn(e,t,s);break;default:yn(e,t,s)}}function Md(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Bg),t.forEach(function(r){var a=Xg.bind(null,e,r);s.has(r)||(s.add(r),r.then(a,a))})}}function Vt(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:tt=i.stateNode,Wt=!1;break e;case 3:tt=i.stateNode.containerInfo,Wt=!0;break e;case 4:tt=i.stateNode.containerInfo,Wt=!0;break e}i=i.return}if(tt===null)throw Error(ee(160));jp(l,o,a),tt=null,Wt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Be(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bp(t,e),t=t.sibling}function bp(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),Qt(e),r&4){try{yr(3,e,e.return),jl(3,e)}catch(j){Be(e,e.return,j)}try{yr(5,e,e.return)}catch(j){Be(e,e.return,j)}}break;case 1:Vt(t,e),Qt(e),r&512&&s!==null&&Ss(s,s.return);break;case 5:if(Vt(t,e),Qt(e),r&512&&s!==null&&Ss(s,s.return),e.flags&32){var a=e.stateNode;try{Sr(a,"")}catch(j){Be(e,e.return,j)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=s!==null?s.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Uu(a,l),Fo(i,o);var d=Fo(i,l);for(o=0;o<c.length;o+=2){var m=c[o],f=c[o+1];m==="style"?Ku(a,f):m==="dangerouslySetInnerHTML"?qu(a,f):m==="children"?Sr(a,f):Mi(a,m,f,d)}switch(i){case"input":Po(a,l);break;case"textarea":Wu(a,l);break;case"select":var N=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var C=l.value;C!=null?ks(a,!!l.multiple,C,!1):N!==!!l.multiple&&(l.defaultValue!=null?ks(a,!!l.multiple,l.defaultValue,!0):ks(a,!!l.multiple,l.multiple?[]:"",!1))}a[Rr]=l}catch(j){Be(e,e.return,j)}}break;case 6:if(Vt(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(ee(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(j){Be(e,e.return,j)}}break;case 3:if(Vt(t,e),Qt(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Dr(t.containerInfo)}catch(j){Be(e,e.return,j)}break;case 4:Vt(t,e),Qt(e);break;case 13:Vt(t,e),Qt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(pc=He())),r&4&&Md(e);break;case 22:if(m=s!==null&&s.memoizedState!==null,e.mode&1?(lt=(d=lt)||m,Vt(t,e),lt=d):Vt(t,e),Qt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(ie=e,m=e.child;m!==null;){for(f=ie=m;ie!==null;){switch(N=ie,C=N.child,N.tag){case 0:case 11:case 14:case 15:yr(4,N,N.return);break;case 1:Ss(N,N.return);var x=N.stateNode;if(typeof x.componentWillUnmount=="function"){r=N,s=N.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(j){Be(r,s,j)}}break;case 5:Ss(N,N.return);break;case 22:if(N.memoizedState!==null){Id(f);continue}}C!==null?(C.return=N,ie=C):Id(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{a=f.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Ju("display",o))}catch(j){Be(e,e.return,j)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(j){Be(e,e.return,j)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vt(t,e),Qt(e),r&4&&Md(e);break;case 21:break;default:Vt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(yp(s)){var r=s;break e}s=s.return}throw Error(ee(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Sr(a,""),r.flags&=-33);var l=Rd(e);pi(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,i=Rd(e);mi(e,i,o);break;default:throw Error(ee(161))}}catch(c){Be(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wg(e,t,s){ie=e,Np(e)}function Np(e,t,s){for(var r=(e.mode&1)!==0;ie!==null;){var a=ie,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||va;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||lt;i=va;var d=lt;if(va=o,(lt=c)&&!d)for(ie=a;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?Fd(a):c!==null?(c.return=o,ie=c):Fd(a);for(;l!==null;)ie=l,Np(l),l=l.sibling;ie=a,va=i,lt=d}Ld(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ie=l):Ld(e)}}function Ld(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||jl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!lt)if(s===null)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Ut(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&yd(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}yd(t,o,s)}break;case 5:var i=t.stateNode;if(s===null&&t.flags&4){s=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Dr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}lt||t.flags&512&&ui(t)}catch(N){Be(t,t.return,N)}}if(t===e){ie=null;break}if(s=t.sibling,s!==null){s.return=t.return,ie=s;break}ie=t.return}}function Id(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ie=s;break}ie=t.return}}function Fd(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{jl(4,t)}catch(c){Be(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Be(t,a,c)}}var l=t.return;try{ui(t)}catch(c){Be(t,l,c)}break;case 5:var o=t.return;try{ui(t)}catch(c){Be(t,o,c)}}}catch(c){Be(t,t.return,c)}if(t===e){ie=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ie=i;break}ie=t.return}}var Hg=Math.ceil,rl=xn.ReactCurrentDispatcher,uc=xn.ReactCurrentOwner,Lt=xn.ReactCurrentBatchConfig,ke=0,Xe=null,Je=null,nt=0,St=0,Cs=$n(0),Ye=0,$r=null,as=0,bl=0,mc=0,jr=null,ft=null,pc=0,Os=1/0,on=null,al=!1,hi=null,Pn=null,ya=!1,Cn=null,ll=0,br=0,fi=null,Ra=-1,Ma=0;function mt(){return ke&6?He():Ra!==-1?Ra:Ra=He()}function Rn(e){return e.mode&1?ke&2&&nt!==0?nt&-nt:Dg.transition!==null?(Ma===0&&(Ma=lm()),Ma):(e=_e,e!==0||(e=window.event,e=e===void 0?16:pm(e.type)),e):1}function Jt(e,t,s,r){if(50<br)throw br=0,fi=null,Error(ee(185));Wr(e,s,r),(!(ke&2)||e!==Xe)&&(e===Xe&&(!(ke&2)&&(bl|=s),Ye===4&&wn(e,nt)),yt(e,r),s===1&&ke===0&&!(t.mode&1)&&(Os=He()+500,xl&&zn()))}function yt(e,t){var s=e.callbackNode;Df(e,t);var r=Ua(e,e===Xe?nt:0);if(r===0)s!==null&&qc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&qc(s),t===1)e.tag===0?Eg(Od.bind(null,e)):Pm(Od.bind(null,e)),wg(function(){!(ke&6)&&zn()}),s=null;else{switch(om(r)){case 1:s=$i;break;case 4:s=rm;break;case 16:s=Ba;break;case 536870912:s=am;break;default:s=Ba}s=Ap(s,wp.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function wp(e,t){if(Ra=-1,Ma=0,ke&6)throw Error(ee(327));var s=e.callbackNode;if(_s()&&e.callbackNode!==s)return null;var r=Ua(e,e===Xe?nt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ol(e,r);else{t=r;var a=ke;ke|=2;var l=Cp();(Xe!==e||nt!==t)&&(on=null,Os=He()+500,Zn(e,t));do try{Kg();break}catch(i){Sp(e,i)}while(!0);Xi(),rl.current=l,ke=a,Je!==null?t=0:(Xe=null,nt=0,t=Ye)}if(t!==0){if(t===2&&(a=Bo(e),a!==0&&(r=a,t=gi(e,a))),t===1)throw s=$r,Zn(e,0),wn(e,r),yt(e,He()),s;if(t===6)wn(e,r);else{if(a=e.current.alternate,!(r&30)&&!qg(a)&&(t=ol(e,r),t===2&&(l=Bo(e),l!==0&&(r=l,t=gi(e,l))),t===1))throw s=$r,Zn(e,0),wn(e,r),yt(e,He()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:Kn(e,ft,on);break;case 3:if(wn(e,r),(r&130023424)===r&&(t=pc+500-He(),10<t)){if(Ua(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){mt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Go(Kn.bind(null,e,ft,on),t);break}Kn(e,ft,on);break;case 4:if(wn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-qt(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hg(r/1960))-r,10<r){e.timeoutHandle=Go(Kn.bind(null,e,ft,on),r);break}Kn(e,ft,on);break;case 5:Kn(e,ft,on);break;default:throw Error(ee(329))}}}return yt(e,He()),e.callbackNode===s?wp.bind(null,e):null}function gi(e,t){var s=jr;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=ol(e,t),e!==2&&(t=ft,ft=s,t!==null&&xi(t)),e}function xi(e){ft===null?ft=e:ft.push.apply(ft,e)}function qg(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var a=s[r],l=a.getSnapshot;a=a.value;try{if(!Kt(l(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~mc,t&=~bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-qt(t),r=1<<s;e[s]=-1,t&=~r}}function Od(e){if(ke&6)throw Error(ee(327));_s();var t=Ua(e,0);if(!(t&1))return yt(e,He()),null;var s=ol(e,t);if(e.tag!==0&&s===2){var r=Bo(e);r!==0&&(t=r,s=gi(e,r))}if(s===1)throw s=$r,Zn(e,0),wn(e,t),yt(e,He()),s;if(s===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,ft,on),yt(e,He()),null}function hc(e,t){var s=ke;ke|=1;try{return e(t)}finally{ke=s,ke===0&&(Os=He()+500,xl&&zn())}}function ls(e){Cn!==null&&Cn.tag===0&&!(ke&6)&&_s();var t=ke;ke|=1;var s=Lt.transition,r=_e;try{if(Lt.transition=null,_e=1,e)return e()}finally{_e=r,Lt.transition=s,ke=t,!(ke&6)&&zn()}}function fc(){St=Cs.current,Le(Cs)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Ng(s)),Je!==null)for(s=Je.return;s!==null;){var r=s;switch(Yi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ka();break;case 3:Is(),Le(xt),Le(it),rc();break;case 5:sc(r);break;case 4:Is();break;case 13:Le($e);break;case 19:Le($e);break;case 10:Zi(r.type._context);break;case 22:case 23:fc()}s=s.return}if(Xe=e,Je=e=Mn(e.current,null),nt=St=t,Ye=0,$r=null,mc=bl=as=0,ft=jr=null,Gn!==null){for(t=0;t<Gn.length;t++)if(s=Gn[t],r=s.interleaved,r!==null){s.interleaved=null;var a=r.next,l=s.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}s.pending=r}Gn=null}return e}function Sp(e,t){do{var s=Je;try{if(Xi(),Aa.current=sl,nl){for(var r=ze.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}nl=!1}if(rs=0,Qe=Ke=ze=null,vr=!1,Ir=0,uc.current=null,s===null||s.return===null){Ye=1,$r=t,Je=null;break}e:{var l=e,o=s.return,i=s,c=t;if(t=nt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=i,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var N=m.alternate;N?(m.updateQueue=N.updateQueue,m.memoizedState=N.memoizedState,m.lanes=N.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=Cd(o);if(C!==null){C.flags&=-257,kd(C,o,i,l,t),C.mode&1&&Sd(l,d,t),t=C,c=d;var x=t.updateQueue;if(x===null){var j=new Set;j.add(c),t.updateQueue=j}else x.add(c);break e}else{if(!(t&1)){Sd(l,d,t),gc();break e}c=Error(ee(426))}}else if(Fe&&i.mode&1){var v=Cd(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),kd(v,o,i,l,t),Gi(Fs(c,i));break e}}l=c=Fs(c,i),Ye!==4&&(Ye=2),jr===null?jr=[l]:jr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var u=op(l,c,t);vd(l,u);break e;case 1:i=c;var p=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Pn===null||!Pn.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t;var E=ip(l,i,t);vd(l,E);break e}}l=l.return}while(l!==null)}Ep(s)}catch(D){t=D,Je===s&&s!==null&&(Je=s=s.return);continue}break}while(!0)}function Cp(){var e=rl.current;return rl.current=sl,e===null?sl:e}function gc(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Xe===null||!(as&268435455)&&!(bl&268435455)||wn(Xe,nt)}function ol(e,t){var s=ke;ke|=2;var r=Cp();(Xe!==e||nt!==t)&&(on=null,Zn(e,t));do try{Jg();break}catch(a){Sp(e,a)}while(!0);if(Xi(),ke=s,rl.current=r,Je!==null)throw Error(ee(261));return Xe=null,nt=0,Ye}function Jg(){for(;Je!==null;)kp(Je)}function Kg(){for(;Je!==null&&!yf();)kp(Je)}function kp(e){var t=Tp(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?Ep(e):Je=t,uc.current=null}function Ep(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Vg(s,t),s!==null){s.flags&=32767,Je=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Je=null;return}}else if(s=zg(s,t,St),s!==null){Je=s;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);Ye===0&&(Ye=5)}function Kn(e,t,s){var r=_e,a=Lt.transition;try{Lt.transition=null,_e=1,Yg(e,t,s,r)}finally{Lt.transition=a,_e=r}return null}function Yg(e,t,s,r){do _s();while(Cn!==null);if(ke&6)throw Error(ee(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(Tf(e,l),e===Xe&&(Je=Xe=null,nt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ya||(ya=!0,Ap(Ba,function(){return _s(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=Lt.transition,Lt.transition=null;var o=_e;_e=1;var i=ke;ke|=4,uc.current=null,Ug(e,s),bp(s,e),fg(Ko),Wa=!!Jo,Ko=Jo=null,e.current=s,Wg(s),jf(),ke=i,_e=o,Lt.transition=l}else e.current=s;if(ya&&(ya=!1,Cn=e,ll=a),l=e.pendingLanes,l===0&&(Pn=null),wf(s.stateNode),yt(e,He()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(al)throw al=!1,e=hi,hi=null,e;return ll&1&&e.tag!==0&&_s(),l=e.pendingLanes,l&1?e===fi?br++:(br=0,fi=e):br=0,zn(),null}function _s(){if(Cn!==null){var e=om(ll),t=Lt.transition,s=_e;try{if(Lt.transition=null,_e=16>e?16:e,Cn===null)var r=!1;else{if(e=Cn,Cn=null,ll=0,ke&6)throw Error(ee(331));var a=ke;for(ke|=4,ie=e.current;ie!==null;){var l=ie,o=l.child;if(ie.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(ie=d;ie!==null;){var m=ie;switch(m.tag){case 0:case 11:case 15:yr(8,m,l)}var f=m.child;if(f!==null)f.return=m,ie=f;else for(;ie!==null;){m=ie;var N=m.sibling,C=m.return;if(vp(m),m===d){ie=null;break}if(N!==null){N.return=C,ie=N;break}ie=C}}}var x=l.alternate;if(x!==null){var j=x.child;if(j!==null){x.child=null;do{var v=j.sibling;j.sibling=null,j=v}while(j!==null)}}ie=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,ie=o;else e:for(;ie!==null;){if(l=ie,l.flags&2048)switch(l.tag){case 0:case 11:case 15:yr(9,l,l.return)}var u=l.sibling;if(u!==null){u.return=l.return,ie=u;break e}ie=l.return}}var p=e.current;for(ie=p;ie!==null;){o=ie;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ie=b;else e:for(o=p;ie!==null;){if(i=ie,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:jl(9,i)}}catch(D){Be(i,i.return,D)}if(i===o){ie=null;break e}var E=i.sibling;if(E!==null){E.return=i.return,ie=E;break e}ie=i.return}}if(ke=a,zn(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ml,e)}catch{}r=!0}return r}finally{_e=s,Lt.transition=t}}return!1}function $d(e,t,s){t=Fs(s,t),t=op(e,t,1),e=_n(e,t,1),t=mt(),e!==null&&(Wr(e,1,t),yt(e,t))}function Be(e,t,s){if(e.tag===3)$d(e,e,s);else for(;t!==null;){if(t.tag===3){$d(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pn===null||!Pn.has(r))){e=Fs(s,e),e=ip(t,e,1),t=_n(t,e,1),e=mt(),t!==null&&(Wr(t,1,e),yt(t,e));break}}t=t.return}}function Gg(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&s,Xe===e&&(nt&s)===s&&(Ye===4||Ye===3&&(nt&130023424)===nt&&500>He()-pc?Zn(e,0):mc|=s),yt(e,t)}function Dp(e,t){t===0&&(e.mode&1?(t=ca,ca<<=1,!(ca&130023424)&&(ca=4194304)):t=1);var s=mt();e=fn(e,t),e!==null&&(Wr(e,t,s),yt(e,s))}function Qg(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Dp(e,s)}function Xg(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),Dp(e,s)}var Tp;Tp=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)gt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return gt=!1,$g(e,t,s);gt=!!(e.flags&131072)}else gt=!1,Fe&&t.flags&1048576&&Rm(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pa(e,t),e=t.pendingProps;var a=Rs(t,it.current);As(t,s),a=lc(null,t,r,e,a,s);var l=oc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(r)?(l=!0,Ya(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,tc(t),a.updater=yl,t.stateNode=a,a._reactInternals=t,si(t,r,e,s),t=li(null,t,r,!0,l,s)):(t.tag=0,Fe&&l&&Ki(t),ut(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(Pa(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=ex(r),e=Ut(r,e),a){case 0:t=ai(null,t,r,e,s);break e;case 1:t=Td(null,t,r,e,s);break e;case 11:t=Ed(null,t,r,e,s);break e;case 14:t=Dd(null,t,r,Ut(r.type,e),s);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),ai(e,t,r,a,s);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),Td(e,t,r,a,s);case 3:e:{if(mp(t),e===null)throw Error(ee(387));r=t.pendingProps,l=t.memoizedState,a=l.element,$m(e,t),el(t,r,null,s);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Fs(Error(ee(423)),t),t=Ad(e,t,r,s,a);break e}else if(r!==a){a=Fs(Error(ee(424)),t),t=Ad(e,t,r,s,a);break e}else for(Ct=An(t.stateNode.containerInfo.firstChild),kt=t,Fe=!0,Ht=null,s=Fm(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ms(),r===a){t=gn(e,t,s);break e}ut(e,t,r,s)}t=t.child}return t;case 5:return zm(t),e===null&&ei(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,Yo(r,a)?o=null:l!==null&&Yo(r,l)&&(t.flags|=32),up(e,t),ut(e,t,o,s),t.child;case 6:return e===null&&ei(t),null;case 13:return pp(e,t,s);case 4:return nc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ls(t,null,r,s):ut(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),Ed(e,t,r,a,s);case 7:return ut(e,t,t.pendingProps,s),t.child;case 8:return ut(e,t,t.pendingProps.children,s),t.child;case 12:return ut(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,Re(Xa,r._currentValue),r._currentValue=o,l!==null)if(Kt(l.value,o)){if(l.children===a.children&&!xt.current){t=gn(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=mn(-1,s&-s),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),ti(l.return,s,t),i.lanes|=s;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(ee(341));o.lanes|=s,i=o.alternate,i!==null&&(i.lanes|=s),ti(o,s,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}ut(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,As(t,s),a=It(a),r=r(a),t.flags|=1,ut(e,t,r,s),t.child;case 14:return r=t.type,a=Ut(r,t.pendingProps),a=Ut(r.type,a),Dd(e,t,r,a,s);case 15:return cp(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ut(r,a),Pa(e,t),t.tag=1,vt(r)?(e=!0,Ya(t)):e=!1,As(t,s),lp(t,r,a),si(t,r,a,s),li(null,t,r,!0,e,s);case 19:return hp(e,t,s);case 22:return dp(e,t,s)}throw Error(ee(156,t.tag))};function Ap(e,t){return sm(e,t)}function Zg(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,s,r){return new Zg(e,t,s,r)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ex(e){if(typeof e=="function")return xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ii)return 11;if(e===Fi)return 14}return 2}function Mn(e,t){var s=e.alternate;return s===null?(s=Mt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function La(e,t,s,r,a,l){var o=2;if(r=e,typeof e=="function")xc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fs:return es(s.children,a,l,t);case Li:o=8,a|=8;break;case Eo:return e=Mt(12,s,t,a|2),e.elementType=Eo,e.lanes=l,e;case Do:return e=Mt(13,s,t,a),e.elementType=Do,e.lanes=l,e;case To:return e=Mt(19,s,t,a),e.elementType=To,e.lanes=l,e;case zu:return Nl(s,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ou:o=10;break e;case $u:o=9;break e;case Ii:o=11;break e;case Fi:o=14;break e;case jn:o=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Mt(o,s,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function es(e,t,s,r){return e=Mt(7,e,r,t),e.lanes=s,e}function Nl(e,t,s,r){return e=Mt(22,e,r,t),e.elementType=zu,e.lanes=s,e.stateNode={isHidden:!1},e}function go(e,t,s){return e=Mt(6,e,null,t),e.lanes=s,e}function xo(e,t,s){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tx(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gl(0),this.expirationTimes=Gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vc(e,t,s,r,a,l,o,i,c){return e=new tx(e,t,s,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Mt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},tc(l),e}function nx(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function _p(e){if(!e)return Fn;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var s=e.type;if(vt(s))return _m(e,s,t)}return t}function Pp(e,t,s,r,a,l,o,i,c){return e=vc(s,r,!0,e,a,l,o,i,c),e.context=_p(null),s=e.current,r=mt(),a=Rn(s),l=mn(r,a),l.callback=t??null,_n(s,l,a),e.current.lanes=a,Wr(e,a,r),yt(e,r),e}function wl(e,t,s,r){var a=t.current,l=mt(),o=Rn(a);return s=_p(s),t.context===null?t.context=s:t.pendingContext=s,t=mn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_n(a,t,o),e!==null&&(Jt(e,a,o,l),Ta(e,a,o)),o}function il(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function yc(e,t){zd(e,t),(e=e.alternate)&&zd(e,t)}function sx(){return null}var Rp=typeof reportError=="function"?reportError:function(e){console.error(e)};function jc(e){this._internalRoot=e}Sl.prototype.render=jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));wl(e,t,null,null)};Sl.prototype.unmount=jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ls(function(){wl(null,e,null,null)}),t[hn]=null}};function Sl(e){this._internalRoot=e}Sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=dm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Nn.length&&t!==0&&t<Nn[s].priority;s++);Nn.splice(s,0,e),s===0&&mm(e)}};function bc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function rx(e,t,s,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=il(o);l.call(d)}}var o=Pp(t,r,e,0,null,!1,!1,"",Vd);return e._reactRootContainer=o,e[hn]=o.current,_r(e.nodeType===8?e.parentNode:e),ls(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var i=r;r=function(){var d=il(c);i.call(d)}}var c=vc(e,0,!1,null,null,!1,!1,"",Vd);return e._reactRootContainer=c,e[hn]=c.current,_r(e.nodeType===8?e.parentNode:e),ls(function(){wl(t,c,s,r)}),c}function kl(e,t,s,r,a){var l=s._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=il(o);i.call(c)}}wl(t,o,e,a)}else o=rx(s,t,e,a,r);return il(o)}im=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ur(t.pendingLanes);s!==0&&(zi(t,s|1),yt(t,He()),!(ke&6)&&(Os=He()+500,zn()))}break;case 13:ls(function(){var r=fn(e,1);if(r!==null){var a=mt();Jt(r,e,1,a)}}),yc(e,1)}};Vi=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var s=mt();Jt(t,e,134217728,s)}yc(e,134217728)}};cm=function(e){if(e.tag===13){var t=Rn(e),s=fn(e,t);if(s!==null){var r=mt();Jt(s,e,t,r)}yc(e,t)}};dm=function(){return _e};um=function(e,t){var s=_e;try{return _e=e,t()}finally{_e=s}};$o=function(e,t,s){switch(t){case"input":if(Po(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=gl(r);if(!a)throw Error(ee(90));Bu(r),Po(r,a)}}}break;case"textarea":Wu(e,s);break;case"select":t=s.value,t!=null&&ks(e,!!s.multiple,t,!1)}};Qu=hc;Xu=ls;var ax={usingClientEntryPoint:!1,Events:[qr,ys,gl,Yu,Gu,hc]},lr={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lx={bundleType:lr.bundleType,version:lr.version,rendererPackageName:lr.rendererPackageName,rendererConfig:lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tm(e),e===null?null:e.stateNode},findFiberByHostInstance:lr.findFiberByHostInstance||sx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{ml=ja.inject(lx),tn=ja}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ax;Dt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bc(t))throw Error(ee(200));return nx(e,t,null,s)};Dt.createRoot=function(e,t){if(!bc(e))throw Error(ee(299));var s=!1,r="",a=Rp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=vc(e,1,!1,null,null,s,!1,r,a),e[hn]=t.current,_r(e.nodeType===8?e.parentNode:e),new jc(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=tm(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return ls(e)};Dt.hydrate=function(e,t,s){if(!Cl(t))throw Error(ee(200));return kl(null,e,t,!0,s)};Dt.hydrateRoot=function(e,t,s){if(!bc(e))throw Error(ee(405));var r=s!=null&&s.hydratedSources||null,a=!1,l="",o=Rp;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=Pp(t,null,e,1,s??null,a,!1,l,o),e[hn]=t.current,_r(e),r)for(e=0;e<r.length;e++)s=r[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Sl(t)};Dt.render=function(e,t,s){if(!Cl(t))throw Error(ee(200));return kl(null,e,t,!1,s)};Dt.unmountComponentAtNode=function(e){if(!Cl(e))throw Error(ee(40));return e._reactRootContainer?(ls(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0):!1};Dt.unstable_batchedUpdates=hc;Dt.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Cl(s))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return kl(e,t,s,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Mp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mp)}catch(e){console.error(e)}}Mp(),Mu.exports=Dt;var ox=Mu.exports,Bd=ox;Co.createRoot=Bd.createRoot,Co.hydrateRoot=Bd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zr(){return zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},zr.apply(this,arguments)}var kn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(kn||(kn={}));const Ud="popstate";function ix(e){e===void 0&&(e={});function t(r,a){let{pathname:l,search:o,hash:i}=r.location;return vi("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:cl(a)}return dx(t,s,null,e)}function qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cx(){return Math.random().toString(36).substr(2,8)}function Wd(e,t){return{usr:e.state,key:e.key,idx:t}}function vi(e,t,s,r){return s===void 0&&(s=null),zr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Us(t):t,{state:s,key:t&&t.key||r||cx()})}function cl(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Us(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function dx(e,t,s,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,i=kn.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(zr({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function f(){i=kn.Pop;let v=m(),u=v==null?null:v-d;d=v,c&&c({action:i,location:j.location,delta:u})}function N(v,u){i=kn.Push;let p=vi(j.location,v,u);d=m()+1;let b=Wd(p,d),E=j.createHref(p);try{o.pushState(b,"",E)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(E)}l&&c&&c({action:i,location:j.location,delta:1})}function C(v,u){i=kn.Replace;let p=vi(j.location,v,u);d=m();let b=Wd(p,d),E=j.createHref(p);o.replaceState(b,"",E),l&&c&&c({action:i,location:j.location,delta:0})}function x(v){let u=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof v=="string"?v:cl(v);return p=p.replace(/ $/,"%20"),qe(u,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,u)}let j={get action(){return i},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Ud,f),c=v,()=>{a.removeEventListener(Ud,f),c=null}},createHref(v){return t(a,v)},createURL:x,encodeLocation(v){let u=x(v);return{pathname:u.pathname,search:u.search,hash:u.hash}},push:N,replace:C,go(v){return o.go(v)}};return j}var Hd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Hd||(Hd={}));function ux(e,t,s){return s===void 0&&(s="/"),mx(e,t,s)}function mx(e,t,s,r){let a=typeof t=="string"?Us(t):t,l=Nc(a.pathname||"/",s);if(l==null)return null;let o=Ip(e);px(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=Cx(l);i=Nx(o[c],d)}return i}function Ip(e,t,s,r){t===void 0&&(t=[]),s===void 0&&(s=[]),r===void 0&&(r="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ln([r,c.relativePath]),m=s.concat(c);l.children&&l.children.length>0&&(qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ip(l.children,t,m,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:jx(d,l.index),routesMeta:m})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of Fp(l.path))a(l,o,c)}),t}function Fp(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Fp(r.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function px(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:bx(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const hx=/^:[\w-]+$/,fx=3,gx=2,xx=1,vx=10,yx=-2,qd=e=>e==="*";function jx(e,t){let s=e.split("/"),r=s.length;return s.some(qd)&&(r+=yx),t&&(r+=gx),s.filter(a=>!qd(a)).reduce((a,l)=>a+(hx.test(l)?fx:l===""?xx:vx),r)}function bx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Nx(e,t,s){let{routesMeta:r}=e,a={},l="/",o=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,m=l==="/"?t:t.slice(l.length)||"/",f=wx({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),N=c.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Ln([l,f.pathname]),pathnameBase:Tx(Ln([l,f.pathnameBase])),route:N}),f.pathnameBase!=="/"&&(l=Ln([l,f.pathnameBase]))}return o}function wx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=Sx(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:r.reduce((d,m,f)=>{let{paramName:N,isOptional:C}=m;if(N==="*"){let j=i[f]||"";o=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const x=i[f];return C&&!x?d[N]=void 0:d[N]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Sx(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Lp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function Cx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}function kx(e,t){t===void 0&&(t="/");let{pathname:s,search:r="",hash:a=""}=typeof e=="string"?Us(e):e;return{pathname:s?s.startsWith("/")?s:Ex(s,t):t,search:Ax(r),hash:_x(a)}}function Ex(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function vo(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dx(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function wc(e,t){let s=Dx(e);return t?s.map((r,a)=>a===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function Sc(e,t,s,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Us(e):(a=zr({},e),qe(!a.pathname||!a.pathname.includes("?"),vo("?","pathname","search",a)),qe(!a.pathname||!a.pathname.includes("#"),vo("#","pathname","hash",a)),qe(!a.search||!a.search.includes("#"),vo("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=s;else{let f=t.length-1;if(!r&&o.startsWith("..")){let N=o.split("/");for(;N[0]==="..";)N.shift(),f-=1;a.pathname=N.join("/")}i=f>=0?t[f]:"/"}let c=kx(a,i),d=o&&o!=="/"&&o.endsWith("/"),m=(l||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Ln=e=>e.join("/").replace(/\/\/+/g,"/"),Tx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ax=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_x=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Px(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Op=["post","put","patch","delete"];new Set(Op);const Rx=["get",...Op];new Set(Rx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vr(){return Vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Vr.apply(this,arguments)}const Cc=h.createContext(null),Mx=h.createContext(null),Vn=h.createContext(null),El=h.createContext(null),Bn=h.createContext({outlet:null,matches:[],isDataRoute:!1}),$p=h.createContext(null);function Lx(e,t){let{relative:s}=t===void 0?{}:t;Ws()||qe(!1);let{basename:r,navigator:a}=h.useContext(Vn),{hash:l,pathname:o,search:i}=Vp(e,{relative:s}),c=o;return r!=="/"&&(c=o==="/"?r:Ln([r,o])),a.createHref({pathname:c,search:i,hash:l})}function Ws(){return h.useContext(El)!=null}function Un(){return Ws()||qe(!1),h.useContext(El).location}function zp(e){h.useContext(Vn).static||h.useLayoutEffect(e)}function Dl(){let{isDataRoute:e}=h.useContext(Bn);return e?Kx():Ix()}function Ix(){Ws()||qe(!1);let e=h.useContext(Cc),{basename:t,future:s,navigator:r}=h.useContext(Vn),{matches:a}=h.useContext(Bn),{pathname:l}=Un(),o=JSON.stringify(wc(a,s.v7_relativeSplatPath)),i=h.useRef(!1);return zp(()=>{i.current=!0}),h.useCallback(function(d,m){if(m===void 0&&(m={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let f=Sc(d,JSON.parse(o),l,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ln([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,o,l,e])}function Vp(e,t){let{relative:s}=t===void 0?{}:t,{future:r}=h.useContext(Vn),{matches:a}=h.useContext(Bn),{pathname:l}=Un(),o=JSON.stringify(wc(a,r.v7_relativeSplatPath));return h.useMemo(()=>Sc(e,JSON.parse(o),l,s==="path"),[e,o,l,s])}function Fx(e,t){return Ox(e,t)}function Ox(e,t,s,r){Ws()||qe(!1);let{navigator:a}=h.useContext(Vn),{matches:l}=h.useContext(Bn),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Un(),m;if(t){var f;let v=typeof t=="string"?Us(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||qe(!1),m=v}else m=d;let N=m.pathname||"/",C=N;if(c!=="/"){let v=c.replace(/^\//,"").split("/");C="/"+N.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=ux(e,{pathname:C}),j=Ux(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:Ln([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ln([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,s,r);return t&&j?h.createElement(El.Provider,{value:{location:Vr({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:kn.Pop}},j):j}function $x(){let e=Jx(),t=Px(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),s?h.createElement("pre",{style:a},s):null,null)}const zx=h.createElement($x,null);class Vx extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?h.createElement(Bn.Provider,{value:this.props.routeContext},h.createElement($p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bx(e){let{routeContext:t,match:s,children:r}=e,a=h.useContext(Cc);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),h.createElement(Bn.Provider,{value:t},r)}function Ux(e,t,s,r){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),r===void 0&&(r=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,i=(a=s)==null?void 0:a.errors;if(i!=null){let m=o.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);m>=0||qe(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(s&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let f=o[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:N,errors:C}=s,x=f.route.loader&&N[f.route.id]===void 0&&(!C||C[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,f,N)=>{let C,x=!1,j=null,v=null;s&&(C=i&&f.route.id?i[f.route.id]:void 0,j=f.route.errorElement||zx,c&&(d<0&&N===0?(Yx("route-fallback"),x=!0,v=null):d===N&&(x=!0,v=f.route.hydrateFallbackElement||null)));let u=t.concat(o.slice(0,N+1)),p=()=>{let b;return C?b=j:x?b=v:f.route.Component?b=h.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=m,h.createElement(Bx,{match:f,routeContext:{outlet:m,matches:u,isDataRoute:s!=null},children:b})};return s&&(f.route.ErrorBoundary||f.route.errorElement||N===0)?h.createElement(Vx,{location:s.location,revalidation:s.revalidation,component:j,error:C,children:p(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):p()},null)}var Bp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Bp||{}),Up=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Up||{});function Wx(e){let t=h.useContext(Cc);return t||qe(!1),t}function Hx(e){let t=h.useContext(Mx);return t||qe(!1),t}function qx(e){let t=h.useContext(Bn);return t||qe(!1),t}function Wp(e){let t=qx(),s=t.matches[t.matches.length-1];return s.route.id||qe(!1),s.route.id}function Jx(){var e;let t=h.useContext($p),s=Hx(),r=Wp();return t!==void 0?t:(e=s.errors)==null?void 0:e[r]}function Kx(){let{router:e}=Wx(Bp.UseNavigateStable),t=Wp(Up.UseNavigateStable),s=h.useRef(!1);return zp(()=>{s.current=!0}),h.useCallback(function(a,l){l===void 0&&(l={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Vr({fromRouteId:t},l)))},[e,t])}const Jd={};function Yx(e,t,s){Jd[e]||(Jd[e]=!0)}function Gx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function yi(e){let{to:t,replace:s,state:r,relative:a}=e;Ws()||qe(!1);let{future:l,static:o}=h.useContext(Vn),{matches:i}=h.useContext(Bn),{pathname:c}=Un(),d=Dl(),m=Sc(t,wc(i,l.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(m);return h.useEffect(()=>d(JSON.parse(f),{replace:s,state:r,relative:a}),[d,f,a,s,r]),null}function Ae(e){qe(!1)}function Qx(e){let{basename:t="/",children:s=null,location:r,navigationType:a=kn.Pop,navigator:l,static:o=!1,future:i}=e;Ws()&&qe(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:l,static:o,future:Vr({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof r=="string"&&(r=Us(r));let{pathname:m="/",search:f="",hash:N="",state:C=null,key:x="default"}=r,j=h.useMemo(()=>{let v=Nc(m,c);return v==null?null:{location:{pathname:v,search:f,hash:N,state:C,key:x},navigationType:a}},[c,m,f,N,C,x,a]);return j==null?null:h.createElement(Vn.Provider,{value:d},h.createElement(El.Provider,{children:s,value:j}))}function Hp(e){let{children:t,location:s}=e;return Fx(ji(t),s)}new Promise(()=>{});function ji(e,t){t===void 0&&(t=[]);let s=[];return h.Children.forEach(e,(r,a)=>{if(!h.isValidElement(r))return;let l=[...t,a];if(r.type===h.Fragment){s.push.apply(s,ji(r.props.children,l));return}r.type!==Ae&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ji(r.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},bi.apply(this,arguments)}function Xx(e,t){if(e==null)return{};var s={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function Zx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ev(e,t){return e.button===0&&(!t||t==="_self")&&!Zx(e)}const tv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nv="6";try{window.__reactRouterVersion=nv}catch{}const sv="startTransition",Kd=Yh[sv];function rv(e){let{basename:t,children:s,future:r,window:a}=e,l=h.useRef();l.current==null&&(l.current=ix({window:a,v5Compat:!0}));let o=l.current,[i,c]=h.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=h.useCallback(f=>{d&&Kd?Kd(()=>c(f)):c(f)},[c,d]);return h.useLayoutEffect(()=>o.listen(m),[o,m]),h.useEffect(()=>Gx(r),[r]),h.createElement(Qx,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:o,future:r})}const av=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qp=h.forwardRef(function(t,s){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:m,viewTransition:f}=t,N=Xx(t,tv),{basename:C}=h.useContext(Vn),x,j=!1;if(typeof d=="string"&&lv.test(d)&&(x=d,av))try{let b=new URL(window.location.href),E=d.startsWith("//")?new URL(b.protocol+d):new URL(d),D=Nc(E.pathname,C);E.origin===b.origin&&D!=null?d=D+E.search+E.hash:j=!0}catch{}let v=Lx(d,{relative:a}),u=ov(d,{replace:o,state:i,target:c,preventScrollReset:m,relative:a,viewTransition:f});function p(b){r&&r(b),b.defaultPrevented||u(b)}return h.createElement("a",bi({},N,{href:x||v,onClick:j||l?r:p,ref:s,target:c}))});var Yd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yd||(Yd={}));var Gd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Gd||(Gd={}));function ov(e,t){let{target:s,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=Dl(),d=Un(),m=Vp(e,{relative:o});return h.useCallback(f=>{if(ev(f,s)){f.preventDefault();let N=r!==void 0?r:cl(d)===cl(m);c(e,{replace:N,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,m,r,a,s,e,l,o,i])}const iv={lon:"https://boulangerie-planning-api-3.onrender.com/api"},Ot=()=>window.location.pathname.startsWith("/lon")?iv.lon:"https://boulangerie-planning-api-3.onrender.com/api",Tl=()=>window.location.pathname.startsWith("/lon")?"_lon":"_plan",Jp=()=>{const e=Tl();return localStorage.getItem(`token${e}`)||localStorage.getItem(`adminToken${e}`)||localStorage.getItem(`managerToken${e}`)||localStorage.getItem(`employeeToken${e}`)||localStorage.getItem("token")||localStorage.getItem("adminToken")||localStorage.getItem("managerToken")||localStorage.getItem("employeeToken")},cv=e=>{const t=Tl();localStorage.setItem(`token${t}`,e),localStorage.setItem(`adminToken${t}`,e)},dv=e=>{const t=Tl();localStorage.setItem(`token${t}`,e),localStorage.setItem(`employeeToken${t}`,e)},Kp=()=>{const e=Tl();["token","adminToken","managerToken","employeeToken"].forEach(t=>{localStorage.removeItem(`${t}${e}`),localStorage.removeItem(t)})},Yp=h.createContext(),Wn=()=>{const e=h.useContext(Yp);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},uv=({children:e})=>{const[t,s]=h.useState(null),[r,a]=h.useState(!0);h.useEffect(()=>{const f=localStorage.getItem("userRole");if(console.log(" Vrification utilisateur sauvegard:",f),f)try{const N=JSON.parse(f);console.log(" Utilisateur rcupr:",N),s(N)}catch(N){console.error(" Erreur lors du parsing des donnes utilisateur:",N),localStorage.removeItem("userRole")}else console.log(" Aucun utilisateur sauvegard");a(!1)},[]);const m={user:t,login:f=>{console.log(" Connexion utilisateur:",f),s(f),localStorage.setItem("userRole",JSON.stringify(f)),console.log(" Utilisateur connect et sauvegard")},logout:()=>{s(null),localStorage.removeItem("userRole"),Kp()},hasPermission:f=>t?t.permissions.includes("all")?!0:t.permissions.includes(f):!1,isAdmin:()=>t&&t.role==="admin",isEmployee:()=>t&&t.role==="employee",loading:r};return n.jsx(Yp.Provider,{value:m,children:e})};function Gp(e,t){return function(){return e.apply(t,arguments)}}const{toString:mv}=Object.prototype,{getPrototypeOf:kc}=Object,{iterator:Al,toStringTag:Qp}=Symbol,_l=(e=>t=>{const s=mv.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Yt=e=>(e=e.toLowerCase(),t=>_l(t)===e),Pl=e=>t=>typeof t===e,{isArray:Hs}=Array,$s=Pl("undefined");function Kr(e){return e!==null&&!$s(e)&&e.constructor!==null&&!$s(e.constructor)&&jt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xp=Yt("ArrayBuffer");function pv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Xp(e.buffer),t}const hv=Pl("string"),jt=Pl("function"),Zp=Pl("number"),Yr=e=>e!==null&&typeof e=="object",fv=e=>e===!0||e===!1,Ia=e=>{if(_l(e)!=="object")return!1;const t=kc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Qp in e)&&!(Al in e)},gv=e=>{if(!Yr(e)||Kr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},xv=Yt("Date"),vv=Yt("File"),yv=Yt("Blob"),jv=Yt("FileList"),bv=e=>Yr(e)&&jt(e.pipe),Nv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||jt(e.append)&&((t=_l(e))==="formdata"||t==="object"&&jt(e.toString)&&e.toString()==="[object FormData]"))},wv=Yt("URLSearchParams"),[Sv,Cv,kv,Ev]=["ReadableStream","Request","Response","Headers"].map(Yt),Dv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gr(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Hs(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if(Kr(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(r=0;r<o;r++)i=l[r],t.call(null,e[i],i,e)}}function eh(e,t){if(Kr(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,a;for(;r-- >0;)if(a=s[r],t===a.toLowerCase())return a;return null}const Xn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,th=e=>!$s(e)&&e!==Xn;function Ni(){const{caseless:e,skipUndefined:t}=th(this)&&this||{},s={},r=(a,l)=>{const o=e&&eh(s,l)||l;Ia(s[o])&&Ia(a)?s[o]=Ni(s[o],a):Ia(a)?s[o]=Ni({},a):Hs(a)?s[o]=a.slice():(!t||!$s(a))&&(s[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Gr(arguments[a],r);return s}const Tv=(e,t,s,{allOwnKeys:r}={})=>(Gr(t,(a,l)=>{s&&jt(a)?e[l]=Gp(a,s):e[l]=a},{allOwnKeys:r}),e),Av=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_v=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Pv=(e,t,s,r)=>{let a,l,o;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!r||r(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=s!==!1&&kc(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Rv=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},Mv=e=>{if(!e)return null;if(Hs(e))return e;let t=e.length;if(!Zp(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Lv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kc(Uint8Array)),Iv=(e,t)=>{const r=(e&&e[Al]).call(e);let a;for(;(a=r.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},Fv=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},Ov=Yt("HTMLFormElement"),$v=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,a){return r.toUpperCase()+a}),Qd=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),zv=Yt("RegExp"),nh=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};Gr(s,(a,l)=>{let o;(o=t(a,l,e))!==!1&&(r[l]=o||a)}),Object.defineProperties(e,r)},Vv=e=>{nh(e,(t,s)=>{if(jt(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(jt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Bv=(e,t)=>{const s={},r=a=>{a.forEach(l=>{s[l]=!0})};return Hs(e)?r(e):r(String(e).split(t)),s},Uv=()=>{},Wv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Hv(e){return!!(e&&jt(e.append)&&e[Qp]==="FormData"&&e[Al])}const qv=e=>{const t=new Array(10),s=(r,a)=>{if(Yr(r)){if(t.indexOf(r)>=0)return;if(Kr(r))return r;if(!("toJSON"in r)){t[a]=r;const l=Hs(r)?[]:{};return Gr(r,(o,i)=>{const c=s(o,a+1);!$s(c)&&(l[i]=c)}),t[a]=void 0,l}}return r};return s(e,0)},Jv=Yt("AsyncFunction"),Kv=e=>e&&(Yr(e)||jt(e))&&jt(e.then)&&jt(e.catch),sh=((e,t)=>e?setImmediate:t?((s,r)=>(Xn.addEventListener("message",({source:a,data:l})=>{a===Xn&&l===s&&r.length&&r.shift()()},!1),a=>{r.push(a),Xn.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",jt(Xn.postMessage)),Yv=typeof queueMicrotask<"u"?queueMicrotask.bind(Xn):typeof process<"u"&&process.nextTick||sh,Gv=e=>e!=null&&jt(e[Al]),H={isArray:Hs,isArrayBuffer:Xp,isBuffer:Kr,isFormData:Nv,isArrayBufferView:pv,isString:hv,isNumber:Zp,isBoolean:fv,isObject:Yr,isPlainObject:Ia,isEmptyObject:gv,isReadableStream:Sv,isRequest:Cv,isResponse:kv,isHeaders:Ev,isUndefined:$s,isDate:xv,isFile:vv,isBlob:yv,isRegExp:zv,isFunction:jt,isStream:bv,isURLSearchParams:wv,isTypedArray:Lv,isFileList:jv,forEach:Gr,merge:Ni,extend:Tv,trim:Dv,stripBOM:Av,inherits:_v,toFlatObject:Pv,kindOf:_l,kindOfTest:Yt,endsWith:Rv,toArray:Mv,forEachEntry:Iv,matchAll:Fv,isHTMLForm:Ov,hasOwnProperty:Qd,hasOwnProp:Qd,reduceDescriptors:nh,freezeMethods:Vv,toObjectSet:Bv,toCamelCase:$v,noop:Uv,toFiniteNumber:Wv,findKey:eh,global:Xn,isContextDefined:th,isSpecCompliantForm:Hv,toJSONObject:qv,isAsyncFn:Jv,isThenable:Kv,setImmediate:sh,asap:Yv,isIterable:Gv};function ye(e,t,s,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}H.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const rh=ye.prototype,ah={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ah[e]={value:e}});Object.defineProperties(ye,ah);Object.defineProperty(rh,"isAxiosError",{value:!0});ye.from=(e,t,s,r,a,l)=>{const o=Object.create(rh);H.toFlatObject(e,o,function(m){return m!==Error.prototype},d=>d!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ye.call(o,i,c,s,r,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",l&&Object.assign(o,l),o};const Qv=null;function wi(e){return H.isPlainObject(e)||H.isArray(e)}function lh(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function Xd(e,t,s){return e?e.concat(t).map(function(a,l){return a=lh(a),!s&&l?"["+a+"]":a}).join(s?".":""):t}function Xv(e){return H.isArray(e)&&!e.some(wi)}const Zv=H.toFlatObject(H,{},null,function(t){return/^is[A-Z]/.test(t)});function Rl(e,t,s){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=H.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,v){return!H.isUndefined(v[j])});const r=s.metaTokens,a=s.visitor||m,l=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(a))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(H.isDate(x))return x.toISOString();if(H.isBoolean(x))return x.toString();if(!c&&H.isBlob(x))throw new ye("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(x)||H.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function m(x,j,v){let u=x;if(x&&!v&&typeof x=="object"){if(H.endsWith(j,"{}"))j=r?j:j.slice(0,-2),x=JSON.stringify(x);else if(H.isArray(x)&&Xv(x)||(H.isFileList(x)||H.endsWith(j,"[]"))&&(u=H.toArray(x)))return j=lh(j),u.forEach(function(b,E){!(H.isUndefined(b)||b===null)&&t.append(o===!0?Xd([j],E,l):o===null?j:j+"[]",d(b))}),!1}return wi(x)?!0:(t.append(Xd(v,j,l),d(x)),!1)}const f=[],N=Object.assign(Zv,{defaultVisitor:m,convertValue:d,isVisitable:wi});function C(x,j){if(!H.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+j.join("."));f.push(x),H.forEach(x,function(u,p){(!(H.isUndefined(u)||u===null)&&a.call(t,u,H.isString(p)?p.trim():p,j,N))===!0&&C(u,j?j.concat(p):[p])}),f.pop()}}if(!H.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Zd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ec(e,t){this._pairs=[],e&&Rl(e,this,t)}const oh=Ec.prototype;oh.append=function(t,s){this._pairs.push([t,s])};oh.toString=function(t){const s=t?function(r){return t.call(this,r,Zd)}:Zd;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function ey(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ih(e,t,s){if(!t)return e;const r=s&&s.encode||ey;H.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let l;if(a?l=a(t,s):l=H.isURLSearchParams(t)?t.toString():new Ec(t,s).toString(r),l){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class eu{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){H.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ch={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ty=typeof URLSearchParams<"u"?URLSearchParams:Ec,ny=typeof FormData<"u"?FormData:null,sy=typeof Blob<"u"?Blob:null,ry={isBrowser:!0,classes:{URLSearchParams:ty,FormData:ny,Blob:sy},protocols:["http","https","file","blob","url","data"]},Dc=typeof window<"u"&&typeof document<"u",Si=typeof navigator=="object"&&navigator||void 0,ay=Dc&&(!Si||["ReactNative","NativeScript","NS"].indexOf(Si.product)<0),ly=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oy=Dc&&window.location.href||"http://localhost",iy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dc,hasStandardBrowserEnv:ay,hasStandardBrowserWebWorkerEnv:ly,navigator:Si,origin:oy},Symbol.toStringTag,{value:"Module"})),ot={...iy,...ry};function cy(e,t){return Rl(e,new ot.classes.URLSearchParams,{visitor:function(s,r,a,l){return ot.isNode&&H.isBuffer(s)?(this.append(r,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function dy(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function uy(e){const t={},s=Object.keys(e);let r;const a=s.length;let l;for(r=0;r<a;r++)l=s[r],t[l]=e[l];return t}function dh(e){function t(s,r,a,l){let o=s[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=s.length;return o=!o&&H.isArray(a)?a.length:o,c?(H.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!i):((!a[o]||!H.isObject(a[o]))&&(a[o]=[]),t(s,r,a[o],l)&&H.isArray(a[o])&&(a[o]=uy(a[o])),!i)}if(H.isFormData(e)&&H.isFunction(e.entries)){const s={};return H.forEachEntry(e,(r,a)=>{t(dy(r),a,s,0)}),s}return null}function my(e,t,s){if(H.isString(e))try{return(t||JSON.parse)(e),H.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const Qr={transitional:ch,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",a=r.indexOf("application/json")>-1,l=H.isObject(t);if(l&&H.isHTMLForm(t)&&(t=new FormData(t)),H.isFormData(t))return a?JSON.stringify(dh(t)):t;if(H.isArrayBuffer(t)||H.isBuffer(t)||H.isStream(t)||H.isFile(t)||H.isBlob(t)||H.isReadableStream(t))return t;if(H.isArrayBufferView(t))return t.buffer;if(H.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return cy(t,this.formSerializer).toString();if((i=H.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Rl(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),my(t)):t}],transformResponse:[function(t){const s=this.transitional||Qr.transitional,r=s&&s.forcedJSONParsing,a=this.responseType==="json";if(H.isResponse(t)||H.isReadableStream(t))return t;if(t&&H.isString(t)&&(r&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?ye.from(i,ye.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ot.classes.FormData,Blob:ot.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],e=>{Qr.headers[e]={}});const py=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hy=e=>{const t={};let s,r,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!s||t[s]&&py[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},tu=Symbol("internals");function or(e){return e&&String(e).trim().toLowerCase()}function Fa(e){return e===!1||e==null?e:H.isArray(e)?e.map(Fa):String(e)}function fy(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const gy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function yo(e,t,s,r,a){if(H.isFunction(r))return r.call(this,t,s);if(a&&(t=s),!!H.isString(t)){if(H.isString(r))return t.indexOf(r)!==-1;if(H.isRegExp(r))return r.test(t)}}function xy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function vy(e,t){const s=H.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(a,l,o){return this[r].call(this,t,a,l,o)},configurable:!0})})}let bt=class{constructor(t){t&&this.set(t)}set(t,s,r){const a=this;function l(i,c,d){const m=or(c);if(!m)throw new Error("header name must be a non-empty string");const f=H.findKey(a,m);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||c]=Fa(i))}const o=(i,c)=>H.forEach(i,(d,m)=>l(d,m,c));if(H.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(H.isString(t)&&(t=t.trim())&&!gy(t))o(hy(t),s);else if(H.isObject(t)&&H.isIterable(t)){let i={},c,d;for(const m of t){if(!H.isArray(m))throw TypeError("Object iterator must return a key-value pair");i[d=m[0]]=(c=i[d])?H.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(i,s)}else t!=null&&l(s,t,r);return this}get(t,s){if(t=or(t),t){const r=H.findKey(this,t);if(r){const a=this[r];if(!s)return a;if(s===!0)return fy(a);if(H.isFunction(s))return s.call(this,a,r);if(H.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=or(t),t){const r=H.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||yo(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let a=!1;function l(o){if(o=or(o),o){const i=H.findKey(r,o);i&&(!s||yo(r,r[i],i,s))&&(delete r[i],a=!0)}}return H.isArray(t)?t.forEach(l):l(t),a}clear(t){const s=Object.keys(this);let r=s.length,a=!1;for(;r--;){const l=s[r];(!t||yo(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const s=this,r={};return H.forEach(this,(a,l)=>{const o=H.findKey(r,l);if(o){s[o]=Fa(a),delete s[l];return}const i=t?xy(l):String(l).trim();i!==l&&delete s[l],s[i]=Fa(a),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return H.forEach(this,(r,a)=>{r!=null&&r!==!1&&(s[a]=t&&H.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[tu]=this[tu]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=or(o);r[i]||(vy(a,o),r[i]=!0)}return H.isArray(t)?t.forEach(l):l(t),this}};bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(bt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});H.freezeMethods(bt);function jo(e,t){const s=this||Qr,r=t||s,a=bt.from(r.headers);let l=r.data;return H.forEach(e,function(i){l=i.call(s,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function uh(e){return!!(e&&e.__CANCEL__)}function qs(e,t,s){ye.call(this,e??"canceled",ye.ERR_CANCELED,t,s),this.name="CanceledError"}H.inherits(qs,ye,{__CANCEL__:!0});function mh(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new ye("Request failed with status code "+s.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function yy(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function jy(e,t){e=e||10;const s=new Array(e),r=new Array(e);let a=0,l=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),m=r[l];o||(o=d),s[a]=c,r[a]=d;let f=l,N=0;for(;f!==a;)N+=s[f++],f=f%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-o<t)return;const C=m&&d-m;return C?Math.round(N*1e3/C):void 0}}function by(e,t){let s=0,r=1e3/t,a,l;const o=(d,m=Date.now())=>{s=m,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const m=Date.now(),f=m-s;f>=r?o(d,m):(a=d,l||(l=setTimeout(()=>{l=null,o(a)},r-f)))},()=>a&&o(a)]}const dl=(e,t,s=3)=>{let r=0;const a=jy(50,250);return by(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-r,d=a(c),m=o<=i;r=o;const f={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&m?(i-o)/d:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},s)},nu=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},su=e=>(...t)=>H.asap(()=>e(...t)),Ny=ot.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,ot.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(ot.origin),ot.navigator&&/(msie|trident)/i.test(ot.navigator.userAgent)):()=>!0,wy=ot.hasStandardBrowserEnv?{write(e,t,s,r,a,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];H.isNumber(s)&&i.push(`expires=${new Date(s).toUTCString()}`),H.isString(r)&&i.push(`path=${r}`),H.isString(a)&&i.push(`domain=${a}`),l===!0&&i.push("secure"),H.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Sy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Cy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ph(e,t,s){let r=!Sy(t);return e&&(r||s==!1)?Cy(e,t):t}const ru=e=>e instanceof bt?{...e}:e;function os(e,t){t=t||{};const s={};function r(d,m,f,N){return H.isPlainObject(d)&&H.isPlainObject(m)?H.merge.call({caseless:N},d,m):H.isPlainObject(m)?H.merge({},m):H.isArray(m)?m.slice():m}function a(d,m,f,N){if(H.isUndefined(m)){if(!H.isUndefined(d))return r(void 0,d,f,N)}else return r(d,m,f,N)}function l(d,m){if(!H.isUndefined(m))return r(void 0,m)}function o(d,m){if(H.isUndefined(m)){if(!H.isUndefined(d))return r(void 0,d)}else return r(void 0,m)}function i(d,m,f){if(f in t)return r(d,m);if(f in e)return r(void 0,d)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(d,m,f)=>a(ru(d),ru(m),f,!0)};return H.forEach(Object.keys({...e,...t}),function(m){const f=c[m]||a,N=f(e[m],t[m],m);H.isUndefined(N)&&f!==i||(s[m]=N)}),s}const hh=e=>{const t=os({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=t;if(t.headers=o=bt.from(o),t.url=ih(ph(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),H.isFormData(s)){if(ot.hasStandardBrowserEnv||ot.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(H.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,f])=>{d.includes(m.toLowerCase())&&o.set(m,f)})}}if(ot.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(t)),r||r!==!1&&Ny(t.url))){const c=a&&l&&wy.read(l);c&&o.set(a,c)}return t},ky=typeof XMLHttpRequest<"u",Ey=ky&&function(e){return new Promise(function(s,r){const a=hh(e);let l=a.data;const o=bt.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=a,m,f,N,C,x;function j(){C&&C(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function u(){if(!v)return;const b=bt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),D={data:!i||i==="text"||i==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:e,request:v};mh(function(R){s(R),j()},function(R){r(R),j()},D),v=null}"onloadend"in v?v.onloadend=u:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(u)},v.onabort=function(){v&&(r(new ye("Request aborted",ye.ECONNABORTED,e,v)),v=null)},v.onerror=function(E){const D=E&&E.message?E.message:"Network Error",F=new ye(D,ye.ERR_NETWORK,e,v);F.event=E||null,r(F),v=null},v.ontimeout=function(){let E=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const D=a.transitional||ch;a.timeoutErrorMessage&&(E=a.timeoutErrorMessage),r(new ye(E,D.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,e,v)),v=null},l===void 0&&o.setContentType(null),"setRequestHeader"in v&&H.forEach(o.toJSON(),function(E,D){v.setRequestHeader(D,E)}),H.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),i&&i!=="json"&&(v.responseType=a.responseType),d&&([N,x]=dl(d,!0),v.addEventListener("progress",N)),c&&v.upload&&([f,C]=dl(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",C)),(a.cancelToken||a.signal)&&(m=b=>{v&&(r(!b||b.type?new qs(null,e,v):b),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const p=yy(a.url);if(p&&ot.protocols.indexOf(p)===-1){r(new ye("Unsupported protocol "+p+":",ye.ERR_BAD_REQUEST,e));return}v.send(l||null)})},Dy=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,a;const l=function(d){if(!a){a=!0,i();const m=d instanceof Error?d:this.reason;r.abort(m instanceof ye?m:new qs(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,l(new ye(`timeout ${t} of ms exceeded`,ye.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=r;return c.unsubscribe=()=>H.asap(i),c}},Ty=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let r=0,a;for(;r<s;)a=r+t,yield e.slice(r,a),r=a},Ay=async function*(e,t){for await(const s of _y(e))yield*Ty(s,t)},_y=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},au=(e,t,s,r)=>{const a=Ay(e,t);let l=0,o,i=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await a.next();if(d){i(),c.close();return}let f=m.byteLength;if(s){let N=l+=f;s(N)}c.enqueue(new Uint8Array(m))}catch(d){throw i(d),d}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},lu=64*1024,{isFunction:ba}=H,Py=(({Request:e,Response:t})=>({Request:e,Response:t}))(H.global),{ReadableStream:ou,TextEncoder:iu}=H.global,cu=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Ry=e=>{e=H.merge.call({skipUndefined:!0},Py,e);const{fetch:t,Request:s,Response:r}=e,a=t?ba(t):typeof fetch=="function",l=ba(s),o=ba(r);if(!a)return!1;const i=a&&ba(ou),c=a&&(typeof iu=="function"?(x=>j=>x.encode(j))(new iu):async x=>new Uint8Array(await new s(x).arrayBuffer())),d=l&&i&&cu(()=>{let x=!1;const j=new s(ot.origin,{body:new ou,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!j}),m=o&&i&&cu(()=>H.isReadableStream(new r("").body)),f={stream:m&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(j,v)=>{let u=j&&j[x];if(u)return u.call(j);throw new ye(`Response type '${x}' is not supported`,ye.ERR_NOT_SUPPORT,v)})});const N=async x=>{if(x==null)return 0;if(H.isBlob(x))return x.size;if(H.isSpecCompliantForm(x))return(await new s(ot.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(H.isArrayBufferView(x)||H.isArrayBuffer(x))return x.byteLength;if(H.isURLSearchParams(x)&&(x=x+""),H.isString(x))return(await c(x)).byteLength},C=async(x,j)=>{const v=H.toFiniteNumber(x.getContentLength());return v??N(j)};return async x=>{let{url:j,method:v,data:u,signal:p,cancelToken:b,timeout:E,onDownloadProgress:D,onUploadProgress:F,responseType:R,headers:g,withCredentials:P="same-origin",fetchOptions:$}=hh(x),T=t||fetch;R=R?(R+"").toLowerCase():"text";let w=Dy([p,b&&b.toAbortSignal()],E),A=null;const S=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let V;try{if(F&&d&&v!=="get"&&v!=="head"&&(V=await C(g,u))!==0){let U=new s(j,{method:"POST",body:u,duplex:"half"}),W;if(H.isFormData(u)&&(W=U.headers.get("content-type"))&&g.setContentType(W),U.body){const[te,ae]=nu(V,dl(su(F)));u=au(U.body,lu,te,ae)}}H.isString(P)||(P=P?"include":"omit");const y=l&&"credentials"in s.prototype,z={...$,signal:w,method:v.toUpperCase(),headers:g.normalize().toJSON(),body:u,duplex:"half",credentials:y?P:void 0};A=l&&new s(j,z);let M=await(l?T(A,$):T(j,z));const I=m&&(R==="stream"||R==="response");if(m&&(D||I&&S)){const U={};["status","statusText","headers"].forEach(me=>{U[me]=M[me]});const W=H.toFiniteNumber(M.headers.get("content-length")),[te,ae]=D&&nu(W,dl(su(D),!0))||[];M=new r(au(M.body,lu,te,()=>{ae&&ae(),S&&S()}),U)}R=R||"text";let q=await f[H.findKey(f,R)||"text"](M,x);return!I&&S&&S(),await new Promise((U,W)=>{mh(U,W,{data:q,headers:bt.from(M.headers),status:M.status,statusText:M.statusText,config:x,request:A})})}catch(y){throw S&&S(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,x,A),{cause:y.cause||y}):ye.from(y,y&&y.code,x,A)}}},My=new Map,fh=e=>{let t=e&&e.env||{};const{fetch:s,Request:r,Response:a}=t,l=[r,a,s];let o=l.length,i=o,c,d,m=My;for(;i--;)c=l[i],d=m.get(c),d===void 0&&m.set(c,d=i?new Map:Ry(t)),m=d;return d};fh();const Tc={http:Qv,xhr:Ey,fetch:{get:fh}};H.forEach(Tc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const du=e=>`- ${e}`,Ly=e=>H.isFunction(e)||e===null||e===!1;function Iy(e,t){e=H.isArray(e)?e:[e];const{length:s}=e;let r,a;const l={};for(let o=0;o<s;o++){r=e[o];let i;if(a=r,!Ly(r)&&(a=Tc[(i=String(r)).toLowerCase()],a===void 0))throw new ye(`Unknown adapter '${i}'`);if(a&&(H.isFunction(a)||(a=a.get(t))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=s?o.length>1?`since :
`+o.map(du).join(`
`):" "+du(o[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a}const gh={getAdapter:Iy,adapters:Tc};function bo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qs(null,e)}function uu(e){return bo(e),e.headers=bt.from(e.headers),e.data=jo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),gh.getAdapter(e.adapter||Qr.adapter,e)(e).then(function(r){return bo(e),r.data=jo.call(e,e.transformResponse,r),r.headers=bt.from(r.headers),r},function(r){return uh(r)||(bo(e),r&&r.response&&(r.response.data=jo.call(e,e.transformResponse,r.response),r.response.headers=bt.from(r.response.headers))),Promise.reject(r)})}const xh="1.13.1",Ml={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ml[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const mu={};Ml.transitional=function(t,s,r){function a(l,o){return"[Axios v"+xh+"] Transitional option '"+l+"'"+o+(r?". "+r:"")}return(l,o,i)=>{if(t===!1)throw new ye(a(o," has been removed"+(s?" in "+s:"")),ye.ERR_DEPRECATED);return s&&!mu[o]&&(mu[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(l,o,i):!0}};Ml.spelling=function(t){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Fy(e,t,s){if(typeof e!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const l=r[a],o=t[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new ye("option "+l+" must be "+c,ye.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ye("Unknown option "+l,ye.ERR_BAD_OPTION)}}const Oa={assertOptions:Fy,validators:Ml},Xt=Oa.validators;let ts=class{constructor(t){this.defaults=t||{},this.interceptors={request:new eu,response:new eu}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=os(this.defaults,s);const{transitional:r,paramsSerializer:a,headers:l}=s;r!==void 0&&Oa.assertOptions(r,{silentJSONParsing:Xt.transitional(Xt.boolean),forcedJSONParsing:Xt.transitional(Xt.boolean),clarifyTimeoutError:Xt.transitional(Xt.boolean)},!1),a!=null&&(H.isFunction(a)?s.paramsSerializer={serialize:a}:Oa.assertOptions(a,{encode:Xt.function,serialize:Xt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Oa.assertOptions(s,{baseUrl:Xt.spelling("baseURL"),withXsrfToken:Xt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=l&&H.merge(l.common,l[s.method]);l&&H.forEach(["delete","get","head","post","put","patch","common"],x=>{delete l[x]}),s.headers=bt.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(s)===!1||(c=c&&j.synchronous,i.unshift(j.fulfilled,j.rejected))});const d=[];this.interceptors.response.forEach(function(j){d.push(j.fulfilled,j.rejected)});let m,f=0,N;if(!c){const x=[uu.bind(this),void 0];for(x.unshift(...i),x.push(...d),N=x.length,m=Promise.resolve(s);f<N;)m=m.then(x[f++],x[f++]);return m}N=i.length;let C=s;for(;f<N;){const x=i[f++],j=i[f++];try{C=x(C)}catch(v){j.call(this,v);break}}try{m=uu.call(this,C)}catch(x){return Promise.reject(x)}for(f=0,N=d.length;f<N;)m=m.then(d[f++],d[f++]);return m}getUri(t){t=os(this.defaults,t);const s=ph(t.baseURL,t.url,t.allowAbsoluteUrls);return ih(s,t.params,t.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(t){ts.prototype[t]=function(s,r){return this.request(os(r||{},{method:t,url:s,data:(r||{}).data}))}});H.forEach(["post","put","patch"],function(t){function s(r){return function(l,o,i){return this.request(os(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}ts.prototype[t]=s(),ts.prototype[t+"Form"]=s(!0)});let Oy=class vh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{r.subscribe(i),l=i}).then(a);return o.cancel=function(){r.unsubscribe(l)},o},t(function(l,o,i){r.reason||(r.reason=new qs(l,o,i),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new vh(function(a){t=a}),cancel:t}}};function $y(e){return function(s){return e.apply(null,s)}}function zy(e){return H.isObject(e)&&e.isAxiosError===!0}const Ci={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ci).forEach(([e,t])=>{Ci[t]=e});function yh(e){const t=new ts(e),s=Gp(ts.prototype.request,t);return H.extend(s,ts.prototype,t,{allOwnKeys:!0}),H.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return yh(os(e,a))},s}const je=yh(Qr);je.Axios=ts;je.CanceledError=qs;je.CancelToken=Oy;je.isCancel=uh;je.VERSION=xh;je.toFormData=Rl;je.AxiosError=ye;je.Cancel=je.CanceledError;je.all=function(t){return Promise.all(t)};je.spread=$y;je.isAxiosError=zy;je.mergeConfig=os;je.AxiosHeaders=bt;je.formToJSON=e=>dh(H.isHTMLForm(e)?new FormData(e):e);je.getAdapter=gh.getAdapter;je.HttpStatusCode=Ci;je.default=je;const{Axios:qj,AxiosError:Jj,CanceledError:Kj,isCancel:Yj,CancelToken:Gj,VERSION:Qj,all:Xj,Cancel:Zj,isAxiosError:e0,spread:t0,toFormData:n0,AxiosHeaders:s0,HttpStatusCode:r0,formToJSON:a0,getAdapter:l0,mergeConfig:o0}=je,Y=je.create({baseURL:Ot(),timeout:12e4,headers:{"Content-Type":"application/json"}});Y.interceptors.request.use(e=>{const t=Jp();return t?(e.headers.Authorization=`Bearer ${t}`,console.log(" Token ajout au header Authorization pour:",e.url)):console.warn(" Aucun token trouv dans localStorage pour:",e.url),e},e=>Promise.reject(e));Y.interceptors.response.use(e=>e,e=>{var t,s;if(e.code==="ECONNABORTED")console.warn(" Timeout API - Render en mode sleep, veuillez patienter...");else if(((t=e.response)==null?void 0:t.status)===401){const r=e.response.data,a=(r==null?void 0:r.error)||"Token invalide";console.warn(" 401:",a,"- redirection vers la page de connexion..."),Kp(),localStorage.removeItem("userRole");const l=window.location.pathname;let o="/login";l.startsWith("/lon")?o="/lon/login":l.startsWith("/plan")&&(o="/plan/login"),l!==o&&!l.endsWith("/login")&&(window.location.href=o)}else((s=e.response)==null?void 0:s.status)>=500?console.error("Erreur serveur:",e.response.data):e.response||console.warn(" Pas de rponse du serveur - Render peut tre en mode sleep");return Promise.reject(e)});const Vy=()=>{const{user:e,logout:t,isAdmin:s}=Wn(),[r,a]=h.useState(""),l=()=>{t()};return h.useEffect(()=>{(async()=>{try{const i=await Y.get("/site");i.data&&i.data.city&&a(i.data.city)}catch(i){console.error("Erreur lors du chargement du nom du site:",i)}})()},[]),n.jsx("header",{className:"header",children:n.jsxs("div",{className:"header-content",children:[n.jsx("div",{className:"header-left",children:n.jsxs("h1",{className:"header-title",children:["Planning Boulangerie ",r&&r]})}),n.jsx("div",{className:"header-right",children:e&&n.jsxs("div",{className:"user-info",children:[n.jsxs("div",{className:"user-details",children:[n.jsx("span",{className:"user-icon",children:s()?"":""}),n.jsx("span",{className:"user-name",children:e.name}),n.jsxs("span",{className:"user-role",children:["(",e.role==="admin"?"Administrateur":"Salari",")"]})]}),n.jsxs("button",{onClick:l,className:"logout-btn",title:"Se dconnecter",children:[n.jsx("span",{className:"logout-icon",children:""}),n.jsx("span",{className:"logout-text",children:"Dconnexion"})]})]})})]})})},By=()=>{const[e,t]=h.useState(!1),[s,r]=h.useState([]),a=Un(),{user:l,isAdmin:o,isEmployee:i}=Wn(),c=C=>C==="admin"?[{menuId:"dashboard",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"employees",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"constraints",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"planning",isVisibleToAdmin:!0,isVisibleToEmployee:!0},{menuId:"sales-stats",isVisibleToAdmin:!0,isVisibleToEmployee:!0},{menuId:"absences",isVisibleToAdmin:!0,isVisibleToEmployee:!0},{menuId:"meal-expenses",isVisibleToAdmin:!0,isVisibleToEmployee:!0},{menuId:"km-expenses",isVisibleToAdmin:!0,isVisibleToEmployee:!0},{menuId:"recup",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"primes",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"employee-status-print",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"parameters",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"sick-leave-management",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"mutuelle-management",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"vacation-management",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"ticket-restaurant",isVisibleToAdmin:!0,isVisibleToEmployee:!0},{menuId:"advance-requests",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"employee-dashboard",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"primes",isVisibleToAdmin:!0,isVisibleToEmployee:!1},{menuId:"ambassadeur",isVisibleToAdmin:!0,isVisibleToEmployee:!1}]:[{menuId:"dashboard",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"planning",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"sales-stats",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"absences",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"meal-expenses",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"km-expenses",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"recup",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"ticket-restaurant",isVisibleToAdmin:!1,isVisibleToEmployee:!0},{menuId:"ambassadeur",isVisibleToAdmin:!1,isVisibleToEmployee:!1}];h.useEffect(()=>{(async()=>{if(l)try{const x=Ot(),j=await fetch(`${x}/menu-permissions?role=${l.role}`),v=j.headers.get("content-type");if(!v||!v.includes("application/json")){console.warn(" API non disponible, utilisation des permissions par dfaut"),r(c(l.role));return}const u=await j.json();u.success?(r(u.menuPermissions),console.log(" Permissions de menu charges:",u.menuPermissions)):(console.warn(" Erreur API, utilisation des permissions par dfaut"),r(c(l.role)))}catch(x){console.error(" Erreur lors du chargement des permissions:",x),console.warn(" Utilisation des permissions par dfaut"),r(c(l.role))}})()},[l]);const d=[{path:"/dashboard",label:"Tableau de bord",icon:"",menuId:"dashboard"},{path:"/employees",label:"Gestion des employs",icon:"",menuId:"employees"},{path:"/constraints",label:"Contraintes hebdomadaires",icon:"",menuId:"constraints"},{path:"/planning",label:"Gnration du planning",icon:"",menuId:"planning"},{path:"/sales-stats",label:"Stats Vente",icon:"",menuId:"sales-stats"},{path:"/absences",label:"tat des absences",icon:"",menuId:"absences"},{path:"/meal-expenses",label:"Frais Repas",icon:"",menuId:"meal-expenses"},{path:"/km-expenses",label:"Frais KM",icon:"",menuId:"km-expenses"},{path:"/recup",label:"Heures de rcup",icon:"",menuId:"recup"},{path:"/primes",label:"Primes",icon:"",menuId:"primes"},{path:"/employee-status-print",label:"Imprimer tat",icon:"",menuId:"employee-status-print"},{path:"/parameters",label:"Paramtres",icon:"",menuId:"parameters"},{path:"/sick-leave-management",label:"Gestion des Arrts Maladie",icon:"",menuId:"sick-leave-management"},{path:"/mutuelle-management",label:"Gestion des Mutuelles",icon:"",menuId:"mutuelle-management"},{path:"/vacation-management",label:"Gestion des Congs",icon:"",menuId:"vacation-management"},{path:"/ticket-restaurant",label:"Ticket restaurant",icon:"",menuId:"ticket-restaurant"},{path:"/advance-requests",label:"Demandes d'Acompte",icon:"",menuId:"advance-requests"},{path:"/employee-dashboard",label:"Mes Documents",icon:"",menuId:"employee-dashboard"},{path:"/ambassadeur",label:"Ambassadeur",icon:"",menuId:"ambassadeur"}],m=()=>{if(!l)return console.log(" Pas d'utilisateur connect"),[];if(s.length===0)return console.log(" Permissions vides, utilisation des permissions par dfaut"),d.filter(x=>{const j=c(l.role).find(v=>v.menuId===x.menuId);return j?o()?j.isVisibleToAdmin:i()?j.isVisibleToEmployee:!1:!1});console.log(" Filtrage des menus pour:",l.role),console.log(" Permissions disponibles:",s),console.log(" isAdmin():",o()),console.log(" isEmployee():",i());const C=d.filter(x=>{const j=s.find(v=>v.menuId===x.menuId);if(console.log(` Menu ${x.menuId}:`,{permission:j,isAdmin:o(),isEmployee:i()}),!j)return console.log(` Pas de permission pour ${x.menuId}`),!1;if(o()){const v=j.isVisibleToAdmin;return console.log(` Admin - ${x.menuId}: ${v}`),v}else if(i()){const v=j.isVisibleToEmployee;return console.log(` Employee - ${x.menuId}: ${v}`),v}return!1});return console.log(" Menus filtrs:",C.map(x=>x.menuId)),C},f=()=>{t(!0)},N=()=>{t(!1)};return n.jsxs("div",{className:`sidebar ${e?"expanded":"collapsed"}`,onMouseEnter:f,onMouseLeave:N,children:[n.jsxs("div",{className:"sidebar-header",children:[n.jsx("div",{className:"logo-container",children:n.jsxs("div",{className:"filmara-logo-sidebar",children:[n.jsxs("div",{className:"logo-symbol",children:[n.jsx("div",{className:"orca-element"}),n.jsx("div",{className:"fox-element"})]}),n.jsx("div",{className:"logo-text",children:"FILMARA"})]})}),n.jsx("div",{className:"sidebar-title",children:"Boulangerie"})]}),n.jsx("nav",{className:"sidebar-nav",children:m().map(C=>n.jsxs(qp,{to:C.path,className:`nav-item ${a.pathname===C.path?"active":""}`,children:[n.jsx("span",{className:"nav-icon",children:C.icon}),n.jsx("span",{className:"nav-label",children:C.label})]},C.path))}),n.jsxs("div",{className:"sidebar-footer",children:[n.jsx("div",{className:"user-info",children:l&&n.jsxs("div",{className:"user-role",children:[n.jsx("span",{className:"user-icon",children:o()?"":""}),n.jsx("span",{className:"user-name",children:l.name})]})}),n.jsx("div",{className:"version-info",children:"v2.0"})]})]})},We=({children:e,requiredPermission:t=null,adminOnly:s=!1})=>{const{user:r,hasPermission:a,isAdmin:l,loading:o}=Wn(),i=Un();return o?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"1.2rem",color:"#666"},children:"Chargement..."}):r?s&&!l()?n.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",padding:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:""}),n.jsx("h2",{style:{color:"#e74c3c",marginBottom:"10px"},children:"Accs refus"}),n.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Cette page est rserve aux administrateurs."}),n.jsx("button",{onClick:()=>window.history.back(),style:{padding:"10px 20px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"1rem"},children:"Retour"})]}):t&&!a(t)?n.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",padding:"20px",textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:""}),n.jsx("h2",{style:{color:"#e74c3c",marginBottom:"10px"},children:"Permission insuffisante"}),n.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"Vous n'avez pas les permissions ncessaires pour accder  cette page."}),n.jsx("button",{onClick:()=>window.history.back(),style:{padding:"10px 20px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"1rem"},children:"Retour"})]}):e:n.jsx(yi,{to:"/login",state:{from:i},replace:!0})},No=Ot(),jh=()=>{const[e,t]=h.useState(""),[s,r]=h.useState(""),[a,l]=h.useState(!1),[o,i]=h.useState(!0),[c,d]=h.useState(!1),m=Dl(),{login:f}=Wn();h.useEffect(()=>{(async()=>{const p=window.location.pathname;if(!(!p.startsWith("/lon")&&!p.startsWith("/plan")))try{const E=await(await fetch(`${No}/parameters/maintenance`)).json();l(E.maintenance===!0)}catch{l(!1)}finally{i(!1)}})()},[]);const N=async()=>{if(e!=="admin2024"){r("Mot de passe administrateur incorrect");return}try{const p=await(await fetch(`${No}/auth/admin-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();p.success&&p.token?(cv(p.token),f({role:"admin",name:"Administrateur",permissions:["all"]}),m("/")):r(p.error||"Erreur lors de la connexion")}catch(u){console.error("Erreur lors de la connexion:",u),r("Erreur de connexion au serveur")}},C=async()=>{try{const p=await(await fetch(`${No}/auth/employee-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})})).json();if(p.success&&p.token){dv(p.token);const b={role:p.user.role,name:p.user.name,permissions:p.user.permissions||["view_planning","view_absences","view_sales_stats","view_meal_expenses","view_km_expenses"]};f(b),m("/")}else r(p.error||"Erreur lors de la connexion")}catch(u){console.error("Erreur lors de la connexion:",u),r("Erreur de connexion au serveur")}},x=(u,p)=>{u.key==="Enter"&&p()},j=window.location.pathname.startsWith("/lon")||window.location.pathname.startsWith("/plan"),v=j&&a&&!c;return j&&o?n.jsx("div",{className:"login-container",children:n.jsx("div",{className:"login-card",children:n.jsx("div",{className:"loading-maintenance",children:n.jsx("p",{children:"Chargement..."})})})}):v?n.jsx("div",{className:"login-container",children:n.jsxs("div",{className:"login-card maintenance-card",children:[n.jsx("div",{className:"logo-section",children:n.jsxs("div",{className:"logo",children:[n.jsxs("div",{className:"logo-animals",children:[n.jsx("div",{className:"orca"}),n.jsx("div",{className:"fox"})]}),n.jsx("h1",{className:"logo-text",children:"FILMARA"}),n.jsx("p",{className:"logo-subtitle",children:"HOLDING COMPANY  & TWO BAKERS"})]})}),n.jsxs("div",{className:"maintenance-message",children:[n.jsx("h2",{children:" Site en maintenance"}),n.jsx("p",{children:"Le site est temporairement indisponible."}),n.jsx("p",{children:n.jsx("strong",{children:"Retour  la normale rapidement."})}),n.jsx("p",{className:"maintenance-sub",children:"Merci de votre comprhension."}),n.jsx("button",{type:"button",className:"admin-access-link",onClick:()=>d(!0),children:"Accs administrateur"})]})]})}):n.jsx("div",{className:"login-container",children:n.jsxs("div",{className:"login-card",children:[n.jsx("div",{className:"logo-section",children:n.jsxs("div",{className:"logo",children:[n.jsxs("div",{className:"logo-animals",children:[n.jsx("div",{className:"orca"}),n.jsx("div",{className:"fox"})]}),n.jsx("h1",{className:"logo-text",children:"FILMARA"}),n.jsx("p",{className:"logo-subtitle",children:"HOLDING COMPANY  & TWO BAKERS"})]})}),n.jsxs("div",{className:"login-section",children:[n.jsx("h2",{children:"Connexion au Planning"}),n.jsx("div",{className:"password-input",children:n.jsx("input",{type:"password",placeholder:"Mot de passe",value:e,onChange:u=>t(u.target.value),onKeyPress:u=>x(u,N),className:"password-field"})}),s&&n.jsx("div",{className:"error-message",children:s}),n.jsxs("div",{className:"login-buttons",children:[n.jsxs("button",{onClick:N,className:"login-btn admin-btn",disabled:!e,children:[n.jsx("span",{className:"btn-icon",children:""}),"Administrateur"]}),n.jsxs("button",{onClick:C,className:"login-btn employee-btn",disabled:!e,children:[n.jsx("span",{className:"btn-icon",children:""}),"Salari"]})]}),n.jsxs("div",{className:"login-info",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Administrateur :"})," Accs complet  toutes les fonctionnalits"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Salari :"})," Accs limit aux fonctions de consultation et saisie"]})]})]})]})})};function Uy(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}Uy(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Ac=e=>typeof e=="number"&&!isNaN(e),Br=e=>typeof e=="string",bh=e=>typeof e=="function",Wy=e=>Br(e)||Ac(e),Hy=e=>h.isValidElement(e)||Br(e)||bh(e)||Ac(e),qy=1,Nh=()=>`${qy++}`,sn=new Map,ki=[],pu=new Set,wh=()=>sn.size>0,Jy=(e,{containerId:t})=>{var s;return(s=sn.get(t||1))==null?void 0:s.toasts.get(e)};function Ky(e,t){var s;if(t)return!!((s=sn.get(t))!=null&&s.isToastActive(e));let r=!1;return sn.forEach(a=>{a.isToastActive(e)&&(r=!0)}),r}function Yy(e){if(!wh()){ki=ki.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Wy(e))sn.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=sn.get(e.containerId);t?t.removeToast(e.id):sn.forEach(s=>{s.removeToast(e.id)})}}var Gy=(e={})=>{sn.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Qy(e,t){Hy(e)&&(wh()||ki.push({content:e,options:t}),sn.forEach(s=>{s.buildToast(e,t)}))}function Sh(e,t){sn.forEach(s=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===s.id)&&s.toggle(e,t==null?void 0:t.id)})}function Xy(e){return pu.add(e),()=>{pu.delete(e)}}function Zy(e){return e&&(Br(e.toastId)||Ac(e.toastId))?e.toastId:Nh()}function Xr(e,t){return Qy(e,t),t.toastId}function Ll(e,t){return{...t,type:t&&t.type||e,toastId:Zy(t)}}function Il(e){return(t,s)=>Xr(t,Ll(e,s))}function O(e,t){return Xr(e,Ll("default",t))}O.loading=(e,t)=>Xr(e,Ll("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function ej(e,{pending:t,error:s,success:r},a){let l;t&&(l=Br(t)?O.loading(t,a):O.loading(t.render,{...a,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(d,m,f)=>{if(m==null){O.dismiss(l);return}let N={type:d,...o,...a,data:f},C=Br(m)?{render:m}:m;return l?O.update(l,{...N,...C}):O(C.render,{...N,...C}),f},c=bh(e)?e():e;return c.then(d=>i("success",r,d)).catch(d=>i("error",s,d)),c}O.promise=ej;O.success=Il("success");O.info=Il("info");O.error=Il("error");O.warning=Il("warning");O.warn=O.warning;O.dark=(e,t)=>Xr(e,Ll("default",{theme:"dark",...t}));function tj(e){Yy(e)}O.dismiss=tj;O.clearWaitingQueue=Gy;O.isActive=Ky;O.update=(e,t={})=>{let s=Jy(e,t);if(s){let{props:r,content:a}=s,l={delay:100,...r,...t,toastId:t.toastId||e,updateId:Nh()};l.toastId!==e&&(l.staleId=e);let o=l.render||a;delete l.render,Xr(o,l)}};O.done=e=>{O.update(e,{progress:1})};O.onChange=Xy;O.play=e=>Sh(!0,e);O.pause=e=>Sh(!1,e);const hu=e=>e?typeof e=="string"?e:typeof e=="object"&&(e._id||e.id)||"":"",nj=({employee:e,onSave:t,onClose:s,employees:r=[]})=>{const[a,l]=h.useState({name:"",contractType:"CDI",age:"",birthDate:"",skills:[],role:"vendeuse",weeklyHours:35,trainingDays:[],contractEndDate:"",tutor:"",email:"",saleCode:"",mutuelle:"Oui Entreprise",isActive:!0,emergencyContact:{lastName:"",firstName:"",phone:"",email:""}});h.useEffect(()=>{e&&l({name:e.name||"",contractType:e.contractType||"CDI",age:e.age||"",birthDate:e.birthDate?new Date(e.birthDate).toISOString().split("T")[0]:"",skills:e.skills||[],role:e.role||"vendeuse",weeklyHours:e.weeklyHours||35,trainingDays:Array.isArray(e.trainingDays)?e.trainingDays:[],contractEndDate:e.contractEndDate?new Date(e.contractEndDate).toISOString().split("T")[0]:"",tutor:hu(e.tutor),email:e.email||"",saleCode:e.saleCode||"",mutuelle:e.mutuelle||"Oui Entreprise",isActive:e.isActive!==void 0?e.isActive:!0,emergencyContact:e.emergencyContact||{lastName:"",firstName:"",phone:"",email:""}})},[e]);const o=x=>{const{name:j,value:v,type:u,checked:p}=x.target;if(j.startsWith("emergencyContact.")){const b=j.split(".")[1];l(E=>({...E,emergencyContact:{...E.emergencyContact,[b]:v}}))}else l(b=>({...b,...j==="contractType"&&v!=="Apprentissage"?{tutor:"",trainingDays:[],contractEndDate:""}:{},[j]:u==="checkbox"?p:v}))},i=x=>{l(j=>({...j,skills:j.skills.includes(x)?j.skills.filter(v=>v!==x):[...j.skills,x]}))},c=x=>{l(j=>({...j,trainingDays:j.trainingDays.includes(x)?j.trainingDays.filter(v=>v!==x):[...j.trainingDays,x]}))},d=async()=>{if(!e||!e.email){alert(" Aucun email configur pour cet employ");return}const x=` Envoyer les informations de connexion  ${e.email} ?

- Email: ${e.email}
- URL de connexion: https://www.filmara.fr/salarie-connexion
- Mot de passe: [Gnr automatiquement]

Confirmer l'envoi ?`;if(window.confirm(x))try{console.log(" Envoi du mot de passe via backend API pour:",e.name,e.email);const j=await fetch(`${Ot()}/auth/send-password/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!j.ok){const u=await j.json();throw new Error(u.error||"Erreur backend")}const v=await j.json();console.log(" Mot de passe sauvegard et email envoy via backend (Modal)"),alert(` Mot de passe envoy avec succs  ${e.email}`),console.log(" Mot de passe envoy via backend API (Modal)")}catch(j){console.error(" Erreur envoi mot de passe:",j),alert(` Erreur lors de l'envoi: ${j.message}`)}},m=x=>{if(x.preventDefault(),console.log(" Donnes du formulaire avant validation:",a),!a.name.trim()){alert("Le nom est obligatoire");return}if(!a.age){alert("L'ge est obligatoire");return}if(a.age<16||a.age>65){alert("L'ge doit tre entre 16 et 65 ans");return}if(a.weeklyHours<20||a.weeklyHours>39){alert("Le volume hebdomadaire doit tre entre 20 et 39 heures");return}if(a.contractType==="Apprentissage"){if(a.trainingDays.length===0){alert("Les apprentis doivent avoir au moins un jour de formation");return}if(!a.contractEndDate){alert("Les apprentis doivent avoir une date de fin de contrat");return}}const j=a.contractType==="Apprentissage"?hu(a.tutor):"",v={...a,age:parseInt(a.age),weeklyHours:parseInt(a.weeklyHours),contractEndDate:a.contractEndDate||void 0,birthDate:a.birthDate||void 0,tutor:a.contractType==="Apprentissage"&&j||void 0,email:a.email||void 0};console.log(" Donnes prpares pour l'envoi:",v),t(v)},f=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],N=["Ouverture","Fermeture","Management"],C=[{value:"vendeuse",label:"Vendeuse"},{value:"responsable",label:"Responsable"},{value:"manager",label:"Manager"},{value:"Apprenti Vendeuse",label:"Apprenti Vendeuse"},{value:"chef prod",label:"Chef Prod"},{value:"boulanger",label:"Boulanger"},{value:"prparateur",label:"Prparateur"},{value:"Apprenti Boulanger",label:"Apprenti Boulanger"},{value:"Apprenti Prparateur",label:"Apprenti Prparateur"}];return n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[n.jsx("h2",{style:{margin:0,color:"#333"},children:e?" Modifier l'employ":" Ajouter un employ"}),n.jsx("button",{onClick:s,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0.5rem"},children:""})]}),n.jsxs("div",{children:[n.jsxs("form",{onSubmit:m,className:"declaration-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Nom complet *"}),n.jsx("input",{type:"text",name:"name",value:a.name,onChange:o,className:"form-control",required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Contrat *"}),n.jsxs("select",{name:"contractType",value:a.contractType,onChange:o,className:"form-control",required:!0,children:[n.jsx("option",{value:"CDI",children:"CDI"}),n.jsx("option",{value:"Apprentissage",children:"Contrat d'apprentissage"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"ge *"}),n.jsx("input",{type:"number",name:"age",value:a.age,onChange:o,className:"form-control",min:"16",max:"65",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:a.email,onChange:o,className:"form-control",placeholder:"exemple@email.com"}),n.jsx("small",{className:"form-text",children:"Email pour l'envoi des identifiants de connexion"})]})]}),a.age&&a.age!==""&&!isNaN(parseInt(a.age))&&parseInt(a.age)<18&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date de naissance *"}),n.jsx("input",{type:"date",name:"birthDate",value:a.birthDate,onChange:o,className:"form-control",required:!0,max:new Date().toISOString().split("T")[0]}),n.jsx("small",{className:"form-text",style:{color:"#666",marginTop:"5px"},children:"Ncessaire pour calculer prcisment le nombre de jours avant les 18 ans"})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Rle *"}),n.jsx("select",{name:"role",value:a.role,onChange:o,className:"form-control",required:!0,children:C.map(x=>n.jsx("option",{value:x.value,children:x.label},x.value))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Volume hebdomadaire (h) *"}),n.jsx("input",{type:"number",name:"weeklyHours",value:a.weeklyHours,onChange:o,className:"form-control",min:"20",max:"39",required:!0})]})]}),(()=>{var u;const x=["vendeuse","apprenti","manager","responsable","Apprenti Vendeuse"],j=(u=a.role)==null?void 0:u.toLowerCase();return x.some(p=>p.toLowerCase()===j)?n.jsxs("div",{style:{marginTop:"1.5rem",padding:"1.25rem",border:"1px solid #e1e5e9",borderRadius:"10px",backgroundColor:"#f8f9fa"},children:[n.jsx("h3",{style:{marginBottom:"1rem",color:"#333",fontSize:"1.05rem"},children:" Code Vente (saisie quotidienne)"}),n.jsxs("div",{className:"form-group",style:{maxWidth:"320px"},children:[n.jsxs("label",{className:"form-label",children:[n.jsx("strong",{children:"Code Vente (3 chiffres)"}),!a.saleCode&&n.jsx("span",{style:{color:"#ffc107",marginLeft:"10px",fontSize:"0.85rem"},children:"(sera gnr automatiquement  la cration)"})]}),n.jsx("input",{type:"text",name:"saleCode",value:a.saleCode||"",onChange:p=>{const b=p.target.value.replace(/\D/g,"").slice(0,3);l(E=>({...E,saleCode:b}))},className:"form-control",placeholder:a.saleCode?a.saleCode:"Ex : 123",pattern:"[0-9]{3}",maxLength:"3",style:{backgroundColor:a.saleCode?"#fff":"#fef9e7",border:a.saleCode?"2px solid #28a745":"2px dashed #ffd966"}}),n.jsx("small",{className:"form-text",style:{color:"#666",marginTop:"5px"},children:"Ce code permet  la vendeuse de s'identifier sur la page de saisie quotidienne."})]})]}):null})(),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Comptences"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:N.map(x=>n.jsxs("label",{style:{display:"flex",alignItems:"center",marginRight:"1rem"},children:[n.jsx("input",{type:"checkbox",checked:a.skills.includes(x),onChange:()=>i(x),style:{marginRight:"0.5rem"}}),x]},x))})]}),a.contractType==="Apprentissage"&&n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Tuteur *"}),n.jsxs("select",{name:"tutor",value:a.tutor,onChange:o,className:"form-control",required:!0,children:[n.jsx("option",{value:"",children:"Slectionner un tuteur"}),r.filter(x=>x._id!==(e==null?void 0:e._id)&&x.isActive).map(x=>n.jsxs("option",{value:x._id,children:[x.name," - ",x.role]},x._id))]})]}),a.contractType==="Apprentissage"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Jours de formation *"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:f.map(x=>n.jsxs("label",{style:{display:"flex",alignItems:"center",marginRight:"1rem"},children:[n.jsx("input",{type:"checkbox",checked:a.trainingDays.includes(x),onChange:()=>c(x),style:{marginRight:"0.5rem"}}),x]},x))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Fin du contrat d'apprentissage *"}),n.jsx("input",{type:"date",name:"contractEndDate",value:a.contractEndDate,onChange:o,className:"form-control",required:!0})]})]}),n.jsxs("div",{className:"form-group",style:{marginTop:"1.5rem"},children:[n.jsx("label",{className:"form-label",children:"Mutuelle *"}),n.jsxs("select",{name:"mutuelle",value:a.mutuelle,onChange:o,className:"form-control",required:!0,children:[n.jsx("option",{value:"Oui Entreprise",children:"Oui Entreprise"}),n.jsx("option",{value:"Non Perso",children:"Non Perso"})]}),n.jsx("small",{className:"form-text",children:"Choisissez si l'employ a la mutuelle entreprise ou une mutuelle personnelle"})]}),n.jsxs("div",{style:{marginTop:"2rem",paddingTop:"1.5rem",borderTop:"2px solid #e0e0e0"},children:[n.jsx("h3",{style:{marginBottom:"1rem",color:"#333",fontSize:"1.1rem"},children:" Personne  Contacter en Cas d'Urgence"}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Nom"}),n.jsx("input",{type:"text",name:"emergencyContact.lastName",value:a.emergencyContact.lastName,onChange:o,className:"form-control",placeholder:"Nom de la personne"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Prnom"}),n.jsx("input",{type:"text",name:"emergencyContact.firstName",value:a.emergencyContact.firstName,onChange:o,className:"form-control",placeholder:"Prnom de la personne"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Numro de tlphone"}),n.jsx("input",{type:"tel",name:"emergencyContact.phone",value:a.emergencyContact.phone,onChange:o,className:"form-control",placeholder:"06 12 34 56 78"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Email"}),n.jsx("input",{type:"email",name:"emergencyContact.email",value:a.emergencyContact.email,onChange:o,className:"form-control",placeholder:"contact@exemple.com"})]})]})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:s,children:"Annuler"}),e&&n.jsx("button",{type:"button",className:"btn btn-info",onClick:d,title:"Envoyer les informations de connexion par email",children:" Envoyer mot de passe"}),n.jsx("button",{type:"submit",className:"btn btn-primary",onClick:m,children:e?"Modifier l'employ":"Ajouter l'employ"})]})]})]})},Ch=({show:e,onClose:t,onSave:s,employees:r})=>{const[a,l]=h.useState("maladie"),[o,i]=h.useState(""),[c,d]=h.useState(""),[m,f]=h.useState(""),[N,C]=h.useState(""),[x,j]=h.useState(null),[v,u]=h.useState(!1),p=async E=>{if(E.preventDefault(),!o||!c||!m){alert("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await s({type:a,employeeId:o,startDate:c,endDate:m,reason:N||(a==="maladie"?"Arrt maladie":"Absence"),file:x}),i(""),d(""),f(""),C(""),j(null),t()}catch(D){console.error("Erreur lors de la sauvegarde:",D)}finally{u(!1)}},b=E=>{const D=E.target.files[0];if(D){if(!["image/jpeg","image/jpg","application/pdf"].includes(D.type)){alert("Type de fichier non support. Seuls JPG et PDF sont accepts."),E.target.value="";return}if(D.size>10*1024*1024){alert("Le fichier est trop volumineux. Taille maximale : 10MB"),E.target.value="";return}j(D)}};return e?n.jsx("div",{className:"modal show",onClick:t,children:n.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{className:"modal-title",children:a==="maladie"?" Dclarer un arrt maladie":" Dclarer une absence"}),n.jsx("button",{className:"modal-close",onClick:t,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"close-icon",children:n.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:p,className:"declaration-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Type de dclaration"}),n.jsxs("div",{className:"type-selector",children:[n.jsxs("button",{type:"button",className:`type-option ${a==="maladie"?"active":""}`,onClick:()=>l("maladie"),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"type-icon",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"Arrt maladie"]}),n.jsxs("button",{type:"button",className:`type-option ${a==="absence"?"active":""}`,onClick:()=>l("absence"),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"type-icon",children:n.jsx("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"})}),"Absence"]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Employ *"}),n.jsxs("select",{className:"form-control",value:o,onChange:E=>i(E.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Slectionner un employ"}),r.map(E=>n.jsxs("option",{value:E._id,children:[E.name," - ",E.role]},E._id))]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date de dbut *"}),n.jsx("input",{type:"date",className:"form-control",value:c,onChange:E=>d(E.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date de fin *"}),n.jsx("input",{type:"date",className:"form-control",value:m,onChange:E=>f(E.target.value),required:!0,min:c})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Raison (optionnel)"}),n.jsx("textarea",{className:"form-control",value:N,onChange:E=>C(E.target.value),placeholder:`Dtails sur ${a==="maladie"?"l'arrt maladie":"l'absence"}...`,rows:"3"})]}),a==="maladie"&&n.jsxs("div",{className:"form-group",children:[n.jsxs("label",{className:"form-label",children:["Certificat mdical (optionnel)",n.jsx("span",{style:{fontSize:"0.85em",color:"#666",marginLeft:"8px"},children:"JPG ou PDF, max 10MB"})]}),n.jsx("input",{type:"file",className:"form-control",accept:".jpg,.jpeg,.pdf,image/jpeg,image/jpg,application/pdf",onChange:b}),x&&n.jsxs("div",{style:{marginTop:"8px",fontSize:"0.9em",color:"#28a745"},children:[" Fichier slectionn : ",x.name," (",(x.size/1024/1024).toFixed(2)," MB)"]})]}),n.jsxs("div",{className:"info-box",children:[n.jsx("div",{className:"info-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),n.jsxs("div",{className:"info-content",children:[n.jsx("h4",{children:"Informations importantes"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Les dates sont inclusives"}),n.jsx("li",{children:"L'employ sera automatiquement marqu comme indisponible"}),n.jsx("li",{children:"Le planning sera mis  jour en consquence"})]})]})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:v,children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn btn-primary",onClick:p,disabled:v,children:v?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"loading-spinner",viewBox:"0 0 24 24",children:n.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"})}),"Enregistrement..."]}):`Dclarer ${a==="maladie"?"l'arrt maladie":"l'absence"}`})]})]})}):null},kh=({show:e,onClose:t,onSave:s,employees:r})=>{const[a,l]=h.useState(""),[o,i]=h.useState(""),[c,d]=h.useState(""),[m,f]=h.useState(""),[N,C]=h.useState(!1),x=async j=>{if(j.preventDefault(),!a||!o||!c){alert("Veuillez remplir tous les champs obligatoires");return}if(parseInt(c)<1){alert("La dure du retard doit tre d'au moins 1 minute");return}C(!0);try{await s({employeeId:a,date:o,duration:parseInt(c),reason:m||""}),l(""),i(""),d(""),f(""),t()}catch(v){console.error("Erreur lors de la sauvegarde:",v)}finally{C(!1)}};return e?n.jsx("div",{className:"modal show",onClick:t,children:n.jsxs("div",{className:"modal-content",onClick:j=>j.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{className:"modal-title",children:" Dclarer un retard"}),n.jsx("button",{className:"modal-close",onClick:t,children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"close-icon",children:n.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("form",{onSubmit:x,className:"delay-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Employ *"}),n.jsxs("select",{className:"form-control",value:a,onChange:j=>l(j.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Slectionner un employ"}),r.map(j=>n.jsxs("option",{value:j._id,children:[j.name," - ",j.role]},j._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Date du retard *"}),n.jsx("input",{type:"date",className:"form-control",value:o,onChange:j=>i(j.target.value),required:!0,max:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Dure du retard (minutes) *"}),n.jsxs("div",{className:"duration-input",children:[n.jsx("input",{type:"number",className:"form-control",value:c,onChange:j=>d(j.target.value),placeholder:"Ex: 15",min:"1",max:"480",required:!0}),n.jsx("span",{className:"duration-unit",children:"minutes"})]}),n.jsx("div",{className:"duration-help",children:n.jsx("small",{children:"Dure en minutes (ex: 15 pour 15 minutes, 90 pour 1h30)"})})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Raison du retard (optionnel)"}),n.jsx("textarea",{className:"form-control",value:m,onChange:j=>f(j.target.value),placeholder:"Ex: Problme de transport, rveil tardif, embouteillage...",rows:"3"})]}),n.jsxs("div",{className:"info-box",children:[n.jsx("div",{className:"info-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),n.jsxs("div",{className:"info-content",children:[n.jsx("h4",{children:"Informations importantes"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Le retard sera enregistr pour la date slectionne"}),n.jsx("li",{children:"La dure doit tre en minutes (minimum 1 minute)"}),n.jsx("li",{children:"Les retards sont visibles dans les statistiques d'absences"}),n.jsx("li",{children:"Vous ne pouvez pas dclarer un retard pour une date future"})]})]})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:N,children:"Annuler"}),n.jsx("button",{type:"submit",className:"btn btn-primary",onClick:x,disabled:N,children:N?n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"loading-spinner",viewBox:"0 0 24 24",children:n.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"})}),"Enregistrement..."]}):"Dclarer le retard"})]})]})}):null},sj=({isOpen:e,onClose:t,employees:s})=>{const[r,a]=h.useState(""),[l,o]=h.useState(null),[i,c]=h.useState("entree"),[d,m]=h.useState(!1),[f,N]=h.useState(!1),[C,x]=h.useState({contratSigne:{done:!1,date:"",comment:""},dpae:{done:!1,date:"",comment:""},declarationMedecineTravail:{done:!1,date:"",comment:""},demandeMutuelle:{done:!1,date:"",comment:"",refused:!1,attestationFournie:!1},visiteMedicale:{done:!1,date:"",comment:""},formationSecurite:{done:!1,date:"",comment:""},charteDiscrimination:{done:!1,date:"",comment:""},rib:{done:!1,date:"",comment:""},registrePresenceEntree:{done:!1,date:"",comment:""},gabriel:{done:!1,date:"",comment:""}}),[j,v]=h.useState({arretMutuel:{done:!1,date:"",comment:""},gabrielSortie:{done:!1,date:"",comment:""},mutuelleSortie:{done:!1,date:"",comment:""},retourTenues:{done:!1,date:"",comment:""},retourCles:{done:!1,date:"",comment:""},registrePresenceSortie:{done:!1,date:"",comment:""}}),[u,p]=h.useState(""),[b,E]=h.useState("");h.useEffect(()=>{if(r&&s.length>0){const w=s.find(A=>A._id===r);o(w),F(r)}},[r,s]);const D=w=>{if(!w)return"";try{const A=new Date(w);return isNaN(A.getTime())?"":A.toISOString().split("T")[0]}catch(A){return console.error("Erreur formatage date:",A),""}},F=async w=>{var A,S;try{m(!0);const V=await Y.get(`/onboarding-offboarding/employee/${w}`);if(V.data.success&&V.data.data){const y=V.data.data,z=M=>({done:(M==null?void 0:M.done)||!1,date:D(M==null?void 0:M.date)||"",comment:(M==null?void 0:M.comment)||""});y.onboarding&&x({contratSigne:z(y.onboarding.contratSigne),dpae:z(y.onboarding.dpae),declarationMedecineTravail:z(y.onboarding.declarationMedecineTravail),demandeMutuelle:{...z(y.onboarding.demandeMutuelle),refused:((A=y.onboarding.demandeMutuelle)==null?void 0:A.refused)||!1,attestationFournie:((S=y.onboarding.demandeMutuelle)==null?void 0:S.attestationFournie)||!1},visiteMedicale:z(y.onboarding.visiteMedicale),formationSecurite:z(y.onboarding.formationSecurite),charteDiscrimination:z(y.onboarding.charteDiscrimination),rib:z(y.onboarding.rib),registrePresenceEntree:z(y.onboarding.registrePresenceEntree),gabriel:z(y.onboarding.gabriel)}),y.offboarding&&v({arretMutuel:z(y.offboarding.arretMutuel),gabrielSortie:z(y.offboarding.gabrielSortie),mutuelleSortie:z(y.offboarding.mutuelleSortie),retourTenues:z(y.offboarding.retourTenues),retourCles:z(y.offboarding.retourCles),registrePresenceSortie:z(y.offboarding.registrePresenceSortie)}),p(D(y.entryDate)),E(D(y.exitDate))}}catch(V){console.error("Erreur lors du chargement des donnes:",V),O.error("Erreur lors du chargement des donnes")}finally{m(!1)}},R=(w,A,S)=>{x(V=>({...V,[w]:{...V[w],[A]:S}}))},g=(w,A,S)=>{v(V=>({...V,[w]:{...V[w],[A]:S}}))},P=async()=>{if(console.log(" handleSave appel"),console.log(" selectedEmployeeId:",r),console.log(" selectedEmployee:",l),!r||!l){console.log(" Validation choue: pas d'employ slectionn"),O.error("Veuillez slectionner un employ");return}try{N(!0);const w={};Object.keys(C).forEach(y=>{w[y]={...C[y],date:C[y].date||null}});const A={};Object.keys(j).forEach(y=>{A[y]={...j[y],date:j[y].date||null}});const S={employeeId:r,employeeName:l.name,onboarding:w,offboarding:A,entryDate:u||null,exitDate:b||null};console.log(" Envoi payload:",S);const V=await Y.post("/onboarding-offboarding",S);console.log(" Rponse reue:",V.data),V.data.success&&(O.success(" Dmarches sauvegardes avec succs"),window.location.pathname.includes("dashboard")&&window.location.reload())}catch(w){console.error(" Erreur lors de la sauvegarde:",w),w.response?(console.error("Dtails erreur:",w.response.data),O.error(` Erreur: ${w.response.data.message||"Erreur serveur"}`)):O.error(" Erreur lors de la sauvegarde des dmarches")}finally{N(!1)}},$=()=>{const w=[{key:"contratSigne",label:"Contrat de travail sign des deux parties"},{key:"dpae",label:"DPAE"},{key:"declarationMedecineTravail",label:"Dclaration Mdecine du travail"},{key:"demandeMutuelle",label:"Demande de Mutuelle Entreprise",hasRefusal:!0},{key:"visiteMedicale",label:"Visite mdicale effectue"},{key:"formationSecurite",label:"Formation Scurit Magasin"},{key:"charteDiscrimination",label:"Charte Discrimination signe"},{key:"rib",label:"RIB"},{key:"registrePresenceEntree",label:"Registre de Prsence"},{key:"gabriel",label:"Gabriel"}];return n.jsxs("div",{className:"onboarding-form",children:[n.jsx("h3",{children:" Dmarches d'entre"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Date d'entre"}),n.jsx("input",{type:"date",value:u,onChange:A=>p(A.target.value),className:"form-control"})]}),w.map(A=>{var S,V,y,z,M,I,q,U;return n.jsxs("div",{className:"task-item",children:[n.jsx("div",{className:"task-header",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:((S=C[A.key])==null?void 0:S.done)||!1,onChange:W=>R(A.key,"done",W.target.checked)}),n.jsx("span",{className:(V=C[A.key])!=null&&V.done?"task-done":"",children:A.label})]})}),A.hasRefusal&&n.jsxs("div",{className:"mutuelle-refusal",children:[n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:((y=C[A.key])==null?void 0:y.refused)||!1,onChange:W=>R(A.key,"refused",W.target.checked)}),n.jsx("span",{children:"Refus de la mutuelle"})]}),((z=C[A.key])==null?void 0:z.refused)&&n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:((M=C[A.key])==null?void 0:M.attestationFournie)||!1,onChange:W=>R(A.key,"attestationFournie",W.target.checked)}),n.jsx("span",{children:"Attestation de refus fournie"})]})]}),((I=C[A.key])==null?void 0:I.done)&&n.jsxs("div",{className:"task-details",children:[n.jsx("input",{type:"date",value:((q=C[A.key])==null?void 0:q.date)||"",onChange:W=>R(A.key,"date",W.target.value),className:"form-control form-control-sm",placeholder:"Date"}),n.jsx("input",{type:"text",value:((U=C[A.key])==null?void 0:U.comment)||"",onChange:W=>R(A.key,"comment",W.target.value),className:"form-control form-control-sm",placeholder:"Commentaire (optionnel)"})]})]},A.key)})]})},T=()=>{const w=[{key:"arretMutuel",label:"Arrt Mutuel"},{key:"gabrielSortie",label:"Gabriel"},{key:"mutuelleSortie",label:"Mutuelle (si demande)"},{key:"retourTenues",label:"Retour tenues"},{key:"retourCles",label:"Retour cls"},{key:"registrePresenceSortie",label:"Registre de prsence"}];return n.jsxs("div",{className:"offboarding-form",children:[n.jsx("h3",{children:" Dmarches de sortie"}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Date de sortie"}),n.jsx("input",{type:"date",value:b,onChange:A=>E(A.target.value),className:"form-control"})]}),w.map(A=>{var S,V,y,z,M;return n.jsxs("div",{className:"task-item",children:[n.jsx("div",{className:"task-header",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:((S=j[A.key])==null?void 0:S.done)||!1,onChange:I=>g(A.key,"done",I.target.checked)}),n.jsx("span",{className:(V=j[A.key])!=null&&V.done?"task-done":"",children:A.label})]})}),((y=j[A.key])==null?void 0:y.done)&&n.jsxs("div",{className:"task-details",children:[n.jsx("input",{type:"date",value:((z=j[A.key])==null?void 0:z.date)||"",onChange:I=>g(A.key,"date",I.target.value),className:"form-control form-control-sm",placeholder:"Date"}),n.jsx("input",{type:"text",value:((M=j[A.key])==null?void 0:M.comment)||"",onChange:I=>g(A.key,"comment",I.target.value),className:"form-control form-control-sm",placeholder:"Commentaire (optionnel)"})]})]},A.key)})]})};return e?n.jsx("div",{className:"onboarding-modal-overlay",children:n.jsxs("div",{className:"onboarding-modal",children:[n.jsxs("div",{className:"onboarding-modal-header",children:[n.jsx("h2",{children:" Entre/Sortie - Dmarches Administratives"}),n.jsx("button",{className:"close-btn",onClick:t,children:""})]}),n.jsxs("div",{className:"onboarding-modal-body",children:[n.jsxs("div",{className:"employee-selector",children:[n.jsx("label",{children:"Slectionner un employ :"}),n.jsxs("select",{value:r,onChange:w=>a(w.target.value),className:"form-control",children:[n.jsx("option",{value:"",children:"-- Choisir un employ --"}),s.map(w=>n.jsxs("option",{value:w._id,children:[w.name," (",w.role||"Non spcifi",")"]},w._id))]})]}),r&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"tabs",children:[n.jsx("button",{className:`tab ${i==="entree"?"active":""}`,onClick:()=>c("entree"),children:" Entre"}),n.jsx("button",{className:`tab ${i==="sortie"?"active":""}`,onClick:()=>c("sortie"),children:" Sortie"})]}),d?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des donnes..."})]}):n.jsx("div",{className:"tab-content",children:i==="entree"?$():T()})]})]}),n.jsxs("div",{className:"onboarding-modal-footer",children:[n.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Annuler"}),n.jsx("button",{className:"btn btn-primary",onClick:P,disabled:!r||f,children:f?"Sauvegarde...":" Sauvegarder"})]})]})}):null},rj=({isOpen:e,onClose:t,employees:s})=>{const[r,a]=h.useState(""),[l,o]=h.useState(null),[i,c]=h.useState("entree"),[d,m]=h.useState(!1),[f,N]=h.useState([]),[C,x]=h.useState({itemType:"pantalon",size:"",quantity:1,comment:""}),j=[{value:"pantalon",label:"Pantalon"},{value:"casquette",label:"Casquette"},{value:"chaussures",label:"Chaussures"},{value:"teeshirt",label:"T-shirt"},{value:"polaire",label:"Polaire"},{value:"carte_wengel",label:"Carte Wengel"},{value:"cle_entree",label:"Cl Entre"},{value:"cle_volet",label:"Cl Volet"},{value:"code_alarme",label:"Code Alarme"}];h.useEffect(()=>{if(r&&s.length>0){const g=s.find(P=>P._id===r);o(g),v(r)}},[r,s]);const v=async g=>{try{m(!0);const P=await Y.get(`/uniforms/employee/${g}`);P.data.success&&P.data.data&&N(P.data.data.items||[])}catch(P){console.error("Erreur lors du chargement des tenues:",P),O.error("Erreur lors du chargement des tenues")}finally{m(!1)}},u=async()=>{if(!r||!l){O.error("Veuillez slectionner un employ");return}if(!C.itemType){O.error("Veuillez slectionner un type de tenue");return}try{const g={employeeId:r,employeeName:l.name,itemType:C.itemType,size:C.size,quantity:parseInt(C.quantity)||1,comment:C.comment};(await Y.post("/uniforms",g)).data.success&&(O.success(" Tenue ajoute avec succs"),x({itemType:"pantalon",size:"",quantity:1,comment:""}),await v(r))}catch(g){console.error("Erreur lors de l'ajout de la tenue:",g),O.error(" Erreur lors de l'ajout de la tenue")}},p=async g=>{if(window.confirm("Confirmer le retour de cette tenue ?"))try{(await Y.patch(`/uniforms/${r}/${g}/return`,{returnDate:new Date().toISOString(),returnComment:"Retourn"})).data.success&&(O.success(" Tenue marque comme retourne"),await v(r))}catch(P){console.error("Erreur lors du retour de la tenue:",P),O.error(" Erreur lors du retour de la tenue")}},b=async g=>{if(window.confirm("Confirmer la suppression de cette tenue ?"))try{(await Y.delete(`/uniforms/${r}/${g}`)).data.success&&(O.success(" Tenue supprime"),await v(r))}catch(P){console.error("Erreur lors de la suppression:",P),O.error(" Erreur lors de la suppression")}},E=g=>{const P=j.find($=>$.value===g);return P?P.label:g},D=g=>g?new Date(g).toLocaleDateString("fr-FR"):"-",F=()=>n.jsxs("div",{className:"uniform-entry-form",children:[n.jsx("h3",{children:" Ajouter une tenue"}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Type de tenue *"}),n.jsx("select",{value:C.itemType,onChange:g=>x({...C,itemType:g.target.value}),className:"form-control",children:j.map(g=>n.jsx("option",{value:g.value,children:g.label},g.value))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Taille / Descriptif"}),n.jsx("input",{type:"text",value:C.size,onChange:g=>x({...C,size:g.target.value}),className:"form-control",placeholder:"Ex: L, 42, etc."})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Quantit"}),n.jsx("input",{type:"number",min:"1",value:C.quantity,onChange:g=>x({...C,quantity:g.target.value}),className:"form-control"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Commentaire"}),n.jsx("input",{type:"text",value:C.comment,onChange:g=>x({...C,comment:g.target.value}),className:"form-control",placeholder:"Optionnel"})]}),n.jsx("button",{className:"btn btn-primary",onClick:u,children:" Ajouter cette tenue"}),n.jsx("hr",{style:{margin:"2rem 0"}}),n.jsx("h3",{children:" Historique des tenues attribues"}),f.length===0?n.jsx("p",{className:"no-data",children:"Aucune tenue enregistre"}):n.jsx("div",{className:"uniform-list",children:f.sort((g,P)=>new Date(P.issueDate)-new Date(g.issueDate)).map(g=>n.jsxs("div",{className:`uniform-item ${g.returned?"returned":""}`,children:[n.jsxs("div",{className:"item-header",children:[n.jsx("span",{className:"item-type",children:E(g.itemType)}),n.jsx("span",{className:`item-status ${g.returned?"status-returned":"status-active"}`,children:g.returned?" Retourn":" En cours"})]}),n.jsxs("div",{className:"item-details",children:[n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Taille:"})," ",g.size||"-"]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Quantit:"})," ",g.quantity]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Date d'attribution:"})," ",D(g.issueDate)]}),g.comment&&n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Commentaire:"})," ",g.comment]}),g.returned&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Date de retour:"})," ",D(g.returnDate)]}),g.returnComment&&n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Commentaire retour:"})," ",g.returnComment]})]})]}),n.jsxs("div",{className:"item-actions",children:[!g.returned&&n.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>p(g._id),children:" Marquer comme retourn"}),n.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>b(g._id),children:" Supprimer"})]})]},g._id))})]}),R=()=>{const g=f.filter(P=>!P.returned);return n.jsxs("div",{className:"uniform-exit-form",children:[n.jsx("h3",{children:" Retour des tenues"}),g.length===0?n.jsx("div",{className:"no-pending",children:n.jsx("p",{children:" Aucune tenue en attente de retour"})}):n.jsxs("div",{className:"pending-returns",children:[n.jsxs("p",{className:"info-message",children:[" ",g.length," tenue(s) en attente de retour"]}),n.jsx("div",{className:"uniform-list",children:g.map(P=>n.jsxs("div",{className:"uniform-item",children:[n.jsxs("div",{className:"item-header",children:[n.jsx("span",{className:"item-type",children:E(P.itemType)}),n.jsx("span",{className:"item-status status-pending",children:"  retourner"})]}),n.jsxs("div",{className:"item-details",children:[n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Taille:"})," ",P.size||"-"]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Quantit:"})," ",P.quantity]}),n.jsxs("div",{className:"detail-row",children:[n.jsx("strong",{children:"Attribu le:"})," ",D(P.issueDate)]})]}),n.jsx("div",{className:"item-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:()=>p(P._id),children:" Confirmer le retour"})})]},P._id))})]})]})};return e?n.jsx("div",{className:"uniform-modal-overlay",children:n.jsxs("div",{className:"uniform-modal",children:[n.jsxs("div",{className:"uniform-modal-header",children:[n.jsx("h2",{children:" Gestion des Tenues"}),n.jsx("button",{className:"close-btn",onClick:t,children:""})]}),n.jsxs("div",{className:"uniform-modal-body",children:[n.jsxs("div",{className:"employee-selector",children:[n.jsx("label",{children:"Slectionner un employ :"}),n.jsxs("select",{value:r,onChange:g=>a(g.target.value),className:"form-control",children:[n.jsx("option",{value:"",children:"-- Choisir un employ --"}),s.map(g=>n.jsxs("option",{value:g._id,children:[g.name," (",g.role||"Non spcifi",")"]},g._id))]})]}),r&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"tabs",children:[n.jsx("button",{className:`tab ${i==="entree"?"active":""}`,onClick:()=>c("entree"),children:" Entre / Historique"}),n.jsx("button",{className:`tab ${i==="sortie"?"active":""}`,onClick:()=>c("sortie"),children:" Sortie / Retours"})]}),d?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des donnes..."})]}):n.jsx("div",{className:"tab-content",children:i==="entree"?F():R()})]})]}),n.jsx("div",{className:"uniform-modal-footer",children:n.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Fermer"})})]})}):null},aj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState(!0),[a,l]=h.useState(!1),[o,i]=h.useState(!1),[c,d]=h.useState(!1),[m,f]=h.useState(!1),[N,C]=h.useState(!1),[x,j]=h.useState(!1),[v,u]=h.useState(null),[p,b]=h.useState([]),[E,D]=h.useState({}),[F,R]=h.useState(null),g=Dl();h.useEffect(()=>{P(),ae(),me()},[]);const P=async()=>{try{r(!0);const k=await Y.get("/employees");console.log(" Rponse API employs:",k.data);let K=null;k.data.success&&k.data.data?K=k.data.data:Array.isArray(k.data)&&(K=k.data),K?(t(K),console.log(" Employs chargs:",K.length)):(console.error(" Format de donnes invalide:",k.data),t([]),O.error("Format de donnes invalide"))}catch(k){O.error("Erreur lors du chargement des employs"),console.error(k),t([])}finally{r(!1)}},$=()=>{u(null),l(!0)},T=()=>{i(!0)},w=()=>{d(!0)},A=()=>{f(!0)},S=()=>{C(!0)},V=()=>{g("/tutors")},y=()=>{g("/mutuelle-management")},z=k=>{u(k),l(!0)},M=async k=>{var K,X;try{if(!k.email){O.error("Aucun email configur pour cet employ");return}const le=`Envoyer un mot de passe par email  ${k.name} (${k.email}) ?`;if(!window.confirm(le))return;console.log(" Envoi mot de passe pour:",k.name);const se=await fetch(`${Ot()}/auth/send-password/${k._id}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!se.ok){const re=await se.json();throw new Error(re.error||"Erreur backend")}const ce=await se.json();console.log(" Mot de passe sauvegard et email envoy via backend"),O.success(`Mot de passe envoy  ${k.email}`),console.log(" Mot de passe envoy via backend API")}catch(le){console.error(" Erreur envoi mot de passe:",le),O.error(`Erreur: ${((X=(K=le.response)==null?void 0:K.data)==null?void 0:X.error)||le.message}`)}},I=async k=>{var K,X,le;try{if(console.log(" Donnes employ  sauvegarder:",k),v)console.log(" Modification employ existant:",v._id),await Y.put(`/employees/${v._id}`,k),O.success("Employ modifi avec succs");else{console.log(" Cration nouvel employ"),console.log(" Envoi POST vers /employees avec:",k);const se=await Y.post("/employees",k);console.log(" Rponse API:",se.data),O.success("Employ ajout avec succs")}P(),l(!1)}catch(se){console.error(" Erreur dtaille:",se),console.error(" Erreur response:",se.response),console.error(" Erreur data:",(K=se.response)==null?void 0:K.data),O.error(`Erreur lors de la sauvegarde: ${((le=(X=se.response)==null?void 0:X.data)==null?void 0:le.error)||se.message}`)}},q=async k=>{var K;try{if(console.log("Donnes dclaration:",k),k.type==="maladie"){const X=new FormData;X.append("employeeId",k.employeeId),X.append("startDate",k.startDate),X.append("endDate",k.endDate),k.reason&&X.append("reason",k.reason),k.file&&X.append("sickLeaveFile",k.file),await Y.post("/sick-leaves",X,{headers:{"Content-Type":"multipart/form-data"}}),O.success("Arrt maladie dclar avec succs")}else await Y.post("/absences",{employeeId:k.employeeId,type:k.type==="absence"?"ABS":k.type,startDate:k.startDate,endDate:k.endDate,reason:k.reason||"Absence"}),O.success("Absence dclare avec succs");P(),i(!1)}catch(X){console.error("Erreur dtaille:",((K=X.response)==null?void 0:K.data)||X.message),O.error("Erreur lors de la dclaration")}},U=async k=>{try{console.log(" Sauvegarde retard:",k),await Y.post("/delays",k),O.success("Retard dclar avec succs"),P(),d(!1)}catch(K){console.error(" Erreur sauvegarde retard:",K),O.error("Erreur lors de la dclaration du retard")}},W=async k=>{if(window.confirm("tes-vous sr de vouloir dsactiver cet employ ?"))try{await Y.patch(`/employees/${k}/deactivate`),O.success("Employ dsactiv"),P()}catch{O.error("Erreur lors de la dsactivation")}},te=async k=>{try{await Y.patch(`/employees/${k}/reactivate`),O.success("Employ ractiv"),P()}catch{O.error("Erreur lors de la ractivation")}},ae=async()=>{try{const k=await Y.get("/advance-requests");k.data.success&&b(k.data.data)}catch(k){console.error("Erreur rcupration demandes acompte:",k)}},me=async()=>{try{const k=await Y.get("/advance-requests/stats");k.data.success&&D(k.data.data)}catch(k){console.error("Erreur rcupration stats acompte:",k)}},ue=async(k,K,X={})=>{try{(await Y.put(`/advance-requests/${k}`,{status:K,...X})).data.success&&(O.success(`Demande ${K==="approved"?"approuve":"rejete"} avec succs`),ae(),me(),j(!1),R(null))}catch(le){console.error("Erreur action acompte:",le),O.error("Erreur lors de l'action")}},pe=k=>{R(k),j(!0)},be=()=>{j(!1),R(null)},Ie=k=>({vendeuse:"Vendeuse",apprenti:"Apprenti",responsable:"Responsable",manager:"Manager",preparateur:"Prparateur",chef_prod:"Chef Prod",boulanger:"Boulanger"})[k]||k,G=k=>({CDI:"CDI",Apprentissage:"Contrat d'apprentissage"})[k]||k,de=k=>k?new Date(k).toLocaleDateString("fr-FR"):"-";return s?n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des employs..."})]})}):n.jsxs("div",{className:"employees fade-in",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h2",{children:"Gestion des employs"}),n.jsxs("div",{className:"header-actions",children:[n.jsxs("button",{className:"btn btn-info",onClick:V,children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Tuteurs"]}),n.jsxs("button",{className:"btn btn-primary",onClick:y,style:{backgroundColor:"#17a2b8"},children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})}),"Mutuelle"]}),n.jsxs("button",{className:"btn btn-purple",onClick:A,children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})}),"Entre/Sortie"]}),n.jsxs("button",{className:"btn btn-pink",onClick:S,children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M16 20H8V10h8v10zm4-16H4v2h2v14h12V6h2V4zm-4 0H8V3h8v1z"})}),"Tenue"]}),n.jsxs("button",{className:"btn btn-success",onClick:T,children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"Dclarer maladie/absence"]}),n.jsxs("button",{className:"btn btn-warning",onClick:w,children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Dclarer retard"]}),n.jsxs("button",{className:"btn btn-primary",onClick:$,children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Ajouter un employ"]})]})]}),a&&n.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:k=>{k.target===k.currentTarget&&l(!1)},children:n.jsx("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"8px",padding:"2rem",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:n.jsx(nj,{employee:v,onSave:I,onClose:()=>l(!1),employees:e.filter(k=>k.isActive)})})}),n.jsx("div",{className:"card",children:n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Rle"}),n.jsx("th",{children:"Code Vente"}),n.jsx("th",{children:"Contrat"}),n.jsx("th",{children:"ge"}),n.jsx("th",{children:"Volume hebdo"}),n.jsx("th",{children:"Comptences"}),n.jsx("th",{children:"Jours formation"}),n.jsx("th",{children:"Arrt maladie"}),n.jsx("th",{children:"Absences"}),n.jsx("th",{children:"Statut"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:e.map(k=>n.jsxs("tr",{children:[n.jsx("td",{children:k.name}),n.jsx("td",{children:Ie(k.role)}),n.jsx("td",{children:(()=>{var se;const K=["vendeuse","apprenti","manager","responsable","Apprenti Vendeuse"],X=(se=k.role)==null?void 0:se.toLowerCase();return K.some(ce=>ce.toLowerCase()===X)?k.saleCode||n.jsx("span",{style:{color:"#999",fontStyle:"italic",fontSize:"0.9rem"},children:" gnrer"}):n.jsx("span",{style:{color:"#ccc"},children:"-"})})()}),n.jsx("td",{children:G(k.contractType)}),n.jsxs("td",{children:[k.age," ans",k.isMinor&&n.jsx("span",{style:{color:"#ffc107",fontSize:"0.8rem",marginLeft:"0.5rem",fontWeight:"bold"},children:"(Mineur)"})]}),n.jsxs("td",{children:[k.weeklyHours,"h"]}),n.jsx("td",{children:k.skills&&k.skills.length>0?k.skills.join(", "):"Aucune"}),n.jsx("td",{children:k.trainingDays&&k.trainingDays.length>0?k.trainingDays.join(", "):"-"}),n.jsx("td",{children:(()=>{var X,le;if((X=k.sickLeave)!=null&&X.isOnSickLeave){if((le=k.sickLeave)!=null&&le.endDate){const se=new Date(k.sickLeave.endDate);if(Math.floor((new Date-se)/(1e3*60*60*24))>8)return"-"}return n.jsxs("span",{style:{color:"#dc3545",fontWeight:"bold"},children:[de(k.sickLeave.startDate)," - ",de(k.sickLeave.endDate)]})}const K=(Array.isArray(k.absences)?k.absences:[]).filter(se=>{if(se.type!=="Arrt maladie")return!1;const ce=new Date(se.endDate);return Math.floor((new Date-ce)/(1e3*60*60*24))<=8});if(K&&K.length>0){const se=K[0];return n.jsxs("span",{style:{color:"#dc3545",fontWeight:"bold"},children:[de(se.startDate)," - ",de(se.endDate)]})}return"-"})()}),n.jsx("td",{children:(()=>{const K=(Array.isArray(k.absences)?k.absences:[]).filter(X=>X.type!=="Arrt maladie");return K.length>0?n.jsxs("span",{style:{color:"#ffc107",fontWeight:"bold"},children:[K.length," absence",K.length>1?"s":""]}):"-"})()}),n.jsx("td",{children:n.jsx("span",{style:{color:k.isActive?"#28a745":"#dc3545",fontWeight:"bold"},children:k.isActive?"Actif":"Inactif"})}),n.jsxs("td",{children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>z(k),style:{fontSize:"0.9rem",padding:"0.5rem 1rem"},children:" Modifier"}),k.email&&n.jsx("button",{className:"btn btn-info",onClick:()=>M(k),style:{fontSize:"0.9rem",padding:"0.5rem 1rem",marginLeft:"0.5rem"},title:"Envoyer un mot de passe par email",children:" Mot de passe"}),k.isActive?n.jsx("button",{className:"btn btn-danger",onClick:()=>W(k._id),style:{fontSize:"0.9rem",padding:"0.5rem 1rem",marginLeft:"0.5rem"},children:" Dsactiver"}):n.jsx("button",{className:"btn btn-success",onClick:()=>te(k._id),style:{fontSize:"0.9rem",padding:"0.5rem 1rem",marginLeft:"0.5rem"},children:" Ractiver"})]})]},k._id))})]})})}),e.length===0&&n.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[n.jsx("h3",{children:" Aucun employ trouv"}),n.jsx("p",{children:"Commencez par ajouter votre premier employ."}),n.jsx("button",{className:"btn btn-primary",onClick:$,children:"Ajouter un employ"})]}),n.jsx(Ch,{show:o,onClose:()=>i(!1),onSave:q,employees:e.filter(k=>k.isActive)}),n.jsx(kh,{show:c,onClose:()=>d(!1),onSave:U,employees:e.filter(k=>k.isActive)}),n.jsx(sj,{isOpen:m,onClose:()=>f(!1),employees:e.filter(k=>k.isActive)}),n.jsx(rj,{isOpen:N,onClose:()=>C(!1),employees:e.filter(k=>k.isActive)}),x&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:" Gestion des Demandes d'Acompte"}),n.jsx("button",{className:"close-btn",onClick:be,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"advance-stats",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:E.pending||0}),n.jsx("div",{className:"stat-label",children:"En attente"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:E.approved||0}),n.jsx("div",{className:"stat-label",children:"Approuves"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:E.rejected||0}),n.jsx("div",{className:"stat-label",children:"Rejetes"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsxs("div",{className:"stat-number",children:[E.totalAmount||0,""]}),n.jsx("div",{className:"stat-label",children:"Montant total"})]})]}),n.jsxs("div",{className:"advance-requests-list",children:[n.jsx("h4",{children:" Demandes en attente"}),p.filter(k=>k.status==="pending").map(k=>n.jsxs("div",{className:"advance-request-card",children:[n.jsxs("div",{className:"request-info",children:[n.jsx("div",{className:"employee-name",children:k.employeeName}),n.jsxs("div",{className:"request-amount",children:[k.amount,""]}),n.jsxs("div",{className:"request-month",children:["Dduction: ",k.deductionMonth]}),n.jsxs("div",{className:"request-date",children:["Demand le: ",new Date(k.createdAt).toLocaleDateString("fr-FR")]}),k.comment&&n.jsxs("div",{className:"request-comment",children:[n.jsx("strong",{children:"Commentaire:"})," ",k.comment]})]}),n.jsxs("div",{className:"request-actions",children:[n.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>ue(k._id,"approved"),children:" Approuver"}),n.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>pe(k),children:" Modifier"}),n.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>ue(k._id,"rejected"),children:" Rejeter"})]})]},k._id)),p.filter(k=>k.status==="pending").length===0&&n.jsx("div",{className:"no-requests",children:n.jsx("p",{children:"Aucune demande d'acompte en attente"})})]}),n.jsxs("div",{className:"advance-history",children:[n.jsx("h4",{children:" Historique"}),p.filter(k=>k.status!=="pending").slice(0,10).map(k=>n.jsx("div",{className:"advance-history-item",children:n.jsxs("div",{className:"history-info",children:[n.jsx("span",{className:"employee-name",children:k.employeeName}),n.jsxs("span",{className:"amount",children:[k.amount,""]}),n.jsx("span",{className:`status status-${k.status}`,children:k.status==="approved"?" Approuv":" Rejet"}),n.jsx("span",{className:"date",children:new Date(k.updatedAt).toLocaleDateString("fr-FR")})]})},k._id))]})]})]})}),F&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:" Modifier la Demande d'Acompte"}),n.jsx("button",{className:"close-btn",onClick:be,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"form-group",children:n.jsxs("label",{children:["Employ: ",F.employeeName]})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Montant ():"}),n.jsx("input",{type:"number",id:"editAmount",defaultValue:F.amount,min:"1",max:"5000",step:"0.01"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Mois de dduction:"}),n.jsxs("select",{id:"editMonth",defaultValue:F.deductionMonth,children:[n.jsx("option",{value:"Janvier 2025",children:"Janvier 2025"}),n.jsx("option",{value:"Fvrier 2025",children:"Fvrier 2025"}),n.jsx("option",{value:"Mars 2025",children:"Mars 2025"}),n.jsx("option",{value:"Avril 2025",children:"Avril 2025"}),n.jsx("option",{value:"Mai 2025",children:"Mai 2025"}),n.jsx("option",{value:"Juin 2025",children:"Juin 2025"}),n.jsx("option",{value:"Juillet 2025",children:"Juillet 2025"}),n.jsx("option",{value:"Aot 2025",children:"Aot 2025"}),n.jsx("option",{value:"Septembre 2025",children:"Septembre 2025"}),n.jsx("option",{value:"Octobre 2025",children:"Octobre 2025"}),n.jsx("option",{value:"Novembre 2025",children:"Novembre 2025"}),n.jsx("option",{value:"Dcembre 2025",children:"Dcembre 2025"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Commentaire du manager:"}),n.jsx("textarea",{id:"editComment",rows:"3",placeholder:"Commentaire optionnel..."})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"btn btn-success",onClick:()=>{const k=document.getElementById("editAmount").value;document.getElementById("editMonth").value;const K=document.getElementById("editComment").value;ue(F._id,"approved",{approvedAmount:k,managerComment:K})},children:" Approuver avec modifications"}),n.jsx("button",{className:"btn btn-danger",onClick:()=>{const k=document.getElementById("editComment").value;ue(F._id,"rejected",{managerComment:k})},children:" Rejeter"}),n.jsx("button",{className:"btn btn-secondary",onClick:be,children:"Annuler"})]})]})]})})]})},lj=()=>{const[e,t]=h.useState(""),[s,r]=h.useState(new Date().getFullYear()),[a,l]=h.useState(null),[o,i]=h.useState(!1),c=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];h.useEffect(()=>{const D=new URLSearchParams(window.location.search),F=D.get("week"),R=D.get("year");if(F&&t(F),R)r(parseInt(R));else{const P=d(new Date);t(P)}},[]),h.useEffect(()=>{e&&s&&C()},[e,s]);const d=D=>{const F=new Date(Date.UTC(D.getFullYear(),D.getMonth(),D.getDate())),R=F.getUTCDay()||7;F.setUTCDate(F.getUTCDate()+4-R);const g=new Date(Date.UTC(F.getUTCFullYear(),0,1));return Math.ceil(((F-g)/864e5+1)/7)},m=(D,F,R)=>{const g=new Date(F,0,1),P=Math.floor((D-1)*7)+R,$=new Date(g);return $.setDate(g.getDate()+P),`${$.getDate()}/${$.getMonth()+1}`},f=D=>{const F=parseInt(D.startTime.split(":")[0]);return F<=7?"Ouverture":F>=16?"Fermeture":"Standard"},N=D=>{switch(D){case"Ouverture":return"#28a745";case"Fermeture":return"#dc3545";default:return"#007bff"}},C=async()=>{try{i(!0);const D=await Y.get(`/planning/${e}/${s}`);l(D.data)}catch{l(null)}finally{i(!1)}},x=async()=>{if(!e||!s){O.error("Veuillez saisir le numro de semaine et l'anne");return}i(!0);try{const D=await Y.post("/planning/generate",{weekNumber:parseInt(e),year:parseInt(s),affluenceLevels:{Lundi:2,Mardi:2,Mercredi:2,Jeudi:2,Vendredi:2,Samedi:2,Dimanche:2}});O.success("Planning gnr avec succs !"),l(D.data.plannings)}catch(D){O.error("Erreur lors de la gnration du planning"),console.error(D)}finally{i(!1)}},j=async D=>{try{await Y.patch(`/planning/${D}/realize`,{status:"realized"}),O.success("Planning marqu comme ralis"),C()}catch{O.error("Erreur lors de la mise  jour du statut")}},v=D=>D?D.substring(0,5):"",u=(D,F)=>D.filter(R=>{const g=R.schedule.find(P=>P.day===F);return g&&g.shifts.length>0}).length,p=(D,F)=>D.reduce((R,g)=>{const P=g.schedule.find($=>$.day===F);return P&&P.shifts.length>0?R+P.totalHours:R},0),b=(D,F)=>{if(!D||!F)return 0;const[R,g]=D.split(":").map(Number),[P,$]=F.split(":").map(Number),T=R*60+g;let A=(P*60+$-T)/60;return A<=0?0:(A>=5.5&&(A-=.5),Math.max(0,A))},E=(D,F,R,g,P)=>{l($=>$.map(T=>{if(T._id!==D)return T;const w=T.schedule.map(S=>{if(S.day!==F)return S;const V=S.shifts.map((z,M)=>{if(M!==R)return z;const I={...z,[g]:P};return(g==="startTime"||g==="endTime")&&(I.hoursWorked=b(I.startTime,I.endTime)),I}),y=V.reduce((z,M)=>z+(M.hoursWorked||0),0);return{...S,shifts:V,totalHours:y}}),A=w.reduce((S,V)=>S+(V.totalHours||0),0);return{...T,schedule:w,totalWeeklyHours:A}}))};return n.jsxs("div",{className:"planning fade-in",children:[n.jsxs("div",{className:"card",children:[n.jsx("h2",{children:" Gnration du planning"}),n.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[n.jsxs("div",{children:[n.jsx("label",{children:"Semaine :"}),n.jsx("input",{type:"number",value:e,onChange:D=>t(D.target.value),min:"1",max:"53",style:{marginLeft:"0.5rem",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd"}})]}),n.jsxs("div",{children:[n.jsx("label",{children:"Anne :"}),n.jsx("input",{type:"number",value:s,onChange:D=>r(parseInt(D.target.value)),min:"2020",max:"2030",style:{marginLeft:"0.5rem",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd"}})]}),n.jsx("button",{className:"btn btn-primary",onClick:x,disabled:o,children:o?"Gnration...":" Gnrer le planning"})]})]}),o&&n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Gnration du planning en cours..."})]})}),a&&!o&&n.jsxs("div",{children:[n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:" Rsum par jour"}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Jour"}),n.jsx("th",{children:"Personnel prsent"}),n.jsx("th",{children:"Total heures"}),n.jsx("th",{children:"Affluence"})]})}),n.jsx("tbody",{children:c.map(D=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"bold"},children:D}),n.jsxs("td",{children:[u(a,D)," personnes"]}),n.jsxs("td",{children:[p(a,D).toFixed(1),"h"]}),n.jsx("td",{children:"2/4"})]},D))})]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("h3",{children:[" Planning dtaill - Semaine ",e," (",s,")"]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employ"}),c.map((D,F)=>{const R=m(e,s,F);return n.jsxs("th",{children:[D,n.jsx("br",{}),n.jsx("small",{style:{fontSize:"0.8rem",color:"#666"},children:R})]},D)}),n.jsx("th",{children:"Total semaine"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:a.map(D=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"bold"},children:D.employeeName}),c.map(F=>{const R=D.schedule.find(g=>g.day===F);return n.jsx("td",{children:R&&R.shifts.length>0?n.jsxs("div",{children:[R.shifts.map((g,P)=>{const $=f(g),T=N($);return n.jsxs("div",{className:"planning-shift",style:{color:T},children:[n.jsx("input",{type:"time",value:v(g.startTime),onChange:w=>E(D._id,F,P,"startTime",w.target.value),style:{width:"90px",marginRight:"0.25rem"}})," - ",n.jsx("input",{type:"time",value:v(g.endTime),onChange:w=>E(D._id,F,P,"endTime",w.target.value),style:{width:"90px",marginLeft:"0.25rem"}}),n.jsx("br",{}),n.jsx("small",{style:{color:T},children:$})]},P)}),n.jsxs("small",{style:{color:"#666"},children:[R.totalHours.toFixed(1),"h"]})]}):R&&R.constraint?n.jsx("div",{className:"planning-constraint",style:{color:R.constraint==="MAL"?"#dc3545":"#666",fontWeight:R.constraint==="MAL"?"bold":"normal"},children:R.constraint}):n.jsx("span",{style:{color:"#999"},children:""})},F)}),n.jsxs("td",{style:{fontWeight:"bold"},children:[D.schedule.reduce((F,R)=>F+(R.totalHours||0),0).toFixed(1),"h",n.jsx("br",{}),n.jsxs("small",{style:{color:"#666"},children:["/",D.contractedHours,"h"]})]}),n.jsxs("td",{children:[D.status==="generated"&&n.jsx("button",{className:"btn btn-primary",onClick:()=>j(D._id),style:{fontSize:"0.8rem",padding:"0.25rem 0.5rem"},children:" Marquer comme ralis"}),D.status==="realized"&&n.jsx("span",{className:"badge badge-success",children:" Ralis"})]})]},D.employeeId))}),n.jsx("tfoot",{children:n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"bold"},children:"Total jour"}),c.map(D=>n.jsxs("td",{children:[u(a,D)," pers /"," ",p(a,D).toFixed(1),"h"]},D)),n.jsx("td",{colSpan:2})]})})]})})]})]})]})},oj=()=>{const[e,t]=h.useState(""),[s,r]=h.useState(new Date().getFullYear()),[a,l]=h.useState([]),[o,i]=h.useState({}),[c,d]=h.useState({Lundi:2,Mardi:2,Mercredi:2,Jeudi:2,Vendredi:2,Samedi:2,Dimanche:2}),[m,f]=h.useState(!1),[N,C]=h.useState({}),x=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],j=[{value:"",label:"Travail normal"},{value:"Ferm",label:"Ferm"},{value:"Matin",label:"Matin seulement"},{value:"Aprs-midi",label:"Aprs-midi seulement"},{value:"Repos",label:"Repos"},{value:"Formation",label:"Formation (8h)"},{value:"CP",label:"Cong pay"},{value:"MAL",label:"Maladie"},{value:"ABS",label:"Absence"},{value:"RET",label:"Retard"},{value:"Fri",label:"Jour fri"},{value:"Management",label:"Management"}];h.useEffect(()=>{u();const A=v(new Date);t(A)},[]),h.useEffect(()=>{if(a.length>0&&Object.keys(o).length>0){const w={...o};let A=!1;a.forEach(S=>{S.contractType==="Apprentissage"&&S.trainingDays&&S.trainingDays.forEach(V=>{var y;((y=o[S._id])==null?void 0:y[V])!=="Formation"&&(w[S._id]||(w[S._id]={}),w[S._id][V]="Formation",A=!0)})}),A&&i(w)}},[a,o]);const v=w=>{const A=new Date(Date.UTC(w.getFullYear(),w.getMonth(),w.getDate())),S=A.getUTCDay()||7;A.setUTCDate(A.getUTCDate()+4-S);const V=new Date(Date.UTC(A.getUTCFullYear(),0,1));return Math.ceil(((A-V)/864e5+1)/7)},u=async()=>{try{const w=await Y.get("/employees");let A=null;w.data.success&&w.data.data?A=w.data.data:Array.isArray(w.data)&&(A=w.data),A?l(A.filter(S=>S.isActive)):(l([]),O.error("Format de donnes invalide"))}catch{O.error("Erreur lors du chargement des employs"),l([])}},p=async()=>{try{const w=await Y.get(`/constraints/${e}/${s}`),A={};w.data.forEach(S=>{A[S.employeeId._id]=S.constraints}),i(A)}catch{const A={};a.forEach(S=>{A[S._id]={}}),i(A)}};h.useEffect(()=>{e&&s&&p()},[e,s]);const b=(w,A,S)=>{i(V=>({...V,[w]:{...V[w],[A]:S}}))},E=(w,A)=>{d(S=>({...S,[w]:parseInt(A)}))},D=async(w,A)=>{i(S=>{const V={...S};return a.forEach(y=>{V[y._id]||(V[y._id]={}),V[y._id][w]=A}),V});try{if(!e||!s)return;await Y.post("/constraints/global",{weekNumber:parseInt(e),year:parseInt(s),day:w,constraint:A}),O.success(A==="Ferm"?`Jour "${w}" marqu comme ferm pour tous les salaris`:`Jour "${w}" enregistr comme jour fri pour tous les salaris`)}catch(S){console.error("Erreur lors de lapplication globale de la contrainte :",S),O.error("Erreur lors de lenregistrement global de la contrainte")}},F=w=>{i(A=>{const S={...A};return S[w]||(S[w]={}),x.forEach(V=>{S[w][V]="MAL"}),S}),O.success("Maladie applique pour toute la semaine")},R=w=>{C(A=>{const V=!!!A[w];return V?O.success("Mode 6j/7 activ : OR-Tools choisira le jour de repos en fonction des contraintes"):O.success("Mode 6j/7 dsactiv pour ce salari"),{...A,[w]:V}})},g=async()=>{f(!0);try{const w=a.map(A=>{const S=o[A._id]||{},V={};return x.forEach(y=>{S[y]&&S[y].trim()!==""&&(V[y]=S[y])}),Y.post("/constraints",{weekNumber:parseInt(e),year:parseInt(s),employeeId:A._id,constraints:V,sixDaysPerWeek:!!N[A._id]})});await Promise.all(w),O.success("Contraintes sauvegardes avec succs")}catch(w){console.error("Erreur dtaille:",w),O.error("Erreur lors de la sauvegarde des contraintes")}finally{f(!1)}},P=async()=>{try{await g(),window.location.href=`/plan/planning?week=${e}&year=${s}`}catch{O.error("Erreur lors de la sauvegarde des contraintes")}},$=w=>({0:"Faible",1:"Moyen-faible",2:"Normal",3:"Moyen-fort",4:"Trs fort"})[w]||"Normal",T=w=>({Lundi:1,Mardi:2,Mercredi:3,Jeudi:4,Vendredi:5,Samedi:6,Dimanche:0})[w]||1;return n.jsxs("div",{className:"constraints fade-in",children:[n.jsx("h2",{children:"Contraintes hebdomadaires"}),n.jsx("div",{className:"card",children:n.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",alignItems:"center"},children:[n.jsxs("div",{className:"form-group",style:{margin:0},children:[n.jsx("label",{children:"Semaine n"}),n.jsx("input",{type:"number",value:e,onChange:w=>t(w.target.value),min:"1",max:"52",style:{width:"80px"}})]}),n.jsxs("div",{className:"form-group",style:{margin:0},children:[n.jsx("label",{children:"Anne"}),n.jsx("input",{type:"number",value:s,onChange:w=>r(w.target.value),min:"2020",max:"2030",style:{width:"100px"}})]}),n.jsx("button",{className:"btn btn-primary",onClick:g,disabled:m,children:m?"Sauvegarde...":" Sauvegarder"})]})}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:" Niveaux d'affluence"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem"},children:x.map(w=>n.jsxs("div",{className:"form-group",style:{margin:0},children:[n.jsx("label",{children:w}),n.jsxs("select",{value:c[w],onChange:A=>E(w,A.target.value),children:[n.jsx("option",{value:0,children:"Faible (0)"}),n.jsx("option",{value:1,children:"Moyen-faible (1)"}),n.jsx("option",{value:2,children:"Normal (2)"}),n.jsx("option",{value:3,children:"Moyen-fort (3)"}),n.jsx("option",{value:4,children:"Trs fort (4)"})]}),n.jsx("small",{style:{color:"#666",display:"block",marginTop:"0.25rem"},children:$(c[w])})]},w))})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:" Contraintes individuelles"}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employ"}),x.map(w=>n.jsxs("th",{children:[w,n.jsx("br",{}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>D(w,"Ferm"),style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",marginTop:"0.25rem"},title:`Fermer ${w} pour tous`,children:"Fermer"}),n.jsx("br",{}),n.jsx("button",{className:"btn btn-warning",onClick:()=>D(w,"Fri"),style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",marginTop:"0.25rem"},title:`Enregistrer travail jour fri pour ${w}`,children:"Jour fri"})]},w))]})}),n.jsx("tbody",{children:a.map(w=>n.jsxs("tr",{children:[n.jsxs("td",{style:{fontWeight:"bold"},children:[w.name,n.jsx("br",{}),n.jsxs("small",{style:{color:"#666"},children:[w.role,"  ",w.weeklyHours,"h"]}),n.jsx("br",{}),n.jsx("button",{className:"btn btn-danger",onClick:()=>F(w._id),style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",marginTop:"0.25rem"},title:"Dclarer maladie pour toute la semaine",children:" Maladie"}),n.jsx("br",{}),n.jsx("button",{className:`btn btn-info ${N[w._id]?"active":""}`,onClick:()=>R(w._id),style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",marginTop:"0.25rem",backgroundColor:N[w._id]?"#17a2b8":"#6c757d",color:"white"},title:N[w._id]?"Dsactiver 6j/7":"Appliquer 6 jours de travail (1 jour de repos)",children:N[w._id]?" 6j/7":" 6j/7"})]}),x.map(A=>{var S,V;return n.jsx("td",{children:(S=w.sickLeave)!=null&&S.isOnSickLeave&&new Date(w.sickLeave.startDate)<=new Date(`${s}-${String(parseInt(e)+1).padStart(2,"0")}-${T(A)}`)&&new Date(w.sickLeave.endDate)>=new Date(`${s}-${String(parseInt(e)+1).padStart(2,"0")}-${T(A)}`)?n.jsx("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"0.5rem",borderRadius:"4px",textAlign:"center",fontWeight:"bold"},children:" Maladie"}):n.jsx("select",{value:((V=o[w._id])==null?void 0:V[A])||"",onChange:y=>b(w._id,A,y.target.value),style:{width:"100%",fontSize:"0.9rem"},children:j.map(y=>n.jsx("option",{value:y.value,children:y.label},y.value))})},A)})]},w._id))})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:" Actions"}),n.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[n.jsx("button",{className:"btn btn-success",onClick:P,disabled:m,children:m?" Sauvegarde...":" Gnrer le planning"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>{const w=parseInt(e)+1;t(w>52?1:w),w>52&&r(s+1)},children:"Semaine suivante"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>{const w=parseInt(e)-1;t(w<1?52:w),w<1&&r(s-1)},children:"Semaine prcdente"})]})]})]})},ij=()=>{const[e,t]=h.useState([]),[s,r]=h.useState([]),[a,l]=h.useState(!0),[o,i]=h.useState([]),[c,d]=h.useState(null),m=window.location.pathname.includes("/lon/"),f=window.location.pathname.includes("/plan/"),N=m||f;h.useEffect(()=>{C(),j(),x(),N&&v()},[N]);const C=async()=>{try{l(!0);const g=await Y.get("/employees");let P=null;g.data.success&&g.data.data?P=g.data.data:Array.isArray(g.data)&&(P=g.data),P?t(P):(t([]),console.error("Format de donnes invalide:",g.data))}catch(g){console.error("Erreur lors du chargement du tableau de bord:",g),t([])}finally{l(!1)}},x=async()=>{try{const g=await Y.get("/sick-leaves",{params:{status:"all",limit:1e3}});if(g.data.success&&g.data.data){const P=g.data.data.sickLeaves||g.data.data;r(Array.isArray(P)?P:[])}}catch(g){console.error("Erreur lors du chargement des arrts maladie:",g),r([])}},j=async()=>{try{const g=await Y.get("/onboarding-offboarding/pending-obligations");g.data.success&&g.data.data&&i(g.data.data)}catch(g){console.error("Erreur lors du chargement des obligations lgales:",g),i([])}},v=async()=>{try{const g=m?"longuenesse":"arras",P=await Y.get("/daily-losses/dashboard",{params:{city:g}});P.data.success&&d(P.data.data)}catch(g){console.error("Erreur lors du chargement des stats pertes:",g),d(null)}},u=g=>{const P=parseFloat(g);return P>=6&&P<=8?"#28a745":P<6?"#ff9800":"#dc3545"},p=e.filter(g=>{var T,w;if((T=g.sickLeave)!=null&&T.isOnSickLeave){if((w=g.sickLeave)!=null&&w.endDate){const A=new Date(g.sickLeave.endDate);if(Math.floor((new Date-A)/(1e3*60*60*24))>8)return!1}return!0}return!!s.filter(A=>{const S=A.employeeName&&g.name&&A.employeeName.toLowerCase().trim()===g.name.toLowerCase().trim(),V=A.employeeEmail&&g.email&&A.employeeEmail.toLowerCase().trim()===g.email.toLowerCase().trim();return S||V}).find(A=>{if(A.status==="rejected")return!1;const S=new Date(A.endDate);return Math.floor((new Date-S)/(1e3*60*60*24))<=8})}).map(g=>{var w;const P=s.filter(A=>{const S=A.employeeName&&g.name&&A.employeeName.toLowerCase().trim()===g.name.toLowerCase().trim(),V=A.employeeEmail&&g.email&&A.employeeEmail.toLowerCase().trim()===g.email.toLowerCase().trim();return S||V}),$=new Date;$.setHours(0,0,0,0);const T=P.filter(A=>{if(A.status==="rejected")return!1;const S=new Date(A.startDate);S.setHours(0,0,0,0);const V=new Date(A.endDate);return V.setHours(23,59,59,999),$>=S&&$<=V?!0:Math.floor(($-V)/(1e3*60*60*24))<=8}).sort((A,S)=>{const V=new Date(A.endDate),y=new Date(S.endDate);return V.getTime()!==y.getTime()?y-V:new Date(S.uploadDate||S.createdAt||S.startDate)-new Date(A.uploadDate||A.createdAt||A.startDate)})[0];if(T){const A=new Date;A.setHours(0,0,0,0);const S=new Date(T.startDate);S.setHours(0,0,0,0);const V=new Date(T.endDate);V.setHours(23,59,59,999);const y=A>=S&&A<=V,z=new Date(T.endDate),M=(w=g.sickLeave)!=null&&w.endDate?new Date(g.sickLeave.endDate):null;if(g.name&&g.name.toLowerCase().includes("camille")&&console.log(" Debug Camille:",{name:g.name,activeSickLeave:{startDate:T.startDate,endDate:T.endDate,status:T.status},existingSickLeave:g.sickLeave,isApiSickLeaveActive:y,today:A.toISOString(),apiStart:S.toISOString(),apiEnd:V.toISOString()}),y||!M||z>=M)return{...g,sickLeave:{isOnSickLeave:!0,startDate:T.startDate,endDate:T.endDate}}}return g}),b=e.filter(g=>{var $,T,w,A,S;if(!g.vacation)return!1;const P=new Date;if(P.setHours(0,0,0,0),($=g.vacation)!=null&&$.endDate){const V=new Date(g.vacation.endDate);if(V.setHours(0,0,0,0),V<P)return!1}if(!((T=g.vacation)!=null&&T.isOnVacation)&&!((w=g.vacation)!=null&&w.startDate)&&!((A=g.vacation)!=null&&A.endDate))return!1;if((S=g.vacation)!=null&&S.startDate){const V=new Date(g.vacation.startDate);if(V.setHours(0,0,0,0),Math.floor((V-P)/(1e3*60*60*24))>8)return!1}return!0}),E=e.filter(g=>g.age<18),D=e.filter(g=>g.contractType==="Apprentissage"),F=g=>g?new Date(g).toLocaleDateString("fr-FR"):"-",R=g=>{if(!g)return 0;const T=new Date(g)-new Date;return Math.ceil(T/(1e3*60*60*24))};return a?n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement du tableau de bord..."})]})}):n.jsxs("div",{className:"dashboard fade-in",children:[n.jsx("h2",{children:" Tableau de bord"}),N&&c&&n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" Statistiques Pertes (Invendus/Dons)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[c.jour&&n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px solid "+u(c.jour.pourcentage)},children:[n.jsx("h4",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"10px"},children:"Jour pass"}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:u(c.jour.pourcentage)},children:[c.jour.pourcentage.toFixed(2),"%"]}),n.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:[c.jour.totalPertes.toFixed(2)," / ",c.jour.totalVentes.toFixed(2),""]})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px solid "+u(c.semaine.pourcentage)},children:[n.jsx("h4",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"10px"},children:"Cumul Semaine"}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:u(c.semaine.pourcentage)},children:[c.semaine.pourcentage.toFixed(2),"%"]}),n.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:[c.semaine.totalPertes.toFixed(2)," / ",c.semaine.totalVentes.toFixed(2),""]})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px solid "+u(c.mois.pourcentage)},children:[n.jsx("h4",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"10px"},children:"Cumul Mois"}),n.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:u(c.mois.pourcentage)},children:[c.mois.pourcentage.toFixed(2),"%"]}),n.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"5px"},children:[c.mois.totalPertes.toFixed(2)," / ",c.mois.totalVentes.toFixed(2),""]})]})]}),n.jsx("div",{style:{marginTop:"15px",textAlign:"center"},children:n.jsx("a",{href:m?"/lon/daily-losses-entry.html":"/plan/daily-losses-entry.html",target:"_blank",style:{display:"inline-block",padding:"10px 20px",backgroundColor:"#667eea",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600"},children:" Ouvrir la page de saisie"})})]}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" Rcapitulatif : Arrts maladie"}),p.length===0?n.jsx("p",{children:"Aucun employ en arrt maladie"}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Date de reprise"}),n.jsx("th",{children:"Jours avant reprise"})]})}),n.jsx("tbody",{children:p.map(g=>{var S,V;const P=(S=g.sickLeave)!=null&&S.startDate?new Date(g.sickLeave.startDate):null,$=(V=g.sickLeave)!=null&&V.endDate?new Date(g.sickLeave.endDate):null,T=$?new Date($):null;T&&T.setDate(T.getDate()+1);const w=new Date;w.setHours(0,0,0,0);let A=!1;if(P&&$){const y=new Date(P);y.setHours(0,0,0,0);const z=new Date($);z.setHours(23,59,59,999),A=w>=y&&w<=z}return n.jsxs("tr",{children:[n.jsx("td",{children:g.name}),n.jsx("td",{children:T?F(T.toISOString()):"-"}),n.jsx("td",{children:(()=>{if(A&&T){const y=R(T.toISOString());return n.jsxs("span",{style:{color:"#ffc107",fontWeight:"bold"},children:["En arrt (",y," jour",y>1?"s":""," avant reprise)"]})}if(T){const y=R(T.toISOString());if(y<=0&&y>=-8)return n.jsxs("span",{style:{color:"#28a745",fontWeight:"bold"},children:["Repris (",Math.abs(y)," jour",Math.abs(y)>1?"s":""," depuis)"]});if(y>0)return n.jsxs("span",{style:{color:"#28a745",fontWeight:"bold"},children:[y," jour",y>1?"s":""," avant reprise"]})}return n.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:"Repris"})})()})]},g._id)})})]})})]}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" Rcapitulatif : Absences et Retards (Aujourd'hui)"}),(()=>{const g=new Date;g.setHours(0,0,0,0),new Date(g).setHours(23,59,59,999);const $=e.filter(T=>{var y,z;const w=((y=T.absences)==null?void 0:y.all)||(Array.isArray(T.absences)?T.absences:[]),A=((z=T.delays)==null?void 0:z.all)||(Array.isArray(T.delays)?T.delays:[]),S=w.filter(M=>{if(M.startDate&&M.endDate){const I=new Date(M.startDate);I.setHours(0,0,0,0);const q=new Date(M.endDate);return q.setHours(23,59,59,999),g>=I&&g<=q}return!1}),V=A.filter(M=>{if(M.date){const I=new Date(M.date);return I.setHours(0,0,0,0),I.getTime()===g.getTime()}return!1});return S.length>0||V.length>0});return $.length===0?n.jsx("p",{children:"Aucune absence ou retard aujourd'hui"}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Absences"}),n.jsx("th",{children:"Retards"}),n.jsx("th",{children:"Total"})]})}),n.jsx("tbody",{children:$.map(T=>{var y,z;const w=((y=T.absences)==null?void 0:y.all)||(Array.isArray(T.absences)?T.absences:[]),A=((z=T.delays)==null?void 0:z.all)||(Array.isArray(T.delays)?T.delays:[]),S=w.filter(M=>{if(M.startDate&&M.endDate){const I=new Date(M.startDate);I.setHours(0,0,0,0);const q=new Date(M.endDate);return q.setHours(23,59,59,999),g>=I&&g<=q}return!1}),V=A.filter(M=>{if(M.date){const I=new Date(M.date);return I.setHours(0,0,0,0),I.getTime()===g.getTime()}return!1});return n.jsxs("tr",{children:[n.jsx("td",{children:T.name}),n.jsx("td",{children:n.jsx("span",{style:{color:"#dc3545",fontWeight:"bold"},children:S.length})}),n.jsx("td",{children:n.jsx("span",{style:{color:"#ffc107",fontWeight:"bold"},children:V.length})}),n.jsx("td",{children:n.jsx("span",{style:{fontWeight:"bold"},children:S.length+V.length})})]},T._id)})})]})})})()]}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" Rcapitulatif : Congs"}),b.length===0?n.jsx("p",{children:"Aucun employ en congs dans les 8 prochains jours"}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Date de dbut"}),n.jsx("th",{children:"Date de fin"}),n.jsx("th",{children:"Jours avant congs"})]})}),n.jsx("tbody",{children:b.map(g=>{var P,$;return n.jsxs("tr",{children:[n.jsx("td",{children:g.name}),n.jsx("td",{children:F((P=g.vacation)==null?void 0:P.startDate)}),n.jsx("td",{children:F(($=g.vacation)==null?void 0:$.endDate)}),n.jsx("td",{children:(()=>{var w;const T=R((w=g.vacation)==null?void 0:w.startDate);return n.jsx("span",{style:{color:T>0?"#ffc107":"#28a745",fontWeight:"bold"},children:T>0?`${T} jours`:"En congs"})})()})]},g._id)})})]})})]}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" tat ge : Salaris mineurs"}),E.length===0?n.jsx("p",{children:"Aucun employ mineur"}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Date des 18 ans"}),n.jsx("th",{children:"Jours avant les 18 ans"})]})}),n.jsx("tbody",{children:E.map(g=>n.jsxs("tr",{children:[n.jsx("td",{children:g.name}),n.jsx("td",{children:(()=>{if(g.birthDate){const A=new Date(g.birthDate),S=new Date(A);return S.setFullYear(A.getFullYear()+18),F(S)}const $=18-g.age,T=new Date,w=new Date(T.getFullYear()+$,T.getMonth(),T.getDate());return F(w)})()}),n.jsx("td",{children:(()=>{if(g.birthDate){const S=new Date(g.birthDate),V=new Date(S);V.setFullYear(S.getFullYear()+18);const y=R(V);return n.jsx("span",{style:{color:y>0?"#ffc107":"#28a745",fontWeight:"bold"},children:y>0?`${y} jours`:"Majeur"})}const $=18-g.age,T=new Date,w=new Date(T.getFullYear()+$,T.getMonth(),T.getDate()),A=R(w);return n.jsx("span",{style:{color:A>0?"#ffc107":"#28a745",fontWeight:"bold"},children:A>0?`${A} jours (approximatif)`:"Majeur"})})()})]},g._id))})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:" tat Contrat : Apprentis"}),D.length===0?n.jsx("p",{children:"Aucun apprenti"}):n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Date de fin de contrat"}),n.jsx("th",{children:"Jours avant fin de contrat"})]})}),n.jsx("tbody",{children:D.map(g=>n.jsxs("tr",{children:[n.jsx("td",{children:g.name}),n.jsx("td",{children:F(g.contractEndDate)}),n.jsx("td",{children:(()=>{const P=R(g.contractEndDate);return n.jsx("span",{style:{color:P>30?"#28a745":P>7?"#ffc107":"#dc3545",fontWeight:"bold"},children:P>0?`${P} jours`:"Termin"})})()})]},g._id))})]})})]}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" Obligations Lgales"}),o.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"#d4edda",color:"#155724",borderRadius:"8px",border:"1px solid #c3e6cb"},children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",style:{width:"48px",height:"48px",marginBottom:"1rem"},children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),n.jsx("p",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:" Toutes les obligations lgales sont  jour !"})]}):n.jsxs("div",{style:{overflowX:"auto"},children:[n.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fff3cd",color:"#856404",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #ffeaa7"},children:n.jsxs("strong",{children:[" ",o.length," dmarche(s) administrative(s) en attente"]})}),n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Employ"}),n.jsx("th",{children:"Dmarche"}),n.jsx("th",{children:"Commentaire"})]})}),n.jsx("tbody",{children:o.map((g,P)=>n.jsxs("tr",{children:[n.jsx("td",{style:{fontWeight:"bold"},children:g.employeeName}),n.jsx("td",{children:n.jsx("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",fontSize:"0.9rem",fontWeight:"500"},children:g.taskLabel})}),n.jsx("td",{style:{color:"#6c757d",fontStyle:"italic"},children:g.comment||"-"})]},P))})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:" Statistiques gnrales"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("h4",{children:e.length}),n.jsx("p",{children:"Total employs"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("h4",{children:e.filter(g=>g.isActive).length}),n.jsx("p",{children:"Employs actifs"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("h4",{children:p.length}),n.jsx("p",{children:"En arrt maladie"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("h4",{children:b.length}),n.jsx("p",{children:"En congs (8j)"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("h4",{children:E.length}),n.jsx("p",{children:"Employs mineurs"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("h4",{children:D.length}),n.jsx("p",{children:"Apprentis"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#fff3cd",borderRadius:"8px",border:"2px solid #ffc107"},children:[n.jsx("h4",{style:{color:"#856404"},children:o.length}),n.jsx("p",{style:{color:"#856404"},children:"Obligations lgales"})]})]})]})]})},_t=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],cj=["vendeuse","apprenti","Apprenti Vendeuse","manager","responsable"],dj=["vendeuse","Apprenti Vendeuse","manager","responsable"],Bt=Ot(),uj=e=>!e||typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1),fu=e=>{if(!(e instanceof Date)||Number.isNaN(e.getTime()))return"";const t=new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return uj(t.format(e))},mj=e=>{if(!(e instanceof Date)||Number.isNaN(e.getTime()))return null;const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=(t.getUTCDay()+6)%7;t.setUTCDate(t.getUTCDate()-s+3);const r=new Date(Date.UTC(t.getUTCFullYear(),0,4)),a=t-r;return 1+Math.round(a/(7*24*60*60*1e3))},ir=e=>{const t=e instanceof Date&&!Number.isNaN(e.getTime())?new Date(e):new Date,s=new Date(t),a=1-(s.getDay()===0?7:s.getDay());s.setDate(s.getDate()+a),s.setHours(0,0,0,0);const l=new Date(s);return l.setDate(s.getDate()+6),l.setHours(23,59,59,999),{start:s,end:l}},Na=e=>!(e instanceof Date)||Number.isNaN(e.getTime())?"":new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0],pj=e=>{const t=new Date(e);if(Number.isNaN(t.getTime()))return null;const s=(t.getDay()+6)%7;return _t[s]},hj=()=>{const[s,r]=h.useState([]),[a,l]=h.useState({}),[o,i]=h.useState(""),[c,d]=h.useState(new Date().getFullYear()),[m,f]=h.useState({}),[N,C]=h.useState(!1),[x,j]=h.useState(0),[v,u]=h.useState(0),[p,b]=h.useState({}),[E,D]=h.useState(null),[F,R]=h.useState(""),[g,P]=h.useState({vert:100,jaune:80,orange:50}),[$,T]=h.useState([]),[w,A]=h.useState(!1),[S,V]=h.useState({title:"",content:"",startDate:"",endDate:"",untilRead:!1,recipientsType:"all",selectedEmployeeIds:[]}),[y,z]=h.useState(!1),[M,I]=h.useState(null),q=h.useMemo(()=>s.filter(L=>cj.includes(L.role)),[s]),U=h.useMemo(()=>{const L=new Set(dj.map(B=>B.toLowerCase()));return s.filter(B=>L.has((B.role||"").toLowerCase()))},[s]),W=h.useMemo(()=>{const L=q.reduce((B,J)=>{const ne=p[J._id]||{},fe=_t.reduce((he,Ce)=>ne[Ce]?he+1:he,0);return B+fe},0);return L===0&&!Object.values(p).some(J=>J&&typeof J=="object"&&Object.values(J).some(Boolean))&&E!=null&&E.totalPresences?E.totalPresences:L},[q,p,E]),te=W>0?Math.ceil(x/W):0,ae=W>0?Math.ceil(v/W):0,me=x,ue=v,pe=h.useMemo(()=>{if(!(E!=null&&E.dailySales))return{};const L={};return E.dailySales.forEach(B=>{var Ue;const J=((Ue=B.employeeId)==null?void 0:Ue._id)||B.employeeId;if(!J)return;L[J]||(L[J]={totalCartes:0,totalPromo:0,totalChallenge:0,perDay:{}});const ne=parseInt(B.nbCartesFid,10)||0,fe=parseInt(B.nbPromo,10)||0,he=parseInt(B.nbChallenge,10)||0;L[J].totalCartes+=ne,L[J].totalPromo+=fe,L[J].totalChallenge+=he;const Ce=pj(B.date);if(Ce){const we=L[J].perDay[Ce]||{cartes:0,promo:0,challenge:0};we.cartes+=ne,we.promo+=fe,we.challenge+=he,L[J].perDay[Ce]=we}}),L},[E]),be=(E==null?void 0:E.totalCartesFid)??0,Ie=(E==null?void 0:E.totalPromo)??0,G=(E==null?void 0:E.totalChallenge)??0,de=me>0?Math.round(be/me*100):0,k=ue>0?Math.round(Ie/ue*100):0,K=me>0?be>=me:be>0,X=ue>0?Ie>=ue:Ie>0,le=h.useMemo(()=>{const L=F?new Date(F):E!=null&&E.weekStart?new Date(E.weekStart):new Date,{start:B,end:J}=ir(L);return{weekNumber:mj(B),startLabel:fu(B),endLabel:fu(J)}},[F,E]);h.useEffect(()=>{const L=new Date,B=String(L.getMonth()+1).padStart(2,"0"),J=L.getFullYear();i(B),d(J);const{start:ne}=ir(L);R(Na(ne))},[]),h.useEffect(()=>{F&&V(L=>({...L,startDate:L.startDate||F}))},[F]);const se=h.useCallback((L={})=>{const B={};return q.forEach(J=>{const ne=L[J._id],fe={},he=ne&&Object.keys(ne).length>0;_t.forEach(Ce=>{he?fe[Ce]=!!ne[Ce]:fe[Ce]=!0}),B[J._id]=fe}),B},[q]);h.useEffect(()=>{Zr(),Pe()},[]);const ce=h.useCallback(async L=>{if(L)try{const B=new URL(`${Bt}/daily-sales/objectives`);B.searchParams.set("weekStart",L);const J=await fetch(B.toString());if(J.ok){const ne=await J.json();ne.success?(u(ne.data.objectifPromo||0),j(ne.data.objectifCartesFid||0),b(se(ne.data.presences||{}))):b(se({}))}else b(se({}))}catch(B){console.error("Erreur chargement objectifs:",B),b(se({}))}},[se]),re=h.useCallback(async L=>{if(L)try{const B=new URL(`${Bt}/daily-sales/weekly`);B.searchParams.set("weekStart",L);const J=await fetch(B.toString());if(J.ok){const ne=await J.json();ne.success&&D(ne.data)}}catch(B){console.error("Erreur chargement stats hebdo:",B)}},[]);h.useEffect(()=>{F&&(b(se({})),ce(F),re(F))},[F,ce,re,se]);const Pe=async()=>{try{const L=await fetch(`${Bt}/parameters`);if(L.ok){const B=await L.json(),J=B.find(he=>he.name==="margeVert"),ne=B.find(he=>he.name==="margeJaune"),fe=B.find(he=>he.name==="margeOrange");P({vert:(J==null?void 0:J.kmValue)||100,jaune:(ne==null?void 0:ne.kmValue)||80,orange:(fe==null?void 0:fe.kmValue)||50})}}catch(L){console.error("Erreur chargement marges:",L)}},Te=h.useCallback(async()=>{A(!0);try{const L=await fetch(`${Bt}/employee-messages`);if(L.ok){const B=await L.json();T(Array.isArray(B.data)?B.data:[])}}catch(L){console.error("Erreur chargement messages salaris:",L)}finally{A(!1)}},[]);h.useEffect(()=>{Te()},[Te]);const Se=(L,B)=>{V(J=>{const ne={...J,[L]:B};return L==="recipientsType"&&B==="all"&&(ne.selectedEmployeeIds=[]),L==="untilRead"&&B&&(ne.endDate=""),ne})},ge=L=>{U.some(J=>J._id===L)&&V(J=>{const ne=J.selectedEmployeeIds.includes(L);return{...J,selectedEmployeeIds:ne?J.selectedEmployeeIds.filter(fe=>fe!==L):[...J.selectedEmployeeIds,L]}})};h.useEffect(()=>{if(S.recipientsType!=="selected")return;const L=new Set(U.map(B=>B._id));V(B=>{if(B.recipientsType!=="selected")return B;const J=B.selectedEmployeeIds.filter(ne=>L.has(ne));return J.length===B.selectedEmployeeIds.length?B:{...B,selectedEmployeeIds:J}})},[U,S.recipientsType]);const xe=(L=!1)=>{V(B=>({title:"",content:"",startDate:F||Na(new Date),endDate:"",untilRead:!1,recipientsType:L?B.recipientsType:"all",selectedEmployeeIds:L&&B.recipientsType==="selected"?B.selectedEmployeeIds:[]}))},ct=async L=>{if(L.preventDefault(),!S.content||!S.content.trim()){alert("Le message est obligatoire");return}if(S.recipientsType==="selected"&&S.selectedEmployeeIds.length===0){alert("Slectionnez au moins un salari");return}try{const B=await fetch(`${Bt}/employee-messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:S.title,content:S.content,startDate:S.startDate||F,endDate:S.untilRead?null:S.endDate||null,untilRead:S.untilRead,recipientsType:S.recipientsType,selectedEmployeeIds:S.recipientsType==="selected"?S.selectedEmployeeIds:[]})});if(!B.ok){const J=await B.json();throw new Error(J.message||"Erreur lors de l'enregistrement du message")}xe(!0),await Te(),alert("Message enregistr avec succs")}catch(B){console.error("Erreur enregistrement message:",B),alert(B.message)}},At=async L=>{if(window.confirm("Supprimer ce message ?"))try{const B=await fetch(`${Bt}/employee-messages/${L}`,{method:"DELETE"});if(!B.ok){const J=await B.json();throw new Error(J.message||"Suppression impossible")}await Te()}catch(B){console.error("Erreur suppression message:",B),alert(B.message)}},Ze=async()=>{try{if(!F){alert("Veuillez slectionner une semaine.");return}const L=ds(),B=await fetch(`${Bt}/daily-sales/objectives`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({objectifPromo:v,objectifCartesFid:x,presences:L,weekStart:F})});if(B.ok)alert("Objectifs hebdomadaires enregistrs avec succs !"),await Promise.all([ce(F),re(F)]);else{const J=await B.json().catch(()=>null),ne=(J==null?void 0:J.error)||(J==null?void 0:J.message)||"Erreur lors de la sauvegarde";throw new Error(ne)}}catch(L){console.error("Erreur sauvegarde objectifs:",L),alert(L.message||"Erreur lors de la sauvegarde")}},$t=(L,B)=>{b(J=>{var ne;return{...J,[L]:{...J[L],[B]:!((ne=J[L])!=null&&ne[B])}}})},Nt=h.useCallback(L=>{b(B=>{const J=B[L]||{},fe=!_t.every(Ce=>J[Ce]),he={};return _t.forEach(Ce=>{he[Ce]=fe}),{...B,[L]:he}})},[]),ds=h.useCallback(()=>{const L={};return q.forEach(B=>{const J=p[B._id]||{},ne={};_t.forEach(fe=>{ne[fe]=!!J[fe]}),L[B._id]=ne}),L},[q,p]),wt=h.useCallback(L=>{const B=F?new Date(F):new Date;if(Number.isNaN(B.getTime()))return;const{start:J}=ir(B);J.setDate(J.getDate()+L*7);const{start:ne}=ir(J);R(Na(ne))},[F]),Fl=h.useCallback(L=>{const{value:B}=L.target;if(!B)return;const J=new Date(B);if(Number.isNaN(J.getTime()))return;const{start:ne}=ir(J);R(Na(ne))},[]);h.useEffect(()=>{q.length!==0&&b(L=>{const B=se(L),J=Object.keys(L),ne=Object.keys(B);return ne.length!==J.length||ne.some(he=>{const Ce=L[he];return Ce?_t.some(Ue=>B[he][Ue]!==!!Ce[Ue]):!0})?B:L})},[q,se]);const Zr=async()=>{try{const L=await fetch(`${Bt}/employees`);if(L.ok){const B=await L.json();let J=[];Array.isArray(B)?J=B:B.success&&Array.isArray(B.data)?J=B.data:B.employees&&Array.isArray(B.employees)&&(J=B.employees),r(J),console.log(" Employs chargs pour SalesStats:",J.length,J);const ne={};J.forEach(fe=>{ne[fe._id]={caNetHt:0,nbClients:0,panierMoyen:0,nbMenus:0,nbCartesFid:0,nbAvisPositifs:0,nbAvisNegatifs:0}}),l(ne)}}catch(L){console.error("Erreur lors du chargement des employs:",L)}},rn=(L,B,J)=>{l(ne=>({...ne,[L]:{...ne[L],[B]:parseFloat(J)||0}}))},ea=L=>L.caNetHt+L.nbCartesFid*500+L.nbAvisPositifs*100-L.nbAvisNegatifs*300,Ol=async()=>{C(!0);try{const L={month:parseInt(o),year:c,salesData:a},B=await fetch(`${Bt}/sales-stats`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(B.ok){const J=await B.json();console.log(" Donnes sauvegardes:",J),await Gt(),await Js(),alert("Donnes de vente sauvegardes avec succs !")}else{const J=await B.json();console.error(" Erreur API:",J),alert(`Erreur lors de la sauvegarde: ${J.error||"Erreur inconnue"}`)}}catch(L){console.error("Erreur lors de la sauvegarde:",L),alert("Erreur lors de la sauvegarde")}finally{C(!1)}},Gt=h.useCallback(async()=>{try{const L=await fetch(`${Bt}/sales-stats/period/${o}/${c}`);if(L.ok){const B=await L.json();if(B.success&&B.data&&B.data.salesData){const J={},ne={};s.forEach(fe=>{ne[fe.name]=fe._id}),Object.keys(B.data.salesData).forEach(fe=>{const he=B.data.salesData[fe],Ce=he.employeeName,Ue=ne[Ce];Ue&&(J[Ue]={caNetHt:he.caNetHt||0,nbClients:he.nbClients||0,panierMoyen:he.panierMoyen||0,nbPromo:he.nbPromo||he.nbMenus||0,nbCartesFid:he.nbCartesFid||0,nbAvisPositifs:he.nbAvisPositifs||0,nbAvisNegatifs:he.nbAvisNegatifs||0})}),l(J),console.log(" Donnes recharges par nom:",J)}}}catch(L){console.error("Erreur lors du chargement des donnes de la priode:",L)}},[o,c]);h.useEffect(()=>{s.length>0&&o&&c&&Gt()},[s,o,c,Gt]);const Js=h.useCallback(async()=>{try{const L=await fetch(`${Bt}/sales-stats/monthly/${c}`);if(L.ok){const B=await L.json();B.success&&f(B.data||{})}}catch(L){console.error("Erreur lors du chargement des stats mensuelles:",L)}},[c]);h.useEffect(()=>{c&&Js()},[c,Js]),h.useEffect(()=>{o&&c&&(l({}),Gt())},[o,c,Gt]);const us=L=>["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"][parseInt(L)-1],Ks=()=>Array.from({length:8},(L,B)=>{const J=new Date().getFullYear()-3+B;return n.jsx("option",{value:J,children:J},J)});return n.jsxs("div",{className:"sales-stats-container",children:[n.jsxs("div",{className:"sales-stats-header",children:[n.jsx("h1",{children:" Statistiques de Vente"}),n.jsxs("div",{className:"period-selector",children:[n.jsx("select",{value:o,onChange:L=>i(L.target.value),className:"month-select",children:Array.from({length:12},(L,B)=>n.jsx("option",{value:String(B+1).padStart(2,"0"),children:us(String(B+1).padStart(2,"0"))},B+1))}),n.jsx("select",{value:c,onChange:L=>d(parseInt(L.target.value)),className:"year-select",children:Ks()}),n.jsx("button",{onClick:()=>{l({}),Gt()},className:"refresh-button",title:"Actualiser les donnes du mois slectionn",children:" Actualiser"})]})]}),n.jsxs("div",{className:"sales-stats-content",children:[n.jsxs("div",{className:"sales-form-section",children:[n.jsx("h2",{children:" Objectifs Hebdomadaires"}),n.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"20px",flexWrap:"wrap",alignItems:"flex-end"},children:[n.jsxs("div",{className:"week-selector-block",children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:600},children:"Semaine  planifier :"}),n.jsxs("div",{className:"week-selector-controls",children:[n.jsx("button",{type:"button",onClick:()=>wt(-1),className:"week-nav-button",title:"Semaine prcdente",children:""}),n.jsx("input",{type:"date",value:F,onChange:Fl,className:"week-date-input"}),n.jsx("button",{type:"button",onClick:()=>wt(1),className:"week-nav-button",title:"Semaine suivante",children:""})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Objectif Hebdomadaire total Carte Fidlit :"}),n.jsx("input",{type:"number",value:x,onChange:L=>j(parseFloat(L.target.value)||0),style:{padding:"10px",borderRadius:"8px",border:"2px solid #667eea",width:"200px"},min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600"},children:"Objectif Hebdomadaire total Quinzaine Promo :"}),n.jsx("input",{type:"number",value:v,onChange:L=>u(parseFloat(L.target.value)||0),style:{padding:"10px",borderRadius:"8px",border:"2px solid #667eea",width:"200px"},min:"0"})]}),n.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:n.jsx("button",{onClick:Ze,style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:" Enregistrer"})})]}),n.jsxs("div",{style:{marginTop:"30px"},children:[n.jsx("h3",{style:{marginBottom:"15px"},children:" Prsences des Vendeuses"}),n.jsxs("div",{className:"week-info-bar",children:[n.jsx("div",{className:"week-info-text",children:le.weekNumber?`Semaine ${le.weekNumber}  du ${le.startLabel} au ${le.endLabel}`:`Semaine du ${le.startLabel} au ${le.endLabel}`}),n.jsxs("div",{className:"weekly-objective-summary",children:[n.jsxs("span",{className:"objective-pill objective-pill-fid",children:[" ",te," / prsence"]}),n.jsxs("span",{className:"objective-pill objective-pill-promo",children:[" ",ae," / prsence"]}),n.jsxs("span",{className:"objective-pill objective-pill-count",children:[" ",W," prsence",W>1?"s":""]})]})]}),E&&n.jsxs("div",{className:"weekly-performance-quick-summary",children:[n.jsxs("span",{className:`performance-pill ${K?"success":"danger"}`,children:[" Cartes : ",be," / ",me," (",me>0?`${de}%`:"",")"]}),n.jsxs("span",{className:`performance-pill ${X?"success":"danger"}`,children:[" Promo : ",Ie," / ",ue," (",ue>0?`${k}%`:"",")"]}),n.jsxs("span",{className:"performance-pill",children:[" Challenge : ",G]})]}),n.jsxs("table",{className:"presence-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"presence-header-name",children:"Vendeuse"}),n.jsx("th",{className:"presence-master-header",children:"Semaine"}),_t.map(L=>n.jsx("th",{className:"presence-day-header",children:L},L))]})}),n.jsx("tbody",{children:q.map(L=>{const B=p[L._id]||{},J=_t.reduce((et,zt)=>B[zt]?et+1:et,0),ne=_t.every(et=>B[et]),fe=J>0&&!ne,he=J*te,Ce=J*ae,Ue=pe[L._id]||{totalCartes:0,totalPromo:0,totalChallenge:0,perDay:{}},we=Ue.totalCartes||0,an=Ue.totalPromo||0,vn=Ue.totalChallenge||0,ta=he>0?Math.round(we/he*100):0,Hn=Ce>0?Math.round(an/Ce*100):0,$l=he>0?we>=he:we>0,zl=Ce>0?an>=Ce:an>0;return n.jsxs("tr",{children:[n.jsxs("td",{className:"presence-name-cell",children:[n.jsx("div",{className:"presence-employee-name",style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>{I(L),z(!0)},title:"Cliquer pour voir les dtails jour par jour",children:L.name}),n.jsxs("div",{className:"employee-weekly-targets",children:[n.jsxs("span",{className:"target-badge target-fid",children:[" Carte : ",he]}),n.jsxs("span",{className:"target-badge target-promo",children:[" Promo : ",Ce]}),n.jsxs("span",{className:"target-badge target-days",children:[" ",J," jour",J>1?"s":""]}),n.jsxs("span",{className:`target-badge target-result ${$l?"success":"danger"}`,children:[" Ralis : ",we,"/",he||0,he>0?` (${ta}%)`:""]}),n.jsxs("span",{className:`target-badge target-result ${zl?"success":"danger"}`,children:[" Ralis : ",an,"/",Ce||0,Ce>0?` (${Hn}%)`:""]}),n.jsxs("span",{className:"target-badge target-challenge",children:[" Challenge : ",vn]})]})]}),n.jsx("td",{className:"presence-master-cell",children:n.jsx("input",{type:"checkbox",checked:ne&&J>0,ref:et=>{et&&(et.indeterminate=fe)},onChange:()=>Nt(L._id)})}),_t.map(et=>n.jsx("td",{className:"day-checkbox",children:n.jsxs("div",{className:"presence-day-wrapper",children:[n.jsx("input",{type:"checkbox",checked:!!B[et],onChange:()=>$t(L._id,et)}),(()=>{var Qs;const zt=((Qs=Ue.perDay)==null?void 0:Qs[et])||{cartes:0,promo:0,challenge:0},Ys=B[et]?te:0,Gs=B[et]?ae:0,na=Ys>0||Gs>0;let ms="neutral";return na?ms=zt.cartes>=Ys&&zt.promo>=Gs?"success":"danger":(zt.cartes>0||zt.promo>0)&&(ms="info"),n.jsxs("span",{className:`day-metrics ${ms}`,children:[zt.cartes,"/",zt.promo,n.jsxs("span",{style:{marginLeft:"4px",color:"#9c27b0",fontWeight:"bold"},children:["",zt.challenge||0]})]})})()]})},et))]},L._id)})})]})]})]}),n.jsxs("div",{className:"sales-form-section",children:[n.jsx("h2",{children:" Messages aux salaris"}),n.jsxs("form",{className:"message-form",onSubmit:ct,children:[n.jsxs("div",{className:"message-form-grid",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Titre du message"}),n.jsx("input",{type:"text",value:S.title,onChange:L=>Se("title",L.target.value),placeholder:"Information importante",maxLength:120})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Dbut d'affichage"}),n.jsx("input",{type:"date",value:S.startDate||"",onChange:L=>Se("startDate",L.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Fin d'affichage"}),n.jsx("input",{type:"date",value:S.untilRead?"":S.endDate||"",onChange:L=>Se("endDate",L.target.value),disabled:S.untilRead,min:S.startDate||void 0}),n.jsxs("label",{className:"inline-checkbox",children:[n.jsx("input",{type:"checkbox",checked:S.untilRead,onChange:L=>Se("untilRead",L.target.checked)}),"Afficher jusqu' lecture"]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Destinataires"}),n.jsxs("div",{className:"recipient-options",children:[n.jsxs("label",{children:[n.jsx("input",{type:"radio",name:"recipientsType",value:"all",checked:S.recipientsType==="all",onChange:L=>Se("recipientsType",L.target.value)}),"Tous les salaris"]}),n.jsxs("label",{children:[n.jsx("input",{type:"radio",name:"recipientsType",value:"selected",checked:S.recipientsType==="selected",onChange:L=>Se("recipientsType",L.target.value)}),"Salaris slectionns"]})]})]})]}),S.recipientsType==="selected"&&n.jsx("div",{className:"recipient-select",children:U.length===0?n.jsx("div",{className:"message-empty",children:"Aucun salari ligible pour recevoir un message cibl."}):U.map(L=>n.jsxs("label",{className:"recipient-item",children:[n.jsx("input",{type:"checkbox",checked:S.selectedEmployeeIds.includes(L._id),onChange:()=>ge(L._id)}),n.jsx("span",{children:(()=>{var fe;const B=((fe=L.name)==null?void 0:fe.trim().split(/\s+/))||[],J=B[0]||L.name,ne=B.length>1?`${B[B.length-1][0]}.`:"";return`${J} ${ne}`.trim()})()})]},L._id))}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Message"}),n.jsx("textarea",{value:S.content,onChange:L=>Se("content",L.target.value),rows:4,placeholder:"Votre message pour les salaris (instructions, flicitations, rappel important...)",maxLength:2e3})]}),n.jsxs("div",{className:"message-form-actions",children:[n.jsx("button",{type:"submit",className:"btn-primary",children:" Enregistrer le message"}),n.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>xe(!1),children:" Rinitialiser"})]})]}),n.jsx("div",{className:"message-list",children:w?n.jsx("div",{className:"message-empty",children:"Chargement des messages..."}):$.length===0?n.jsx("div",{className:"message-empty",children:"Aucun message dfini pour l'instant."}):$.map(L=>{const B=L.startDate?new Date(L.startDate).toLocaleDateString("fr-FR"):"",J=L.endDate?new Date(L.endDate).toLocaleDateString("fr-FR"):L.untilRead?"Jusqu' lecture":"Sans limite",ne=L.recipientsType==="all"?"Tous les salaris":L.selectedEmployees&&L.selectedEmployees.length>0?L.selectedEmployees.map(fe=>`${fe.name}${fe.saleCode?` (${fe.saleCode})`:""}`).join(", "):"Slection manuelle";return n.jsxs("div",{className:"message-card",children:[n.jsxs("div",{className:"message-card-header",children:[n.jsxs("div",{children:[n.jsx("h3",{children:L.title||"Information"}),n.jsxs("div",{className:"message-meta",children:[n.jsxs("span",{children:["Du ",B]}),n.jsxs("span",{children:["Au ",J]}),n.jsx("span",{children:ne})]})]}),n.jsx("button",{type:"button",className:"message-delete",onClick:()=>At(L._id),children:""})]}),n.jsx("p",{className:"message-content",children:L.content}),L.untilRead&&n.jsx("div",{className:"message-note",children:"Ce message reste affich tant que le salari ne l'a pas confirm comme lu."})]},L._id)})})]}),n.jsxs("div",{className:"sales-form-section",children:[n.jsx("h2",{children:" Saisie des donnes mensuelles"}),n.jsxs("div",{className:"sales-form",children:[n.jsxs("table",{className:"sales-form-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Vendeuse"}),n.jsx("th",{children:"CA Net HT"}),n.jsx("th",{children:"Nb Clients"}),n.jsx("th",{children:"Panier Moyen"}),n.jsx("th",{children:"Nb Promo"}),n.jsx("th",{children:"Nb Cartes Fid"}),n.jsx("th",{children:"Nb Avis +"}),n.jsx("th",{children:"Nb Avis -"}),n.jsx("th",{children:"Score"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:(console.log(" Rendu tableau SalesStats - employs:",s.length,s),Array.isArray(s)&&s.length>0?s.map(L=>{var B,J,ne,fe,he,Ce,Ue;return n.jsxs("tr",{children:[n.jsx("td",{className:"employee-name",children:L.name}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((B=a[L._id])==null?void 0:B.caNetHt)||0,onChange:we=>rn(L._id,"caNetHt",we.target.value),placeholder:"0",min:"0",step:"0.01"})}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((J=a[L._id])==null?void 0:J.nbClients)||0,onChange:we=>rn(L._id,"nbClients",we.target.value),placeholder:"0",min:"0"})}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((ne=a[L._id])==null?void 0:ne.panierMoyen)||0,onChange:we=>rn(L._id,"panierMoyen",we.target.value),placeholder:"0",min:"0",step:"0.01"})}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((fe=a[L._id])==null?void 0:fe.nbPromo)||0,onChange:we=>rn(L._id,"nbPromo",we.target.value),placeholder:"0",min:"0"})}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((he=a[L._id])==null?void 0:he.nbCartesFid)||0,onChange:we=>rn(L._id,"nbCartesFid",we.target.value),placeholder:"0",min:"0"})}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((Ce=a[L._id])==null?void 0:Ce.nbAvisPositifs)||0,onChange:we=>rn(L._id,"nbAvisPositifs",we.target.value),placeholder:"0",min:"0"})}),n.jsx("td",{children:n.jsx("input",{type:"number",value:((Ue=a[L._id])==null?void 0:Ue.nbAvisNegatifs)||0,onChange:we=>rn(L._id,"nbAvisNegatifs",we.target.value),placeholder:"0",min:"0"})}),n.jsx("td",{className:"score-cell",children:n.jsx("strong",{children:ea(a[L._id]||{}).toFixed(0)})}),n.jsx("td",{className:"actions-cell",children:n.jsx("button",{onClick:()=>{if(window.confirm(` tes-vous sr de vouloir effacer les donnes de ${L.name} pour ce mois ?`)){const we={...a};we[L._id]={caNetHt:0,nbClients:0,panierMoyen:0,nbPromo:0,nbCartesFid:0,nbAvisPositifs:0,nbAvisNegatifs:0},l(we)}},className:"delete-employee-button",title:`Effacer les donnes de ${L.name}`,children:""})})]},L._id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"10",style:{textAlign:"center",padding:"20px"},children:"Aucun employ trouv"})}))})]}),n.jsx("div",{className:"form-actions",children:n.jsx("button",{onClick:Ol,disabled:N,className:"save-button",children:N?" Sauvegarde...":" Sauvegarder"})})]})]}),n.jsxs("div",{className:"ranking-section",children:[n.jsx("h2",{children:" Classement des Vendeuses"}),n.jsx("div",{className:"ranking-header",children:n.jsxs("div",{className:"ranking-selectors",children:[n.jsxs("div",{className:"selector-group",children:[n.jsx("label",{children:"Mois :"}),n.jsx("select",{value:o,onChange:L=>i(L.target.value),className:"month-select-ranking",children:Array.from({length:12},(L,B)=>n.jsx("option",{value:String(B+1).padStart(2,"0"),children:us(String(B+1).padStart(2,"0"))},B+1))})]}),n.jsxs("div",{className:"selector-group",children:[n.jsx("label",{children:"Anne :"}),n.jsx("select",{value:c,onChange:L=>d(parseInt(L.target.value)),className:"year-select-ranking",children:Ks()})]})]})}),n.jsxs("div",{className:"ranking-table",children:[n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Rang"}),n.jsx("th",{children:"Vendeuse"}),n.jsx("th",{children:"Score"}),n.jsx("th",{children:"CA Net HT"}),n.jsx("th",{children:"Cartes Fid"}),n.jsx("th",{children:"Avis +"}),n.jsx("th",{children:"Avis -"})]})}),n.jsx("tbody",{children:s.map(L=>{const B=a[L._id]||{},J=ea(B);return{emp:L,data:B,score:J}}).sort((L,B)=>B.score-L.score).map(({emp:L,data:B,score:J},ne)=>n.jsxs("tr",{className:ne<3?"top-three":"",children:[n.jsxs("td",{className:"rank",children:["#",ne+1]}),n.jsx("td",{className:"employee-name",children:L.name}),n.jsx("td",{className:"score",children:n.jsx("strong",{children:J.toFixed(0)})}),n.jsxs("td",{children:[B.caNetHt||0,""]}),n.jsx("td",{children:B.nbCartesFid||0}),n.jsx("td",{className:"positive",children:B.nbAvisPositifs||0}),n.jsx("td",{className:"negative",children:B.nbAvisNegatifs||0})]},L._id))})]}),n.jsxs("div",{className:"annual-total",children:[n.jsxs("h3",{children:[" Total Anne ",c]}),n.jsxs("div",{className:"total-stats",children:[n.jsxs("div",{className:"total-item",children:[n.jsx("span",{className:"total-label",children:"CA Total :"}),n.jsxs("span",{className:"total-value",children:[s.reduce((L,B)=>{var J;return L+(((J=a[B._id])==null?void 0:J.caNetHt)||0)},0).toFixed(2),""]})]}),n.jsxs("div",{className:"total-item",children:[n.jsx("span",{className:"total-label",children:"Cartes Fid Total :"}),n.jsx("span",{className:"total-value",children:s.reduce((L,B)=>{var J;return L+(((J=a[B._id])==null?void 0:J.nbCartesFid)||0)},0)})]}),n.jsxs("div",{className:"total-item",children:[n.jsx("span",{className:"total-label",children:"Avis + Total :"}),n.jsx("span",{className:"total-value positive",children:s.reduce((L,B)=>{var J;return L+(((J=a[B._id])==null?void 0:J.nbAvisPositifs)||0)},0)})]}),n.jsxs("div",{className:"total-item",children:[n.jsx("span",{className:"total-label",children:"Avis - Total :"}),n.jsx("span",{className:"total-value negative",children:s.reduce((L,B)=>{var J;return L+(((J=a[B._id])==null?void 0:J.nbAvisNegatifs)||0)},0)})]})]})]})]})]}),n.jsxs("div",{className:"monthly-comparison-section",children:[n.jsx("h2",{children:" Comparaison sur 12 mois"}),n.jsx("div",{className:"monthly-comparison-header",children:n.jsxs("div",{className:"year-selector",children:[n.jsx("label",{children:"Anne :"}),n.jsx("select",{value:c,onChange:L=>d(parseInt(L.target.value)),className:"year-select-compare",children:Ks()})]})}),n.jsx("div",{className:"monthly-stats",children:n.jsxs("table",{children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Mois"}),n.jsx("th",{children:"CA Total"}),n.jsx("th",{children:"Clients Total"}),n.jsx("th",{children:"Cartes Fid Total"}),n.jsx("th",{children:"Avis + Total"}),n.jsx("th",{children:"Avis - Total"})]})}),n.jsx("tbody",{children:Array.from({length:12},(L,B)=>{const J=String(B+1).padStart(2,"0"),ne=m[J]||{};return n.jsxs("tr",{className:J===o?"current-month":"",children:[n.jsx("td",{children:us(J)}),n.jsxs("td",{children:[ne.totalCA||0,""]}),n.jsx("td",{children:ne.totalClients||0}),n.jsx("td",{children:ne.totalCartesFid||0}),n.jsx("td",{className:"positive",children:ne.totalAvisPositifs||0}),n.jsx("td",{className:"negative",children:ne.totalAvisNegatifs||0})]},J)})})]})})]}),E&&n.jsxs("div",{className:"sales-form-section",children:[n.jsx("h2",{children:" Cumul Hebdomadaire vs Objectifs"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginTop:"20px"},children:[n.jsxs("div",{style:{padding:"20px",borderRadius:"15px",background:E.colorCartesFid==="green"?"#d4edda":E.colorCartesFid==="yellow"?"#fff3cd":E.colorCartesFid==="orange"?"#ffeaa7":"#f8d7da",border:`3px solid ${E.colorCartesFid==="green"?"#28a745":E.colorCartesFid==="yellow"?"#ffc107":E.colorCartesFid==="orange"?"#ff9800":"#dc3545"}`},children:[n.jsx("h3",{style:{marginBottom:"15px"},children:" Cartes Fidlit"}),n.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"10px"},children:[n.jsx("strong",{children:"Total Semaine :"})," ",E.totalCartesFid]}),n.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"10px"},children:[n.jsx("strong",{children:"Objectif :"})," ",E.objectifCartesFid]}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginTop:"15px"},children:[E.pourcentageCartesFid.toFixed(1),"%"]})]}),n.jsxs("div",{style:{padding:"20px",borderRadius:"15px",background:E.colorPromo==="green"?"#d4edda":E.colorPromo==="yellow"?"#fff3cd":E.colorPromo==="orange"?"#ffeaa7":"#f8d7da",border:`3px solid ${E.colorPromo==="green"?"#28a745":E.colorPromo==="yellow"?"#ffc107":E.colorPromo==="orange"?"#ff9800":"#dc3545"}`},children:[n.jsx("h3",{style:{marginBottom:"15px"},children:" Promo Quinzaine"}),n.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"10px"},children:[n.jsx("strong",{children:"Total Semaine :"})," ",E.totalPromo]}),n.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"10px"},children:[n.jsx("strong",{children:"Objectif :"})," ",E.objectifPromo]}),n.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginTop:"15px"},children:[E.pourcentagePromo.toFixed(1),"%"]})]})]})]})]}),y&&M&&n.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>z(!1),children:n.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",padding:"2rem",borderRadius:"8px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[n.jsxs("h2",{children:[" Dtails jour par jour - ",M.name]}),n.jsx("button",{onClick:()=>z(!1),style:{background:"none",border:"none",fontSize:"2rem",cursor:"pointer",color:"#666"},children:""})]}),n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Semaine :"})," ",le.startLabel," au ",le.endLabel]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Objectif par prsence :"}),"  ",te," cartes fidlit /  ",ae," promo quinzaine"]})]}),(()=>{const L=pe[M._id]||{totalCartes:0,totalPromo:0,totalChallenge:0,perDay:{}};return n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"1rem"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[n.jsx("th",{style:{padding:"0.75rem",textAlign:"left",border:"1px solid #dee2e6"},children:"Jour"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:"Prsent"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:" Cartes Fidlit"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:" Promo Quinzaine"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:" Challenge"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:"Statut"})]})}),n.jsx("tbody",{children:_t.map(B=>{var an,vn;const J=((an=p[M._id])==null?void 0:an[B])||!1,ne=((vn=L.perDay)==null?void 0:vn[B])||{cartes:0,promo:0,challenge:0},fe=J?te:0,he=J?ae:0,Ce=fe>0?ne.cartes>=fe:!1,Ue=he>0?ne.promo>=he:!1,we=J?Ce&&Ue?"success":"danger":ne.cartes>0||ne.promo>0?"info":"neutral";return n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"0.75rem",border:"1px solid #dee2e6",fontWeight:"bold"},children:B}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:J?"":""}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:[n.jsx("strong",{children:ne.cartes})," / ",fe]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:[n.jsx("strong",{children:ne.promo})," / ",he]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:n.jsx("strong",{children:ne.challenge||0})}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6",color:we==="success"?"#28a745":we==="danger"?"#dc3545":we==="info"?"#17a2b8":"#6c757d",fontWeight:"bold"},children:we==="success"?" Atteint":we==="danger"?" Non atteint":we==="info"?" Donnes sans prsence":""})]},B)})}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{backgroundColor:"#f8f9fa",fontWeight:"bold"},children:[n.jsx("td",{style:{padding:"0.75rem",border:"1px solid #dee2e6"},children:"Total"}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:[Object.values(p[M._id]||{}).filter(Boolean).length," jour(s)"]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:L.totalCartes||0}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:L.totalPromo||0}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:L.totalChallenge||0}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:""})]})})]})})(),n.jsx("div",{style:{marginTop:"1.5rem",textAlign:"right"},children:n.jsx("button",{onClick:()=>z(!1),style:{padding:"0.5rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Fermer"})})]})})]})},fj=({employees:e})=>{const[t,s]=h.useState("month"),[r,a]=h.useState(new Date().getMonth()+1),[l,o]=h.useState(new Date().getFullYear()),[i,c]=h.useState(()=>{const u=new Date,p=new Date(u);return p.setDate(u.getDate()-u.getDay()+1),p}),[d,m]=h.useState(null),[f,N]=h.useState({total:{absences:0,sickLeave:0,delays:0,total:0},byEmployee:[]}),C=h.useCallback(()=>{try{if(!Array.isArray(e)){console.log(" employees n'est pas un tableau:",typeof e,e),N({total:{absences:0,sickLeave:0,delays:0,total:0},byEmployee:[]});return}let u,p;switch(t){case"year":u=new Date(l,0,1),p=new Date(l,11,31);break;case"month":u=new Date(l,r-1,1),p=new Date(l,r,0);break;case"week":const D=new Date(i);D.setHours(0,0,0,0);const F=new Date(D);F.setDate(D.getDate()+6),F.setHours(23,59,59,999),u=D,p=F;break;default:u=new Date(l,r-1,1),p=new Date(l,r,0)}const b=e.map(D=>{var I,q,U;const F=((I=D.absences)==null?void 0:I.all)||(Array.isArray(D.absences)?D.absences:[]),R=((q=D.sickLeaves)==null?void 0:q.all)||(Array.isArray(D.sickLeaves)?D.sickLeaves:[]),g=((U=D.delays)==null?void 0:U.all)||(Array.isArray(D.delays)?D.delays:[]),P=Array.isArray(F)?F.filter(W=>{if(W.date){const te=new Date(W.date);return te>=u&&te<=p}else if(W.startDate&&W.endDate){const te=new Date(W.startDate),ae=new Date(W.endDate);return te<=p&&ae>=u}return!1}):[];let $=[];const T=new Set,w=new Set,A=W=>{if(W.sickLeaveId){const te=W.sickLeaveId.toString?W.sickLeaveId.toString():String(W.sickLeaveId);return T.has(te)?!0:(T.add(te),!1)}if(W.startDate&&W.endDate){const te=`${new Date(W.startDate).toISOString().split("T")[0]}_${new Date(W.endDate).toISOString().split("T")[0]}`;return w.has(te)?!0:(w.add(te),!1)}return!1},S=F.filter(W=>{const te=W.type||"";if(!(te==="Arrt maladie"||te==="MAL"))return!1;if(W.startDate&&W.endDate){const me=new Date(W.startDate),ue=new Date(W.endDate);if(me<=p&&ue>=u){const pe={startDate:W.startDate,endDate:W.endDate,sickLeaveId:W.sickLeaveId};A(pe)||$.push(pe)}}return!1});if(Array.isArray(R)&&R.forEach(W=>{if(!W.startDate||!W.endDate)return;const te=new Date(W.startDate),ae=new Date(W.endDate);if(te<=p&&ae>=u){const me={startDate:W.startDate,endDate:W.endDate,sickLeaveId:W._id||W.sickLeaveId};A(me)||$.push(me)}}),D.sickLeave&&D.sickLeave.isOnSickLeave){const W=D.sickLeave.startDate?new Date(D.sickLeave.startDate):null,te=D.sickLeave.endDate?new Date(D.sickLeave.endDate):null;if(W&&te&&W<=p&&te>=u){const ae={startDate:D.sickLeave.startDate,endDate:D.sickLeave.endDate,sickLeaveId:D.sickLeave.sickLeaveId};A(ae)||$.push(ae)}}const V=Array.isArray(g)?g.filter(W=>{if(W.date){const te=new Date(W.date);return te>=u&&te<=p}return!1}):[],y=V.reduce((W,te)=>W+(te.duration||0),0),z=$.reduce((W,te)=>{const ae=new Date(te.startDate),me=new Date(te.endDate),ue=ae>u?ae:u,pe=me<p?me:p,be=Math.max(0,Math.ceil((pe-ue)/(1e3*60*60*24))+1);return W+be},0),M=$.length;return{id:D._id,name:D.name,role:D.role,absences:P.length,sickLeave:z,sickLeaveCount:M,delays:V.length,totalDelayMinutes:y,total:P.length+M+V.length,employeeData:D}}),E=b.reduce((D,F)=>({absences:D.absences+F.absences,sickLeave:D.sickLeave+(F.sickLeaveCount||0),delays:D.delays+F.delays,total:D.total+F.total}),{absences:0,sickLeave:0,delays:0,total:0});N({total:E,byEmployee:b})}catch(u){console.error(" Erreur dans calculateAbsenceStats:",u),console.error(" Type d'erreur:",u.name,u.message),console.error(" Stack trace:",u.stack),N({total:{absences:0,sickLeave:0,delays:0,total:0},byEmployee:[]})}},[e,t,r,l,i]);h.useEffect(()=>{C()},[C]);const x=u=>{const p=new Date(Date.UTC(u.getFullYear(),u.getMonth(),u.getDate())),b=p.getUTCDay()||7;p.setUTCDate(p.getUTCDate()+4-b);const E=new Date(Date.UTC(p.getUTCFullYear(),0,1));return Math.ceil(((p-E)/864e5+1)/7)},j=(u,p)=>{const b=new Date(u,0,1+(p-1)*7),E=b.getDay(),D=b;return E<=4?D.setDate(b.getDate()-b.getDay()+1):D.setDate(b.getDate()+8-b.getDay()),D},v=()=>{switch(t){case"year":return`${l}`;case"month":return new Date(l,r-1,1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"});case"week":const p=new Date(i),b=new Date(p);return b.setDate(p.getDate()+6),`Semaine du ${p.toLocaleDateString("fr-FR")} au ${b.toLocaleDateString("fr-FR")}`;default:return new Date(l,r-1,1).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}};return n.jsxs("div",{className:"absence-status",children:[n.jsxs("div",{className:"status-header",children:[n.jsx("h2",{children:" tat des absences"}),n.jsxs("div",{className:"period-selector",children:[n.jsx("button",{className:`period-btn ${t==="month"?"active":""}`,onClick:()=>s("month"),children:"Mois"}),n.jsx("button",{className:`period-btn ${t==="year"?"active":""}`,onClick:()=>s("year"),children:"Anne"}),n.jsx("button",{className:`period-btn ${t==="week"?"active":""}`,onClick:()=>s("week"),children:"Semaine"})]}),n.jsxs("div",{className:"date-selectors",children:[t==="week"&&n.jsxs("div",{className:"date-selector",children:[n.jsx("label",{children:"Semaine"}),n.jsx("input",{type:"week",value:(()=>{const u=i.getFullYear(),p=x(i);return`${u}-W${String(p).padStart(2,"0")}`})(),onChange:u=>{const[p,b]=u.target.value.split("-W"),E=j(parseInt(p),parseInt(b));c(E)},className:"form-control"})]}),(t==="month"||t==="year")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"date-selector",children:[n.jsx("label",{children:"Mois"}),n.jsxs("select",{value:r,onChange:u=>a(parseInt(u.target.value)),className:"form-control",disabled:t==="year",children:[n.jsx("option",{value:1,children:"Janvier"}),n.jsx("option",{value:2,children:"Fvrier"}),n.jsx("option",{value:3,children:"Mars"}),n.jsx("option",{value:4,children:"Avril"}),n.jsx("option",{value:5,children:"Mai"}),n.jsx("option",{value:6,children:"Juin"}),n.jsx("option",{value:7,children:"Juillet"}),n.jsx("option",{value:8,children:"Aot"}),n.jsx("option",{value:9,children:"Septembre"}),n.jsx("option",{value:10,children:"Octobre"}),n.jsx("option",{value:11,children:"Novembre"}),n.jsx("option",{value:12,children:"Dcembre"})]})]}),n.jsxs("div",{className:"date-selector",children:[n.jsx("label",{children:"Anne"}),n.jsxs("select",{value:l,onChange:u=>o(parseInt(u.target.value)),className:"form-control",children:[n.jsx("option",{value:2024,children:"2024"}),n.jsx("option",{value:2025,children:"2025"}),n.jsx("option",{value:2026,children:"2026"})]})]})]})]})]}),n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card total",children:[n.jsx("div",{className:"stat-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{className:"stat-value",children:f.total.total}),n.jsx("p",{className:"stat-label",children:"Total des absences"}),n.jsx("p",{className:"stat-period",children:v()})]})]}),n.jsxs("div",{className:"stat-card maladie",children:[n.jsx("div",{className:"stat-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{className:"stat-value",children:f.total.sickLeave}),n.jsx("p",{className:"stat-label",children:"Arrts maladie"}),n.jsx("p",{className:"stat-period",children:v()})]})]}),n.jsxs("div",{className:"stat-card absence",children:[n.jsx("div",{className:"stat-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{className:"stat-value",children:f.total.absences}),n.jsx("p",{className:"stat-label",children:"Absences"}),n.jsx("p",{className:"stat-period",children:v()})]})]}),n.jsxs("div",{className:"stat-card retard",children:[n.jsx("div",{className:"stat-icon",children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),n.jsxs("div",{className:"stat-content",children:[n.jsx("h3",{className:"stat-value",children:f.total.delays}),n.jsx("p",{className:"stat-label",children:"Retards"}),n.jsx("p",{className:"stat-period",children:v()})]})]})]}),n.jsxs("div",{className:"employee-details",children:[n.jsx("h3",{children:"Dtail par employ"}),f.byEmployee.length>0?n.jsx("div",{className:"employee-stats",children:f.byEmployee.map(u=>{const p=u.employeeData||e.find(b=>{var E,D;return b._id===u.id||((E=b._id)==null?void 0:E.toString())===((D=u.id)==null?void 0:D.toString())});return n.jsxs("div",{className:"employee-stat-card",children:[n.jsxs("div",{className:"employee-info",children:[n.jsx("h4",{className:"employee-name",style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>m(p||u),children:u.name}),n.jsx("span",{className:"employee-role",children:(p==null?void 0:p.role)||u.role})]}),n.jsxs("div",{className:"employee-stats-grid",children:[n.jsxs("div",{className:"mini-stat",children:[n.jsx("span",{className:"mini-stat-value",children:u.total}),n.jsx("span",{className:"mini-stat-label",children:"Total"})]}),n.jsxs("div",{className:"mini-stat maladie",children:[n.jsxs("span",{className:"mini-stat-value",children:[u.sickLeaveCount||(u.sickLeave>0?1:0),"/",u.sickLeave||0]}),n.jsx("span",{className:"mini-stat-label",children:"Maladie"})]}),n.jsxs("div",{className:"mini-stat absence",children:[n.jsx("span",{className:"mini-stat-value",children:u.absences}),n.jsx("span",{className:"mini-stat-label",children:"Absence"})]}),n.jsxs("div",{className:"mini-stat retard",children:[n.jsxs("span",{className:"mini-stat-value",children:[u.delays,"/",u.totalDelayMinutes||0]}),n.jsx("span",{className:"mini-stat-label",children:"Retard"})]})]})]},u.id)})}):n.jsxs("div",{className:"no-data",children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"no-data-icon",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})}),n.jsx("p",{children:"Aucune absence enregistre pour cette priode"})]})]}),d&&n.jsx("div",{className:"modal show",onClick:()=>m(null),children:n.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h2",{className:"modal-title",children:["Dtail des absences - ",d.name]}),n.jsx("button",{className:"modal-close",onClick:()=>m(null),children:n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"close-icon",children:n.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),n.jsx("div",{className:"modal-body",children:(()=>{var A,S,V;let u=null;if(d._id&&(u=e.find(y=>{var z,M;return((z=y._id)==null?void 0:z.toString())===((M=d._id)==null?void 0:M.toString())})),!u&&d.id&&(u=e.find(y=>{var z,M;return((z=y._id)==null?void 0:z.toString())===((M=d.id)==null?void 0:M.toString())})),!u&&d.name&&(u=e.find(y=>y.name===d.name)),!u&&d.absences&&(u=d),!u)return console.error(" Employ non trouv dans le modal:",d),n.jsxs("p",{children:["Aucune donne disponible pour ",d.name||"cet employ"]});const p=((A=u.absences)==null?void 0:A.all)||(Array.isArray(u.absences)?u.absences:[]),b=((S=u.sickLeaves)==null?void 0:S.all)||(Array.isArray(u.sickLeaves)?u.sickLeaves:[]),E=((V=u.delays)==null?void 0:V.all)||(Array.isArray(u.delays)?u.delays:[]);let D,F;switch(t){case"year":D=new Date(l,0,1),F=new Date(l,11,31);break;case"month":D=new Date(l,r-1,1),F=new Date(l,r,0);break;case"week":D=new Date(i),D.setHours(0,0,0,0),F=new Date(i),F.setDate(D.getDate()+6),F.setHours(23,59,59,999);break;default:D=new Date(l,r-1,1),F=new Date(l,r,0)}const R=p.filter(y=>{const z=y.type||"";if(z==="MAL"||z==="Arrt maladie")return!1;if(y.date){const M=new Date(y.date);return M>=D&&M<=F}else if(y.startDate&&y.endDate){const M=new Date(y.startDate),I=new Date(y.endDate);return M<=F&&I>=D}return!1});let g=[];const P=new Set,$=new Set,T=y=>{if(y.sickLeaveId){const z=y.sickLeaveId.toString?y.sickLeaveId.toString():String(y.sickLeaveId);return P.has(z)?!0:(P.add(z),!1)}if(y.startDate&&y.endDate){const z=`${new Date(y.startDate).toISOString().split("T")[0]}_${new Date(y.endDate).toISOString().split("T")[0]}`;return $.has(z)?!0:($.add(z),!1)}return!1};if(p.forEach(y=>{const z=y.type||"";if((z==="Arrt maladie"||z==="MAL")&&y.startDate&&y.endDate){const I=new Date(y.startDate),q=new Date(y.endDate);if(I<=F&&q>=D){const U={startDate:y.startDate,endDate:y.endDate,reason:y.reason||"Arrt maladie",sickLeaveId:y.sickLeaveId};T(U)||g.push(U)}}}),Array.isArray(b)&&b.forEach(y=>{if(y.startDate&&y.endDate){const z=new Date(y.startDate),M=new Date(y.endDate);if(z<=F&&M>=D){const I={startDate:y.startDate,endDate:y.endDate,reason:y.reason||"Arrt maladie",sickLeaveId:y._id||y.sickLeaveId};T(I)||g.push(I)}}}),u.sickLeave&&u.sickLeave.isOnSickLeave){const y=u.sickLeave.startDate?new Date(u.sickLeave.startDate):null,z=u.sickLeave.endDate?new Date(u.sickLeave.endDate):null;if(y&&z&&y<=F&&z>=D){const M={startDate:u.sickLeave.startDate,endDate:u.sickLeave.endDate,reason:"Arrt maladie",sickLeaveId:u.sickLeave.sickLeaveId};T(M)||g.push(M)}}const w=E.filter(y=>{if(y.date){const z=new Date(y.date);return z>=D&&z<=F}return!1});return n.jsxs("div",{children:[n.jsxs("h3",{children:["Absences (",R.length,")"]}),R.length>0?n.jsx("ul",{children:R.map((y,z)=>n.jsxs("li",{children:[new Date(y.startDate).toLocaleDateString("fr-FR")," - ",new Date(y.endDate).toLocaleDateString("fr-FR"),y.reason&&` (${y.reason})`]},z))}):n.jsx("p",{children:"Aucune absence"}),n.jsxs("h3",{children:["Arrts maladie (",g.length,")"]}),g.length>0?n.jsx("ul",{children:g.map((y,z)=>n.jsxs("li",{children:[new Date(y.startDate).toLocaleDateString("fr-FR")," - ",new Date(y.endDate).toLocaleDateString("fr-FR"),y.reason&&` (${y.reason})`]},z))}):n.jsx("p",{children:"Aucun arrt maladie"}),n.jsxs("h3",{children:["Retards (",w.length,")"]}),w.length>0?n.jsx("ul",{children:w.map((y,z)=>n.jsxs("li",{children:[new Date(y.date).toLocaleDateString("fr-FR")," - ",y.duration," minutes",y.reason&&` (${y.reason})`]},z))}):n.jsx("p",{children:"Aucun retard"})]})})()}),n.jsx("div",{className:"modal-footer",children:n.jsx("button",{className:"btn btn-secondary",onClick:()=>m(null),children:"Fermer"})})]})})]})},gj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState(!0),[a,l]=h.useState("status"),[o,i]=h.useState(!1),[c,d]=h.useState(!1);h.useEffect(()=>{m()},[]);const m=async()=>{var C,x,j;try{r(!0);const v=await Y.get("/employees");if(console.log(" Donnes employs reues:",v.data),v.data&&v.data.length>0){const p=v.data[0];console.log(" Premier employ:",{id:p._id,name:p.name,hasAbsences:!!p.absences,hasSickLeaves:!!p.sickLeaves,hasDelays:!!p.delays,absencesCount:((C=p.absences)==null?void 0:C.length)||0,sickLeavesCount:((x=p.sickLeaves)==null?void 0:x.length)||0,delaysCount:((j=p.delays)==null?void 0:j.length)||0})}let u=null;v.data.success&&Array.isArray(v.data.data)?u=v.data.data:Array.isArray(v.data)&&(u=v.data),u?(t(u),console.log(" Employs chargs:",u.length)):(console.error(" Format de donnes invalide:",v.data),t([]))}catch(v){O.error("Erreur lors du chargement des employs"),console.error(v)}finally{r(!1)}};if(s)return n.jsx("div",{className:"absence-status-page",children:n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement des donnes d'absences..."})]})});const f=async C=>{try{if(console.log(" Sauvegarde dclaration:",C),C.type==="maladie"){const x=new FormData;x.append("employeeId",C.employeeId),x.append("startDate",C.startDate),x.append("endDate",C.endDate),C.reason&&x.append("reason",C.reason),C.file&&x.append("sickLeaveFile",C.file),await Y.post("/sick-leaves",x,{headers:{"Content-Type":"multipart/form-data"}}),O.success("Arrt maladie dclar avec succs")}else await Y.post("/absences",C),O.success("Absence dclare avec succs");m()}catch(x){console.error(" Erreur sauvegarde dclaration:",x),O.error("Erreur lors de la dclaration")}},N=async C=>{try{console.log(" Sauvegarde retard:",C),await Y.post("/delays",C),O.success("Retard dclar avec succs"),m()}catch(x){console.error(" Erreur sauvegarde retard:",x),O.error("Erreur lors de la dclaration du retard")}};return n.jsxs("div",{className:"absence-status-page",children:[n.jsx("div",{className:"tabs-container",children:n.jsxs("div",{className:"tabs-header",children:[n.jsx("button",{className:`tab-button ${a==="status"?"active":""}`,onClick:()=>l("status"),children:" tat des absences"}),n.jsx("button",{className:`tab-button ${a==="declare-maladie"?"active":""}`,onClick:()=>l("declare-maladie"),children:" Dclarer maladie/absence"}),n.jsx("button",{className:`tab-button ${a==="declare-delay"?"active":""}`,onClick:()=>l("declare-delay"),children:" Dclarer retard"})]})}),n.jsxs("div",{className:"tab-content",children:[a==="status"&&n.jsx(fj,{employees:e}),a==="declare-maladie"&&n.jsxs("div",{className:"declaration-section",children:[n.jsxs("div",{className:"declaration-header",children:[n.jsx("h2",{children:" Dclaration d'arrt maladie ou d'absence"}),n.jsx("p",{children:"Utilisez ce formulaire pour dclarer un arrt maladie ou une absence pour un employ."})]}),n.jsxs("button",{className:"btn btn-primary declaration-btn",onClick:()=>i(!0),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"Ouvrir le formulaire de dclaration"]})]}),a==="declare-delay"&&n.jsxs("div",{className:"declaration-section",children:[n.jsxs("div",{className:"declaration-header",children:[n.jsx("h2",{children:" Dclaration de retard"}),n.jsx("p",{children:"Utilisez ce formulaire pour dclarer un retard pour un employ."})]}),n.jsxs("button",{className:"btn btn-primary declaration-btn",onClick:()=>d(!0),children:[n.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"btn-icon",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Ouvrir le formulaire de retard"]})]})]}),n.jsx(Ch,{show:o,onClose:()=>i(!1),onSave:f,employees:e}),n.jsx(kh,{show:c,onClose:()=>d(!1),onSave:N,employees:e})]})},xj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState(!1),[a,l]=h.useState(!1),[o,i]=h.useState(new Date().getMonth()+1),[c,d]=h.useState(new Date().getFullYear()),m=h.useCallback(async()=>{r(!0);try{const v=await Y.get(`/meal-expenses?month=${o}&year=${c}`);console.log(" Donnes frais repas reues:",v.data);let u=[];Array.isArray(v.data)?u=v.data:v.data.success&&Array.isArray(v.data.data)?u=v.data.data:v.data.expenses&&Array.isArray(v.data.expenses)&&(u=v.data.expenses),t(u),console.log(" Frais repas chargs:",u.length,"employs,",j,"jours")}catch(v){console.error("Erreur lors du chargement des frais repas:",v),O.error("Erreur lors du chargement des frais repas")}finally{r(!1)}},[o,c]);h.useEffect(()=>{m()},[m]);const f=(v,u,p)=>{const b=[...e],E=b[v];let D=E.dailyExpenses.find(F=>F.day===u);D||(D={day:u,amount:0},E.dailyExpenses.push(D)),D.amount=parseFloat(p)||0,E.totalAmount=E.dailyExpenses.reduce((F,R)=>F+R.amount,0),t(b)},N=async()=>{l(!0);try{await Y.post("/meal-expenses/batch",{month:o,year:c,expenses:e.map(v=>({employeeId:v.employeeId,employeeName:v.employeeName,dailyExpenses:v.dailyExpenses}))}),O.success("Frais repas sauvegards avec succs"),m()}catch(v){console.error("Erreur lors de la sauvegarde:",v),O.error("Erreur lors de la sauvegarde des frais repas")}finally{l(!1)}},C=()=>new Date(c,o,0).getDate(),x=v=>["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"][v-1],j=C();return s?n.jsx("div",{className:"meal-expenses fade-in",children:n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des frais repas..."})]})})}):n.jsxs("div",{className:"meal-expenses fade-in",children:[n.jsx("div",{className:"page-header",children:n.jsxs("div",{className:"header-left",children:[n.jsxs("h2",{children:[" Frais Repas - ",x(o)," ",c]}),n.jsx("div",{className:"header-actions",children:n.jsxs("div",{className:"date-selector",children:[n.jsx("select",{value:o,onChange:v=>i(parseInt(v.target.value)),className:"form-control",children:Array.from({length:12},(v,u)=>n.jsx("option",{value:u+1,children:x(u+1)},u+1))}),n.jsx("select",{value:c,onChange:v=>d(parseInt(v.target.value)),className:"form-control",children:Array.from({length:10},(v,u)=>{const p=new Date().getFullYear()-2+u;return n.jsx("option",{value:p,children:p},p)})}),n.jsx("button",{className:"btn btn-success",onClick:N,disabled:a,children:a?" Sauvegarde...":" Sauvegarder"})]})})]})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"meal-expenses-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"employee-column",children:"Salari"}),Array.from({length:j},(v,u)=>n.jsx("th",{className:"day-column",children:u+1},u+1))]})}),n.jsx("tbody",{children:e.map((v,u)=>n.jsxs("tr",{children:[n.jsxs("td",{className:"employee-cell",children:[n.jsx("span",{className:"employee-name",children:n.jsx("strong",{children:v.employeeName})}),n.jsxs("span",{className:"employee-total",children:[v.totalAmount.toFixed(2)," "]})]}),Array.from({length:j},(p,b)=>{const E=b+1,D=v.dailyExpenses.find(R=>R.day===E),F=D?D.amount:0;return n.jsx("td",{className:"day-cell",children:n.jsx("input",{type:"number",value:F,onChange:R=>f(u,E,R.target.value),min:"0",step:"0.01",className:"expense-input",placeholder:"0.00"})},E)})]},v.employeeId))})]})})}),e.length===0&&n.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[n.jsx("h3",{children:" Aucun employ trouv"}),n.jsx("p",{children:"Veuillez d'abord ajouter des employs dans la gestion des employs."})]})]})},vj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState([]),[a,l]=h.useState(!1),[o,i]=h.useState(!1),[c,d]=h.useState(new Date().getMonth()+1),[m,f]=h.useState(new Date().getFullYear()),N=h.useCallback(async()=>{var v,u,p,b,E,D,F;l(!0);try{console.log(" Chargement des frais KM pour:",{month:c,year:m});const R=await Y.get(`/km-expenses?month=${c}&year=${m}`);if(console.log(" Rponse API frais KM complte:",R.data),R.data){if(console.log(" Structure des donnes:",{hasEmployees:!!R.data.employees,hasParameters:!!R.data.parameters,employeesCount:((v=R.data.employees)==null?void 0:v.length)||0,parametersCount:((u=R.data.parameters)==null?void 0:u.length)||0}),R.data.employees&&R.data.employees.length>0){const g=R.data.employees[0];console.log(" Premier employ:",{id:g.employeeId,name:g.employeeName,hasParameterValues:!!g.parameterValues,parameterValuesCount:((p=g.parameterValues)==null?void 0:p.length)||0})}if(R.data.parameters&&R.data.parameters.length>0){const g=R.data.parameters[0];console.log(" Premier paramtre:",{id:g._id,name:g.name,displayName:g.displayName,kmValue:g.kmValue})}}t(R.data.employees||[]),r(R.data.parameters||[]),console.log(" Employs chargs:",((b=R.data.employees)==null?void 0:b.length)||0),console.log(" Paramtres chargs:",((E=R.data.parameters)==null?void 0:E.length)||0)}catch(R){console.error(" Erreur lors du chargement des frais KM:",R),console.error(" Dtails de l'erreur:",(D=R.response)==null?void 0:D.data),console.error(" Status:",(F=R.response)==null?void 0:F.status),O.error("Erreur lors du chargement des frais KM")}finally{l(!1)}},[c,m]);h.useEffect(()=>{N()},[N]);const C=(v,u,p)=>{const b=[...e],E=b[v],D=E.parameterValues[u],F=s.find(g=>g._id.toString()===D.parameterId.toString()),R=F?F.kmValue:D.kmValue;D.count=parseInt(p)||0,D.kmValue=R,D.totalKm=D.count*R,E.totalKm=E.parameterValues.reduce((g,P)=>g+P.totalKm,0),t(b)},x=async()=>{i(!0);try{await Y.post("/km-expenses/batch",{month:c,year:m,expenses:e.map(v=>({employeeId:v.employeeId,employeeName:v.employeeName,parameterValues:v.parameterValues}))}),O.success("Frais KM sauvegards avec succs"),N()}catch(v){console.error("Erreur lors de la sauvegarde:",v),O.error("Erreur lors de la sauvegarde des frais KM")}finally{i(!1)}},j=v=>["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"][v-1];return a?n.jsx("div",{className:"km-expenses fade-in",children:n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des frais KM..."})]})})}):n.jsxs("div",{className:"km-expenses fade-in",children:[n.jsx("div",{className:"page-header",children:n.jsxs("div",{className:"header-left",children:[n.jsxs("h2",{children:[" Frais KM - ",j(c)," ",m]}),n.jsx("div",{className:"header-actions",children:n.jsxs("div",{className:"date-selector",children:[n.jsx("select",{value:c,onChange:v=>d(parseInt(v.target.value)),className:"form-control",children:Array.from({length:12},(v,u)=>n.jsx("option",{value:u+1,children:j(u+1)},u+1))}),n.jsx("select",{value:m,onChange:v=>f(parseInt(v.target.value)),className:"form-control",children:Array.from({length:10},(v,u)=>{const p=new Date().getFullYear()-2+u;return n.jsx("option",{value:p,children:p},p)})}),n.jsx("button",{className:"btn btn-success",onClick:x,disabled:o,children:o?" Sauvegarde...":" Sauvegarder"})]})})]})}),n.jsx("div",{className:"card",children:n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"km-expenses-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"employee-column",children:"Salari"}),s.map(v=>n.jsx("th",{className:"param-column",title:`${v.displayName} (${v.kmValue} km)`,children:n.jsxs("div",{className:"param-header",children:[n.jsx("div",{className:"param-name",children:v.displayName}),n.jsxs("div",{className:"param-km",children:["(",v.kmValue," km)"]})]})},v._id)),n.jsx("th",{className:"total-column",children:"Total KM"})]})}),n.jsx("tbody",{children:e.map((v,u)=>n.jsxs("tr",{children:[n.jsx("td",{className:"employee-cell",children:n.jsx("strong",{children:v.employeeName})}),v.parameterValues.map((p,b)=>n.jsxs("td",{className:"param-cell",children:[n.jsx("input",{type:"number",value:p.count,onChange:E=>C(u,b,E.target.value),min:"0",className:"count-input",placeholder:"0"}),n.jsxs("div",{className:"param-total",children:[p.totalKm," km"]})]},p.parameterId)),n.jsx("td",{className:"total-cell",children:n.jsxs("strong",{children:[v.totalKm," km"]})})]},v.employeeId))})]})})}),e.length===0&&n.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[n.jsx("h3",{children:" Aucun employ trouv"}),n.jsx("p",{children:"Veuillez d'abord ajouter des employs dans la gestion des employs."})]}),s.length===0&&n.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[n.jsx("h3",{children:" Paramtres manquants"}),n.jsx("p",{children:"Veuillez d'abord configurer les paramtres dans le menu Paramtres."})]})]})},yj=()=>{var Ys,Gs,na,ms,Qs,_c;const[e,t]=h.useState("site"),[s,r]=h.useState([]),[a,l]=h.useState(!1),[o,i]=h.useState(!1),[c,d]=h.useState([]),[m,f]=h.useState({admin:"",employee:""}),[N,C]=h.useState(!1),[x,j]=h.useState([]),[v,u]=h.useState(!1),[p,b]=h.useState(!1),[E,D]=h.useState({name:"Boulangerie",city:"Ville"}),[F,R]=h.useState(!1),[g,P]=h.useState(!1),[$,T]=h.useState(null),[w,A]=h.useState(!1),[S,V]=h.useState(!1),[y,z]=h.useState(!1),[M,I]=h.useState([]),[q,U]=h.useState(!1),[W,te]=h.useState(!1),[ae,me]=h.useState(null),[ue,pe]=h.useState(!1),[be,Ie]=h.useState([]),[G,de]=h.useState(!1),[k,K]=h.useState([]),[X,le]=h.useState(!1),[se,ce]=h.useState(!1),[re,Pe]=h.useState(null),[Te,Se]=h.useState(!1),[ge,xe]=h.useState({vert:100,jaune:80,orange:50}),[ct,At]=h.useState(!1);h.useEffect(()=>{wt(),L(),fe(),Ue(),vn(),Fl(),Ze()},[]),h.useEffect(()=>{e==="passwords"&&Zr()},[e]);const Ze=async()=>{try{const _=await Y.get("/parameters"),Q=Array.isArray(_.data)?_.data:[],Z=Q.find(De=>De.name==="margeVert"),oe=Q.find(De=>De.name==="margeJaune"),ve=Q.find(De=>De.name==="margeOrange");xe({vert:(Z==null?void 0:Z.kmValue)||100,jaune:(oe==null?void 0:oe.kmValue)||80,orange:(ve==null?void 0:ve.kmValue)||50})}catch(_){console.error("Erreur chargement marges:",_)}},$t=async()=>{At(!0);try{const _=[{name:"margeVert",kmValue:ge.vert},{name:"margeJaune",kmValue:ge.jaune},{name:"margeOrange",kmValue:ge.orange}];for(const Q of _)await Y.put("/parameters",Q);O.success("Marges enregistres avec succs"),await wt()}catch(_){console.error("Erreur sauvegarde marges:",_),O.error("Erreur lors de la sauvegarde")}finally{At(!1)}},Nt=_=>{t(_)},ds=async()=>{try{const Q=["storeEmail","adminEmail","alertStore","alertAdmin"].filter(Z=>!s.find(oe=>oe.name===Z));Q.length>0&&(console.log(" Cration des paramtres manquants:",Q),await wt(),O.success(`${Q.length} paramtres crs automatiquement`))}catch(_){console.error(" Erreur lors de la cration des paramtres:",_),O.error("Erreur lors de la cration des paramtres")}},wt=async()=>{l(!0);try{const Q=(await Y.get("/parameters")).data;r(Q);const Z=Q.filter(ve=>ve.kmValue!==void 0&&ve.kmValue>=0).sort((ve,De)=>ve.createdAt&&De.createdAt?new Date(ve.createdAt)-new Date(De.createdAt):0),oe=[];for(let ve=0;ve<12;ve++)ve<Z.length?oe.push(Z[ve]):oe.push({_id:`new-${ve}`,name:`kmParam${Date.now()}-${ve}`,displayName:"",kmValue:0,isNew:!0});d(oe)}catch(_){console.error("Erreur lors du chargement des paramtres:",_),O.error("Erreur lors du chargement des paramtres")}finally{l(!1)}},Fl=async()=>{de(!0);try{const _=await Y.get("/employees");let Q=null;_.data.success&&_.data.data?Q=_.data.data:Array.isArray(_.data)&&(Q=_.data),Q&&Ie(Q)}catch(_){console.error("Erreur lors du chargement des employs:",_)}finally{de(!1)}},Zr=async()=>{le(!0);try{const _=await Y.get("/passwords/payslip-passwords");_.data.success&&_.data.data&&K(_.data.data)}catch(_){console.error("Erreur lors du chargement des mots de passe des fiches de paie:",_),O.error("Erreur lors du chargement des mots de passe")}finally{le(!1)}},rn=async()=>{var _,Q;ce(!0);try{const Z=k.map(ve=>({employeeId:ve._id,payslipPassword:ve.payslipPassword||""})),oe=await Y.put("/passwords/payslip-passwords",{passwords:Z});oe.data.success?(O.success(oe.data.message),Zr()):O.error(oe.data.error||"Erreur lors de la sauvegarde")}catch(Z){console.error("Erreur lors de la sauvegarde:",Z),O.error(((Q=(_=Z.response)==null?void 0:_.data)==null?void 0:Q.error)||"Erreur lors de la sauvegarde des mots de passe")}finally{ce(!1)}},ea=(_,Q)=>{K(Z=>Z.map(oe=>oe._id===_?{...oe,payslipPassword:Q}:oe))},Ol=async()=>{try{const _=await Y.get("/passwords/download-payslip-passwords-bat",{responseType:"blob"}),Q=window.URL.createObjectURL(new Blob([_.data])),Z=document.createElement("a");Z.href=Q,Z.setAttribute("download","mots_de_passe.bat"),document.body.appendChild(Z),Z.click(),Z.remove(),window.URL.revokeObjectURL(Q),O.success("Fichier mots_de_passe.bat tlcharg avec succs")}catch(_){console.error("Erreur lors du tlchargement:",_),O.error("Erreur lors du tlchargement du fichier")}},Gt=(_,Q,Z)=>{const oe=[...s];if(typeof _=="string"){const ve=oe.findIndex(De=>De._id===_);ve!==-1?(oe[ve][Q]=Z,r(oe)):console.error(" Paramtre non trouv avec l'ID:",_)}else oe[_][Q]=Z,r(oe)},Js=async()=>{var _,Q,Z;i(!0);try{console.log(" Paramtres KM  sauvegarder:",c);const oe=c.filter(Ee=>Ee._id&&!Ee._id.startsWith("new-")&&!Ee.isNew),ve=c.filter(Ee=>Ee._id&&Ee._id.startsWith("new-")||Ee.isNew),De=oe.map(Ee=>{var dt;return{_id:Ee._id,displayName:((dt=Ee.displayName)==null?void 0:dt.trim())||`Paramtre ${Ee.name||"inconnu"}`,kmValue:parseFloat(Ee.kmValue)||0}}),Oe=ve.filter(Ee=>{var Xs;const dt=((Xs=Ee.displayName)==null?void 0:Xs.trim())||"",ln=parseFloat(Ee.kmValue)||0;return dt||ln>0}).map((Ee,dt)=>{var ln;return{name:`kmParam${Date.now()}-${dt}`,displayName:((ln=Ee.displayName)==null?void 0:ln.trim())||`Paramtre ${oe.length+dt+1}`,kmValue:parseFloat(Ee.kmValue)||0}});console.log(" Paramtres existants  mettre  jour:",De),console.log(" Nouveaux paramtres  crer:",Oe),De.length>0&&await Y.put("/parameters/batch",{parameters:De}),Oe.length>0&&await Y.post("/parameters/km",{parameters:Oe}),await wt(),O.success("Paramtres sauvegards avec succs")}catch(oe){console.error(" Erreur lors de la sauvegarde:",oe),console.error(" Dtails de l'erreur:",(_=oe.response)==null?void 0:_.data);const ve=((Z=(Q=oe.response)==null?void 0:Q.data)==null?void 0:Z.error)||oe.message||"Erreur inconnue";O.error(`Erreur lors de la sauvegarde: ${ve}`)}finally{i(!1)}},us=(_,Q)=>{f(Z=>({...Z,[_]:Q}))},Ks=async()=>{C(!0);try{if(console.log(" Tentative de mise  jour des mots de passe:",m),!m.admin&&!m.employee){O.error("Veuillez saisir au moins un mot de passe"),C(!1);return}if(m.admin&&m.admin.length<6){O.error("Le mot de passe administrateur doit contenir au moins 6 caractres"),C(!1);return}if(m.employee&&m.employee.length<6){O.error("Le mot de passe salari doit contenir au moins 6 caractres"),C(!1);return}const _={};m.admin&&(_.admin=m.admin),m.employee&&(_.employee=m.employee),console.log(" Envoi des mots de passe:",_),await Y.put("/passwords/update",_),O.success("Mots de passe mis  jour avec succs"),f({admin:"",employee:""})}catch(_){console.error(" Erreur lors de la mise  jour des mots de passe:",_),O.error("Erreur lors de la mise  jour des mots de passe")}finally{C(!1)}},L=async()=>{u(!0);try{const _=await Y.get("/menu-permissions");_.data.success&&(j(_.data.menuPermissions),console.log(" Permissions de menu charges:",_.data.menuPermissions))}catch(_){console.error(" Erreur lors du chargement des permissions:",_),O.error("Erreur lors du chargement des permissions de menu")}finally{u(!1)}},B=(_,Q,Z)=>{j(oe=>oe.map(ve=>ve.menuId===_?{...ve,[Q]:Z}:ve))},J=async()=>{b(!0);try{const _=x.map(Q=>({_id:Q._id,isVisibleToAdmin:Q.isVisibleToAdmin,isVisibleToEmployee:Q.isVisibleToEmployee}));await Y.put("/menu-permissions/batch",{permissions:_}),O.success("Permissions de menu mises  jour avec succs")}catch(_){console.error(" Erreur lors de la sauvegarde des permissions:",_),O.error("Erreur lors de la sauvegarde des permissions")}finally{b(!1)}},ne=async()=>{if(window.confirm("tes-vous sr de vouloir recrer les permissions par dfaut ? Cela supprimera toutes les permissions actuelles.")){b(!0);try{const _=await Y.post("/menu-permissions/recreate");_.data.success&&(O.success(_.data.message),await L())}catch(_){console.error(" Erreur lors de la recration des permissions:",_),O.error("Erreur lors de la recration des permissions")}finally{b(!1)}}},fe=async()=>{R(!0);try{const _=await Y.get("/site");D(_.data),console.log(" Site charg:",_.data)}catch(_){console.error(" Erreur lors du chargement du site:",_),O.error("Erreur lors du chargement des informations du site")}finally{R(!1)}},he=(_,Q)=>{D(Z=>({...Z,[_]:Q}))},Ce=async()=>{P(!0);try{await Y.put("/site",E),O.success("Informations du site mises  jour avec succs"),window.location.reload()}catch(_){console.error(" Erreur lors de la mise  jour du site:",_),O.error("Erreur lors de la mise  jour du site")}finally{P(!1)}},Ue=async()=>{A(!0);try{const _=await Y.get("/database/stats");_.data.success&&T(_.data.stats)}catch(_){console.error(" Erreur lors de la rcupration des statistiques:",_)}finally{A(!1)}},we=async()=>{V(!0);try{const _=await Y.get("/database/export",{responseType:"blob"}),Q=window.URL.createObjectURL(new Blob([_.data])),Z=document.createElement("a");Z.href=Q,Z.setAttribute("download",`boulangerie-backup-${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(Z),Z.click(),Z.remove(),window.URL.revokeObjectURL(Q),O.success("Base de donnes exporte avec succs")}catch(_){console.error(" Erreur lors de l'export:",_),O.error("Erreur lors de l'export de la base de donnes")}finally{V(!1)}},an=async _=>{const Q=_.target.files[0];if(Q){if(!Q.name.endsWith(".json")){O.error("Veuillez slectionner un fichier JSON");return}z(!0);try{const Z=new FormData;Z.append("backupFile",Q);const oe=await Y.post("/database/import",Z,{headers:{"Content-Type":"multipart/form-data"}});oe.data.success?(O.success("Base de donnes importe avec succs"),wt(),L(),fe(),Ue()):O.error("Erreur lors de l'import: "+(oe.data.error||"Erreur inconnue"))}catch(Z){console.error(" Erreur lors de l'import:",Z),O.error("Erreur lors de l'import de la base de donnes")}finally{z(!1),_.target.value=""}}},vn=async()=>{U(!0);try{const _=await Y.get("/email-templates");_.data.success&&I(_.data.templates)}catch(_){console.error(" Erreur lors du chargement des templates:",_),O.error("Erreur lors du chargement des templates d'email")}finally{U(!1)}},ta=async()=>{te(!0);try{const _=await Y.post("/email-templates/initialize-defaults");_.data.success&&(O.success(_.data.message),vn())}catch(_){console.error(" Erreur lors de l'initialisation:",_),O.error("Erreur lors de l'initialisation des templates")}finally{te(!1)}},Hn=(_,Q)=>{me(Z=>({...Z,[_]:Q}))},$l=async()=>{if(ae){te(!0);try{await Y.put(`/email-templates/${ae._id}`,{displayName:ae.displayName,subject:ae.subject,htmlContent:ae.htmlContent,textContent:ae.textContent,description:ae.description,variables:ae.variables}),O.success("Template sauvegard avec succs"),pe(!1),me(null),vn()}catch(_){console.error(" Erreur lors de la sauvegarde:",_),O.error("Erreur lors de la sauvegarde du template")}finally{te(!1)}}},zl=_=>{me({..._}),pe(!0)},et=()=>{pe(!1),me(null)},zt=async()=>{var _,Q;Se(!0);try{const Z=await Y.get("/maintenance/security-check");Z.data.success&&(Pe(Z.data.data),console.log(" Vrification maintenance:",Z.data.data))}catch(Z){console.error(" Erreur vrification maintenance:",Z),O.error("Erreur lors de la vrification des mises  jour"),Pe({error:((Q=(_=Z.response)==null?void 0:_.data)==null?void 0:Q.message)||"Erreur inconnue"})}finally{Se(!1)}};return a?n.jsx("div",{className:"parameters fade-in",children:n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des paramtres..."})]})})}):n.jsxs("div",{className:"parameters fade-in",children:[n.jsx("div",{className:"page-header",children:n.jsx("h2",{children:" Paramtres"})}),n.jsxs("div",{className:"tabs-navigation",children:[n.jsx("button",{className:`tab-button ${e==="site"?"active":""}`,onClick:()=>Nt("site"),children:" Informations du Site"}),n.jsx("button",{className:`tab-button ${e==="passwords"?"active":""}`,onClick:()=>Nt("passwords"),children:" Gestion des Mots de Passe"}),n.jsx("button",{className:`tab-button ${e==="permissions"?"active":""}`,onClick:()=>Nt("permissions"),children:" Gestion des Permissions de Menu"}),n.jsx("button",{className:`tab-button ${e==="km"?"active":""}`,onClick:()=>Nt("km"),children:" Paramtres - Frais KM"}),n.jsx("button",{className:`tab-button ${e==="templates"?"active":""}`,onClick:()=>Nt("templates"),children:" Templates disponibles"}),n.jsx("button",{className:`tab-button ${e==="database"?"active":""}`,onClick:()=>Nt("database"),children:" Gestion de la Base de Donnes"}),n.jsx("button",{className:"tab-button",onClick:()=>{const _="/lon/".replace(/\/$/,"");window.open(`${_}/admin-documents.html`,"_blank")},children:" Gestion des Documents"})]}),n.jsxs("div",{className:"tab-content",children:[e==="site"&&n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h3",{children:" Informations du Site"})}),n.jsx("div",{className:"card-body",children:F?n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des informations du site..."})]}):n.jsxs("div",{className:"site-section",children:[n.jsxs("div",{className:"site-item",children:[n.jsxs("label",{htmlFor:"site-name",children:[n.jsx("span",{className:"site-icon",children:""}),"Nom du site"]}),n.jsx("input",{id:"site-name",type:"text",value:E.name,onChange:_=>he("name",_.target.value),placeholder:"Nom de la boulangerie",className:"site-input"})]}),n.jsxs("div",{className:"site-item",children:[n.jsxs("label",{htmlFor:"site-city",children:[n.jsx("span",{className:"site-icon",children:""}),"Ville"]}),n.jsx("input",{id:"site-city",type:"text",value:E.city,onChange:_=>he("city",_.target.value),placeholder:"Ville du magasin",className:"site-input"})]}),n.jsx("div",{className:"site-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:Ce,disabled:g,children:g?" Sauvegarde...":" Sauvegarder les informations du site"})})]})})]}),e==="passwords"&&n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h3",{children:" Gestion des Mots de Passe"})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"password-section",children:[n.jsxs("div",{className:"password-item",children:[n.jsxs("label",{htmlFor:"admin-password",children:[n.jsx("span",{className:"password-icon",children:""}),"Mot de passe Administrateur"]}),n.jsx("input",{id:"admin-password",type:"password",value:m.admin,onChange:_=>us("admin",_.target.value),placeholder:"Nouveau mot de passe (min. 6 caractres)",className:"password-input"})]}),n.jsxs("div",{className:"password-item",children:[n.jsxs("label",{htmlFor:"employee-password",children:[n.jsx("span",{className:"password-icon",children:""}),"Mot de passe Salari"]}),n.jsx("input",{id:"employee-password",type:"password",value:m.employee,onChange:_=>us("employee",_.target.value),placeholder:"Nouveau mot de passe (min. 6 caractres)",className:"password-input"})]}),n.jsx("div",{className:"password-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:Ks,disabled:N,style:{opacity:!m.admin&&!m.employee?.6:1,cursor:!m.admin&&!m.employee?"not-allowed":"pointer"},children:N?" Mise  jour...":" Mettre  jour les mots de passe"})})]}),n.jsxs("div",{className:"payslip-passwords-section",style:{marginTop:"3rem",paddingTop:"2rem",borderTop:"2px solid #e0e0e0"},children:[n.jsx("h4",{style:{marginBottom:"1.5rem",color:"#2c3e50"},children:" Mots de passe Fiches de Paie"}),X?n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des mots de passe..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"payslip-passwords-table-container",style:{marginBottom:"1.5rem",overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",background:"white",minWidth:"600px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{background:"#f8f9fa"},children:[n.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #dee2e6",fontWeight:600},children:"Salari"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #dee2e6",fontWeight:600},children:"Mot de passe"})]})}),n.jsx("tbody",{children:k.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"2",style:{padding:"1rem",textAlign:"center",color:"#6c757d"},children:"Aucun salari trouv"})}):k.map(_=>n.jsxs("tr",{style:{borderBottom:"1px solid #e9ecef"},children:[n.jsx("td",{style:{padding:"0.75rem"},children:_.name}),n.jsx("td",{style:{padding:"0.75rem"},children:n.jsx("input",{type:"text",value:_.payslipPassword||"",onChange:Q=>ea(_._id,Q.target.value),placeholder:"Saisir le mot de passe",style:{fontFamily:"monospace",padding:"0.5rem",border:"1px solid #ced4da",borderRadius:"4px",width:"100%",maxWidth:"200px"}})})]},_._id))})]})}),n.jsxs("div",{style:{textAlign:"center",display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[n.jsx("button",{className:"btn btn-primary",onClick:rn,disabled:se,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:600},children:se?" Sauvegarde...":" Sauvegarder les mots de passe"}),n.jsx("button",{className:"btn btn-success",onClick:Ol,style:{padding:"12px 24px",fontSize:"1rem",fontWeight:600},children:" Tlcharger mots_de_passe.bat"})]})]})]})]})]}),e==="permissions"&&n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Gestion des Permissions de Menu"}),n.jsx("p",{children:"Configurez quels menus sont visibles pour les salaris"})]}),n.jsx("div",{className:"card-body",children:v?n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des permissions..."})]}):n.jsxs("div",{className:"permissions-section",children:[n.jsxs("div",{className:"permissions-table",children:[n.jsxs("div",{className:"permissions-header",children:[n.jsx("div",{className:"permission-menu",children:"Menu"}),n.jsx("div",{className:"permission-admin",children:" Admin"}),n.jsx("div",{className:"permission-employee",children:" Salari"})]}),x.map(_=>n.jsxs("div",{className:"permission-row",children:[n.jsxs("div",{className:"permission-menu",children:[n.jsxs("span",{className:"permission-icon",children:[_.menuId==="dashboard"&&"",_.menuId==="employees"&&"",_.menuId==="constraints"&&"",_.menuId==="planning"&&"",_.menuId==="sales-stats"&&"",_.menuId==="absences"&&"",_.menuId==="parameters"&&"",_.menuId==="employee-status"&&"",_.menuId==="meal-expenses"&&"",_.menuId==="km-expenses"&&"",_.menuId==="recup"&&"",_.menuId==="employee-status-print"&&"",_.menuId==="sick-leave-management"&&"",_.menuId==="vacation-management"&&"",_.menuId==="ambassadeur"&&""]}),_.menuName]}),n.jsx("div",{className:"permission-admin",children:n.jsx("input",{type:"checkbox",checked:_.isVisibleToAdmin,onChange:Q=>B(_.menuId,"isVisibleToAdmin",Q.target.checked),disabled:!0})}),n.jsx("div",{className:"permission-employee",children:n.jsx("input",{type:"checkbox",checked:_.isVisibleToEmployee,onChange:Q=>B(_.menuId,"isVisibleToEmployee",Q.target.checked)})})]},_._id))]}),n.jsxs("div",{className:"permissions-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:J,disabled:p,children:p?" Sauvegarde...":" Sauvegarder les permissions"}),n.jsx("button",{className:"btn btn-warning",onClick:ne,disabled:p,style:{marginLeft:"10px"},children:p?" Recration...":" Recrer les permissions par dfaut"})]})]})})]}),e==="km"&&n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Paramtres - Frais KM"}),n.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem"},children:"Configurez les 12 en-ttes de colonnes pour les frais KM"})]}),n.jsxs("div",{className:"card-body",children:[n.jsx("div",{className:"parameters-list",children:c.map((_,Q)=>n.jsxs("div",{className:"parameter-item",children:[n.jsxs("div",{className:"parameter-info",children:[n.jsxs("span",{className:"parameter-number",children:[Q+1,"."]}),n.jsx("input",{type:"text",value:_.displayName||"",onChange:Z=>{const oe=[...c];oe[Q]={...oe[Q],displayName:Z.target.value},d(oe)},className:"parameter-name-input",placeholder:`Paramtre ${Q+1}`})]}),n.jsxs("div",{className:"parameter-value",children:[n.jsx("input",{type:"number",value:_.kmValue||0,onChange:Z=>{const oe=[...c];oe[Q]={...oe[Q],kmValue:parseFloat(Z.target.value)||0},d(oe)},className:"parameter-km-input",min:"0",step:"0.1",placeholder:"0"}),n.jsx("span",{className:"km-unit",children:"km"})]})]},_._id||`new-${Q}`))}),n.jsx("div",{className:"parameters-actions",children:n.jsx("button",{className:"btn btn-success",onClick:Js,disabled:o,children:o?" Sauvegarde...":" Sauvegarder les paramtres KM"})})]})]}),e==="templates"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Site en maintenance"}),n.jsx("p",{children:"Bloquer l'accs des utilisateurs (sauf administrateur) pendant une maintenance"})]}),n.jsxs("div",{className:"card-body",children:[n.jsxs("label",{className:"checkbox-option",style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:((Ys=s.find(_=>_.name==="siteEnMaintenance"))==null?void 0:Ys.booleanValue)||!1,onChange:async _=>{const Q=s.find(ve=>ve.name==="siteEnMaintenance"),Z=_.target.checked,oe=Q!=null&&Q._id&&!String(Q._id).startsWith("temp-")?Q._id:null;if(oe)try{await Y.put(`/parameters/${oe}`,{booleanValue:Z}),O.success(Z?"Site mis en maintenance":"Site sorti de maintenance"),wt()}catch{O.error("Erreur lors de la mise  jour")}else{await wt();const De=(await Y.get("/parameters")).data.find(Oe=>Oe.name==="siteEnMaintenance");if(De!=null&&De._id)try{await Y.put(`/parameters/${De._id}`,{booleanValue:Z}),O.success(Z?"Site mis en maintenance":"Site sorti de maintenance"),wt()}catch{O.error("Erreur lors de la mise  jour")}else O.warning("Paramtre non disponible. Rechargez la page.")}}}),n.jsx("span",{children:"Site en maintenance"})]}),n.jsx("p",{className:"text-muted",style:{marginTop:"8px",fontSize:"0.9rem"},children:"Quand activ, les utilisateurs verront un message les invitant  revenir plus tard. L'administrateur peut toujours se connecter."})]})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Configuration des Alertes Email"}),n.jsx("p",{children:"Configurez les alertes pour les nouveaux arrts maladie  valider"})]}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"alert-email-section",children:[(!s.find(_=>_.name==="storeEmail")||!s.find(_=>_.name==="adminEmail")||!s.find(_=>_.name==="alertStore")||!s.find(_=>_.name==="alertAdmin"))&&n.jsxs("div",{className:"alert alert-warning",children:[n.jsx("p",{children:" Certains paramtres d'alerte email sont manquants."}),n.jsx("button",{className:"btn btn-primary",onClick:ds,children:" Crer les paramtres manquants"})]}),n.jsx("div",{className:"email-config",children:n.jsxs("div",{className:"email-input-group",children:[n.jsx("label",{htmlFor:"storeEmail",children:" Email du Magasin :"}),n.jsx("input",{type:"email",id:"storeEmail",value:((Gs=s.find(_=>_.name==="storeEmail"))==null?void 0:Gs.stringValue)||"",onChange:_=>{if(s.find(Z=>Z.name==="storeEmail")){const Z=s.map(oe=>oe.name==="storeEmail"?{...oe,stringValue:_.target.value}:oe);r(Z)}else{const Z={name:"storeEmail",displayName:"Email du Magasin",stringValue:_.target.value,kmValue:-1,_id:`temp-${Date.now()}`};r([...s,Z])}},className:"email-input",placeholder:"magasin@boulangerie.fr"})]})}),n.jsx("div",{className:"email-config",children:n.jsxs("div",{className:"email-input-group",children:[n.jsx("label",{htmlFor:"adminEmail",children:" Email de l'Administrateur :"}),n.jsx("input",{type:"email",id:"adminEmail",value:((na=s.find(_=>_.name==="adminEmail"))==null?void 0:na.stringValue)||"",onChange:_=>{if(s.find(Z=>Z.name==="adminEmail")){const Z=s.map(oe=>oe.name==="adminEmail"?{...oe,stringValue:_.target.value}:oe);r(Z)}else{const Z={name:"adminEmail",displayName:"Email de l'Administrateur",stringValue:_.target.value,kmValue:-1,_id:`temp-${Date.now()}`};r([...s,Z])}},className:"email-input",placeholder:"admin@boulangerie.fr"})]})}),n.jsx("div",{className:"email-config",children:n.jsxs("div",{className:"email-input-group",children:[n.jsx("label",{children:" Destinataires des Alertes :"}),n.jsxs("div",{className:"recipient-options",children:[n.jsxs("label",{className:"checkbox-option",children:[n.jsx("input",{type:"checkbox",checked:((ms=s.find(_=>_.name==="alertStore"))==null?void 0:ms.booleanValue)||!1,onChange:_=>{const Q=s.find(Z=>Z.name==="alertStore");Q&&Gt(Q._id,"booleanValue",_.target.checked)}}),n.jsx("span",{children:" Envoyer au Magasin"})]}),n.jsxs("label",{className:"checkbox-option",children:[n.jsx("input",{type:"checkbox",checked:((Qs=s.find(_=>_.name==="alertAdmin"))==null?void 0:Qs.booleanValue)||!1,onChange:_=>{const Q=s.find(Z=>Z.name==="alertAdmin");Q&&Gt(Q._id,"booleanValue",_.target.checked)}}),n.jsx("span",{children:" Envoyer  l'Administrateur"})]})]})]})}),n.jsx("div",{className:"email-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:async()=>{var _,Q,Z,oe,ve,De;try{i(!0);let Ee=(await Y.get("/parameters")).data;const dt=(_=s.find(Ge=>Ge.name==="storeEmail"))==null?void 0:_.stringValue,ln=(Q=s.find(Ge=>Ge.name==="adminEmail"))==null?void 0:Q.stringValue,Xs=(Z=s.find(Ge=>Ge.name==="alertStore"))==null?void 0:Z.booleanValue,Pc=(oe=s.find(Ge=>Ge.name==="alertAdmin"))==null?void 0:oe.booleanValue,qn=[],sa=(Ge,Uj)=>{let Rc=Ee.find(_h=>_h.name===Ge);return Rc||null},Eh=sa("storeEmail",""),Dh=sa("adminEmail",""),Th=sa("alertStore",!1),Ah=sa("alertAdmin",!1);(!Eh||!Dh||!Th||!Ah)&&(Ee=(await Y.get("/parameters")).data);const Vl=Ee.find(Ge=>Ge.name==="storeEmail"),Bl=Ee.find(Ge=>Ge.name==="adminEmail"),Ul=Ee.find(Ge=>Ge.name==="alertStore"),Wl=Ee.find(Ge=>Ge.name==="alertAdmin");if(Vl&&qn.push({_id:Vl._id,displayName:"Email du Magasin",stringValue:dt!==void 0?dt:Vl.stringValue||"",kmValue:-1}),Bl&&qn.push({_id:Bl._id,displayName:"Email de l'Administrateur",stringValue:ln!==void 0?ln:Bl.stringValue||"",kmValue:-1}),Ul&&qn.push({_id:Ul._id,displayName:"Alerte au Magasin",booleanValue:Xs!==void 0?Xs:Ul.booleanValue??!1,kmValue:-1}),Wl&&qn.push({_id:Wl._id,displayName:"Alerte  l'Administrateur",booleanValue:Pc!==void 0?Pc:Wl.booleanValue??!1,kmValue:-1}),qn.length===0){O.error("Aucun paramtre  sauvegarder");return}console.log(" Sauvegarde des paramtres d'alerte:",qn),await Y.put("/parameters/batch",{parameters:qn}),await wt(),O.success("Configuration des alertes sauvegarde")}catch(Oe){console.error(" Erreur lors de la sauvegarde:",Oe),O.error("Erreur lors de la sauvegarde des alertes: "+(((De=(ve=Oe.response)==null?void 0:ve.data)==null?void 0:De.error)||Oe.message))}finally{i(!1)}},disabled:o,children:o?" Sauvegarde...":" Sauvegarder la configuration des alertes"})})]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Configuration Demande d'Acompte"}),n.jsx("p",{children:"Slectionnez les salaris qui peuvent accder  la demande d'acompte dans leur dashboard"})]}),n.jsx("div",{className:"card-body",children:G?n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des employs..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"email-config",children:n.jsxs("div",{className:"email-input-group",children:[n.jsx("label",{children:" Slectionnez les salaris autoriss :"}),n.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",marginTop:"0.5rem"},children:be.length===0?n.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"Aucun employ trouv"}):be.map(_=>{const Q=s.find(ve=>ve.name==="enableEmployeeAdvanceRequest"),oe=(Q!=null&&Q.stringValue?JSON.parse(Q.stringValue||"[]"):[]).includes(_._id);return n.jsxs("label",{className:"checkbox-option",style:{display:"block",marginBottom:"0.75rem",padding:"0.5rem",borderRadius:"4px",backgroundColor:oe?"#f0f8ff":"transparent"},children:[n.jsx("input",{type:"checkbox",checked:oe,onChange:ve=>{const De=s.find(Ee=>Ee.name==="enableEmployeeAdvanceRequest");if(!De)return;let Oe=De.stringValue?JSON.parse(De.stringValue||"[]"):[];ve.target.checked?Oe.includes(_._id)||Oe.push(_._id):Oe=Oe.filter(Ee=>Ee!==_._id),Gt(De._id,"stringValue",JSON.stringify(Oe))}}),n.jsxs("span",{style:{marginLeft:"0.5rem"},children:[_.name," ",_.email?`(${_.email})`:""]})]},_._id)})}),n.jsx("small",{className:"form-text text-muted",style:{marginTop:"0.5rem",display:"block"},children:"Seuls les salaris slectionns pourront voir et utiliser la demande d'acompte dans leur dashboard."})]})}),n.jsx("div",{className:"email-actions",style:{marginTop:"1.5rem"},children:n.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{const _=s.find(Z=>Z.name==="enableEmployeeAdvanceRequest");if(!_){O.error("Paramtre de demande d'acompte non trouv");return}const Q=[{_id:_._id,displayName:_.displayName,stringValue:_.stringValue||"[]",kmValue:_.kmValue}];console.log(" Sauvegarde du paramtre d'acompte:",Q),await Y.put("/parameters/batch",{parameters:Q}),O.success("Configuration de la demande d'acompte sauvegarde")}catch(_){console.error(" Erreur lors de la sauvegarde:",_),O.error("Erreur lors de la sauvegarde de la configuration")}},children:" Sauvegarder la configuration"})})]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Configuration Email Comptable"}),n.jsx("p",{children:"Adresse email pour l'envoi automatique des arrts maladie valids"})]}),n.jsx("div",{className:"card-body",children:n.jsx("div",{className:"accountant-email-section",children:n.jsxs("div",{className:"email-config",children:[n.jsxs("div",{className:"email-input-group",children:[n.jsx("label",{htmlFor:"accountantEmail",children:" Email du comptable :"}),n.jsx("input",{type:"email",id:"accountantEmail",value:((_c=s.find(_=>_.name==="accountantEmail"))==null?void 0:_c.stringValue)||"",onChange:_=>{if(s.find(Z=>Z.name==="accountantEmail")){const Z=s.map(oe=>oe.name==="accountantEmail"?{...oe,stringValue:_.target.value}:oe);r(Z)}else{const Z={name:"accountantEmail",displayName:"Email du Comptable",stringValue:_.target.value,kmValue:-1,_id:`temp-${Date.now()}`};r([...s,Z])}},className:"email-input",placeholder:"comptable@boulangerie.fr"})]}),n.jsxs("div",{className:"email-info",children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Utilisation :"})," Cette adresse sera utilise pour envoyer automatiquement les arrts maladie valids au comptable."]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Scurit :"})," Vous pouvez galement configurer cette valeur via la variable d'environnement ",n.jsx("code",{children:"ACCOUNTANT_EMAIL"})," dans Render."]})]}),n.jsx("div",{className:"email-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:async()=>{var _,Q,Z;try{i(!0);let ve=(await Y.get("/parameters")).data;const De=(_=s.find(dt=>dt.name==="accountantEmail"))==null?void 0:_.stringValue;let Oe=ve.find(dt=>dt.name==="accountantEmail");if(Oe||(ve=(await Y.get("/parameters")).data,Oe=ve.find(ln=>ln.name==="accountantEmail")),!Oe){O.error("Impossible de crer le paramtre email comptable");return}const Ee={_id:Oe._id,displayName:"Email du Comptable",stringValue:De!==void 0?De:Oe.stringValue||"",kmValue:-1};console.log(" Sauvegarde de l'email comptable:",Ee),await Y.put("/parameters/batch",{parameters:[Ee]}),await wt(),O.success("Email du comptable sauvegard")}catch(oe){console.error(" Erreur lors de la sauvegarde:",oe),O.error("Erreur lors de la sauvegarde de l'email: "+(((Z=(Q=oe.response)==null?void 0:Q.data)==null?void 0:Z.error)||oe.message))}finally{i(!1)}},disabled:o,children:o?" Sauvegarde...":" Sauvegarder l'email du comptable"})})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Gestion des Messages Email"}),n.jsx("p",{children:"Personnalisez le contenu des emails envoys automatiquement"})]}),n.jsx("div",{className:"card-body",children:q?n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des templates d'email..."})]}):n.jsx("div",{className:"email-templates-section",children:M.length===0?n.jsxs("div",{className:"no-templates",children:[n.jsx("p",{children:" Aucun template d'email configur."}),n.jsx("button",{className:"btn btn-primary",onClick:ta,disabled:W,children:W?" Initialisation...":" Crer les templates par dfaut"})]}):n.jsxs("div",{className:"templates-list",children:[n.jsxs("div",{className:"templates-header",children:[n.jsx("h4",{children:" Templates disponibles"}),n.jsx("button",{className:"btn btn-secondary",onClick:ta,disabled:W,children:W?" Mise  jour...":" Mettre  jour les templates"})]}),M.map(_=>n.jsxs("div",{className:"template-item",children:[n.jsxs("div",{className:"template-info",children:[n.jsxs("div",{className:"template-header",children:[n.jsx("h5",{children:_.displayName}),n.jsxs("span",{className:"template-type",children:[_.name==="sick_leave_validation"&&" Validation",_.name==="sick_leave_rejection"&&" Rejet",_.name==="sick_leave_accountant"&&" Comptable",_.name==="sick_leave_alert"&&" Alerte",_.name==="vacation_request_confirmation"&&" Confirmation Congs",_.name==="vacation_request_alert"&&" Alerte Congs",_.name==="vacation_request_validation"&&" Validation Congs",_.name==="employee_password"&&" Mot de Passe Salari",_.name==="advance_request_employee"&&" Confirmation Acompte",_.name==="advance_request_manager"&&" Alerte Acompte",_.name==="advance_approved"&&" Validation Acompte",_.name==="advance_rejected"&&" Rejet Acompte",_.name==="mutuelle_acknowledgement"&&" Accus Mutuelle",_.name==="mutuelle_alert"&&" Alerte Mutuelle",_.name==="mutuelle_validation"&&" Validation Mutuelle",_.name==="mutuelle_rejection"&&" Rejet Mutuelle",_.name==="mutuelle_reminder"&&" Rappel Mutuelle"]})]}),n.jsx("p",{className:"template-description",children:_.description}),n.jsxs("div",{className:"template-subject",children:[n.jsx("strong",{children:"Sujet :"})," ",_.subject]})]}),n.jsx("div",{className:"template-actions",children:n.jsx("button",{className:"btn btn-primary",onClick:()=>zl(_),children:" Modifier"})})]},_._id))]})})})]})]}),e==="objectives"&&n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h3",{children:" Marges des Objectifs Hebdomadaires"})}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{style:{marginBottom:"30px",padding:"20px",background:"#f8f9fa",borderRadius:"10px"},children:[n.jsx("p",{style:{marginBottom:"15px",fontWeight:"600"},children:"Configuration des seuils de performance :"}),n.jsxs("ul",{style:{marginLeft:"20px",lineHeight:"1.8"},children:[n.jsxs("li",{children:[n.jsx("strong",{style:{color:"#28a745"},children:"Vert :"})," 100% ou plus"]}),n.jsxs("li",{children:[n.jsx("strong",{style:{color:"#ffc107"},children:"Jaune :"})," 80%  moins de 100%"]}),n.jsxs("li",{children:[n.jsx("strong",{style:{color:"#ff9800"},children:"Orange :"})," 50%  moins de 80%"]}),n.jsxs("li",{children:[n.jsx("strong",{style:{color:"#dc3545"},children:"Rouge :"})," 0%  moins de 50%"]})]})]}),n.jsxs("div",{className:"form-group",style:{marginBottom:"25px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"10px",fontWeight:"600"},children:[n.jsx("span",{style:{color:"#28a745",fontSize:"1.2rem"},children:""})," Seuil Vert (minimum) :"]}),n.jsx("input",{type:"number",value:ge.vert,onChange:_=>xe({...ge,vert:parseFloat(_.target.value)||100}),min:"0",max:"200",style:{width:"200px",padding:"10px",borderRadius:"8px",border:"2px solid #28a745",fontSize:"1rem"}}),n.jsx("span",{style:{marginLeft:"10px",color:"#666"},children:"%"})]}),n.jsxs("div",{className:"form-group",style:{marginBottom:"25px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"10px",fontWeight:"600"},children:[n.jsx("span",{style:{color:"#ffc107",fontSize:"1.2rem"},children:""})," Seuil Jaune (minimum) :"]}),n.jsx("input",{type:"number",value:ge.jaune,onChange:_=>xe({...ge,jaune:parseFloat(_.target.value)||80}),min:"0",max:"100",style:{width:"200px",padding:"10px",borderRadius:"8px",border:"2px solid #ffc107",fontSize:"1rem"}}),n.jsx("span",{style:{marginLeft:"10px",color:"#666"},children:"%"})]}),n.jsxs("div",{className:"form-group",style:{marginBottom:"25px"},children:[n.jsxs("label",{style:{display:"block",marginBottom:"10px",fontWeight:"600"},children:[n.jsx("span",{style:{color:"#ff9800",fontSize:"1.2rem"},children:""})," Seuil Orange (minimum) :"]}),n.jsx("input",{type:"number",value:ge.orange,onChange:_=>xe({...ge,orange:parseFloat(_.target.value)||50}),min:"0",max:"80",style:{width:"200px",padding:"10px",borderRadius:"8px",border:"2px solid #ff9800",fontSize:"1rem"}}),n.jsx("span",{style:{marginLeft:"10px",color:"#666"},children:"%"})]}),n.jsx("div",{style:{marginTop:"30px"},children:n.jsx("button",{className:"btn btn-primary",onClick:$t,disabled:ct,children:ct?" Sauvegarde...":" Enregistrer les marges"})})]})]}),e==="database"&&n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h3",{children:" Gestion de la Base de Donnes"}),n.jsx("p",{children:"Sauvegarde et restauration complte de la base de donnes"})]}),n.jsxs("div",{className:"card-body",children:[n.jsxs("div",{className:"database-stats",children:[n.jsx("h4",{children:" Statistiques"}),w?n.jsx("p",{children:"Chargement des statistiques..."}):$?n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-item",children:[n.jsx("span",{className:"stat-label",children:"Total documents:"}),n.jsx("span",{className:"stat-value",children:$.totalDocuments})]}),Object.entries($.collections).map(([_,Q])=>n.jsxs("div",{className:"stat-item",children:[n.jsxs("span",{className:"stat-label",children:[_,":"]}),n.jsx("span",{className:"stat-value",children:Q})]},_))]}):n.jsx("p",{children:"Aucune statistique disponible"})]}),n.jsxs("div",{className:"database-actions",children:[n.jsx("h4",{children:" Sauvegarde & Restauration"}),n.jsxs("div",{className:"action-buttons",children:[n.jsx("button",{className:"btn btn-primary",onClick:we,disabled:S,children:S?" Export en cours...":" Exporter Base de Donnes"}),n.jsxs("div",{className:"import-section",children:[n.jsx("input",{type:"file",id:"importFile",accept:".json",onChange:an,style:{display:"none"}}),n.jsx("label",{htmlFor:"importFile",className:`btn btn-warning ${y?"disabled":""}`,children:y?" Import en cours...":" Importer Base de Donnes"})]})]}),n.jsxs("div",{className:"database-warning",children:[n.jsx("h5",{children:" Attention"}),n.jsxs("ul",{children:[n.jsx("li",{children:"L'export cre une sauvegarde complte de toutes les donnes"}),n.jsx("li",{children:"L'import remplace TOUTES les donnes existantes"}),n.jsx("li",{children:"Assurez-vous d'avoir une sauvegarde rcente avant d'importer"}),n.jsx("li",{children:"L'opration d'import ne peut pas tre annule"})]})]})]}),n.jsxs("div",{className:"maintenance-check",style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid #eee"},children:[n.jsx("h4",{children:" Vrification des Mises  Jour"}),n.jsx("p",{style:{marginBottom:"1rem",color:"#666"},children:"Vrifiez les vulnrabilits de scurit et les mises  jour disponibles pour les dpendances"}),n.jsx("button",{className:"btn btn-primary",onClick:zt,disabled:Te,style:{marginBottom:"1rem"},children:Te?" Vrification en cours...":" Vrifier les Mises  Jour"}),re&&n.jsx("div",{className:"maintenance-results",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f9f9f9",borderRadius:"4px"},children:re.error?n.jsxs("div",{style:{color:"#d32f2f"},children:[n.jsx("strong",{children:" Erreur:"})," ",re.error,n.jsx("p",{style:{fontSize:"0.9em",marginTop:"0.5rem"},children:"La vrification ncessite npm install dans les rpertoires backend et frontend. Cette fonctionnalit fonctionne mieux en dveloppement local."})]}):n.jsxs(n.Fragment,{children:[re.summary&&n.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",borderRadius:"4px",backgroundColor:re.summary.status==="critical"?"#ffebee":re.summary.status==="warning"?"#fff3e0":"#e8f5e9"},children:[n.jsx("h5",{style:{marginTop:0},children:re.summary.status==="critical"?" tat Critique":re.summary.status==="warning"?" Attention Requise":" Tout est  Jour"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginTop:"0.5rem"},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Vulnrabilits Critiques:"}),n.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:re.summary.totalCriticalVulnerabilities>0?"#d32f2f":"#4caf50"},children:re.summary.totalCriticalVulnerabilities})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Vulnrabilits leves:"}),n.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold",color:re.summary.totalHighVulnerabilities>0?"#f57c00":"#4caf50"},children:re.summary.totalHighVulnerabilities})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Packages Obsoltes:"}),n.jsx("div",{style:{fontSize:"1.5em",fontWeight:"bold"},children:re.summary.totalOutdatedPackages})]})]}),re.summary.requiresAction&&n.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #ff9800"},children:[n.jsx("strong",{children:" Action recommande:"})," Des mises  jour de scurit sont ncessaires pour garantir la scurit de l'application."]})]}),re.backend&&n.jsxs("div",{style:{marginBottom:"1rem"},children:[n.jsx("h5",{children:" Backend"}),re.backend.vulnerabilities.length>0&&n.jsxs("div",{style:{marginTop:"0.5rem"},children:[n.jsxs("strong",{style:{color:"#d32f2f"},children:["Vulnrabilits (",re.backend.vulnerabilities.length,"):"]}),n.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[re.backend.vulnerabilities.slice(0,5).map((_,Q)=>n.jsxs("li",{style:{marginBottom:"0.25rem"},children:[n.jsx("strong",{children:_.name})," (",_.severity,") - ",_.title]},Q)),re.backend.vulnerabilities.length>5&&n.jsxs("li",{children:["... et ",re.backend.vulnerabilities.length-5," autres"]})]})]}),re.backend.outdated.length>0&&n.jsxs("div",{style:{marginTop:"0.5rem"},children:[n.jsxs("strong",{children:["Packages obsoltes (",re.backend.outdated.length,"):"]}),n.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[re.backend.outdated.slice(0,5).map((_,Q)=>n.jsxs("li",{style:{marginBottom:"0.25rem"},children:[n.jsx("strong",{children:_.name}),": ",_.current,"  ",_.latest]},Q)),re.backend.outdated.length>5&&n.jsxs("li",{children:["... et ",re.backend.outdated.length-5," autres"]})]})]}),re.backend.vulnerabilities.length===0&&re.backend.outdated.length===0&&n.jsx("p",{style:{color:"#4caf50"},children:" Aucun problme dtect"})]}),re.frontend&&n.jsxs("div",{children:[n.jsx("h5",{children:" Frontend"}),re.frontend.vulnerabilities.length>0&&n.jsxs("div",{style:{marginTop:"0.5rem"},children:[n.jsxs("strong",{style:{color:"#d32f2f"},children:["Vulnrabilits (",re.frontend.vulnerabilities.length,"):"]}),n.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[re.frontend.vulnerabilities.slice(0,5).map((_,Q)=>n.jsxs("li",{style:{marginBottom:"0.25rem"},children:[n.jsx("strong",{children:_.name})," (",_.severity,") - ",_.title]},Q)),re.frontend.vulnerabilities.length>5&&n.jsxs("li",{children:["... et ",re.frontend.vulnerabilities.length-5," autres"]})]})]}),re.frontend.outdated.length>0&&n.jsxs("div",{style:{marginTop:"0.5rem"},children:[n.jsxs("strong",{children:["Packages obsoltes (",re.frontend.outdated.length,"):"]}),n.jsxs("ul",{style:{marginTop:"0.5rem",paddingLeft:"1.5rem"},children:[re.frontend.outdated.slice(0,5).map((_,Q)=>n.jsxs("li",{style:{marginBottom:"0.25rem"},children:[n.jsx("strong",{children:_.name}),": ",_.current,"  ",_.latest]},Q)),re.frontend.outdated.length>5&&n.jsxs("li",{children:["... et ",re.frontend.outdated.length-5," autres"]})]})]}),re.frontend.vulnerabilities.length===0&&re.frontend.outdated.length===0&&n.jsx("p",{style:{color:"#4caf50"},children:" Aucun problme dtect"})]}),re.timestamp&&n.jsxs("p",{style:{fontSize:"0.85em",color:"#999",marginTop:"1rem",marginBottom:0},children:["Dernire vrification: ",new Date(re.timestamp).toLocaleString("fr-FR")]})]})})]})]})]})]}),ue&&ae&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content template-editor",children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h3",{children:[" Modifier le Template : ",ae.displayName]}),n.jsx("button",{className:"modal-close",onClick:et,children:""})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"template-editor-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nom d'affichage :"}),n.jsx("input",{type:"text",value:ae.displayName,onChange:_=>Hn("displayName",_.target.value),className:"form-input"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Sujet de l'email :"}),n.jsx("input",{type:"text",value:ae.subject,onChange:_=>Hn("subject",_.target.value),className:"form-input",placeholder:"Utilisez {{variable}} pour les variables"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Description :"}),n.jsx("textarea",{value:ae.description,onChange:_=>Hn("description",_.target.value),className:"form-textarea",rows:"2"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Contenu HTML :"}),n.jsx("textarea",{value:ae.htmlContent,onChange:_=>Hn("htmlContent",_.target.value),className:"form-textarea template-html",rows:"15",placeholder:"Contenu HTML de l'email"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Contenu Texte :"}),n.jsx("textarea",{value:ae.textContent,onChange:_=>Hn("textContent",_.target.value),className:"form-textarea template-text",rows:"10",placeholder:"Version texte de l'email"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Variables disponibles :"}),n.jsx("div",{className:"variables-list",children:ae.variables.map((_,Q)=>n.jsxs("div",{className:"variable-item",children:[n.jsx("code",{children:`{{${_.name}}}`}),n.jsx("span",{className:"variable-description",children:_.description}),_.example&&n.jsxs("span",{className:"variable-example",children:["Ex: ",_.example]})]},Q))})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn btn-secondary",onClick:et,children:"Annuler"}),n.jsx("button",{className:"btn btn-primary",onClick:$l,disabled:W,children:W?" Sauvegarde...":" Sauvegarder"})]})]})})]})},jj=()=>{console.log(" HolidayStatus - Composant charg"),console.log(" HolidayStatus - URL actuelle:",window.location.href);const[e,t]=h.useState([]),[s,r]=h.useState(!1),[a,l]=h.useState(new Set),[o,i]=h.useState(new Set);h.useEffect(()=>{console.log(" HolidayStatus - Chargement automatique des donnes"),c()},[]);const c=async()=>{var m,f;r(!0);try{console.log(" Chargement des congs depuis l'API backend...");const C=(await Y.get("/vacation-requests?city=Arras")).data;if(console.log(" Donnes reues:",C),console.log(" Structure des donnes:",{success:C.success,hasData:!!C.data,dataLength:((m=C.data)==null?void 0:m.length)||0,firstItem:(f=C.data)==null?void 0:f[0]}),C.success&&C.data){const x=C.data.map(j=>({id:j._id,timestamp:new Date(j.uploadDate).toLocaleString("fr-FR"),boulangerie:j.city||"Arras",nom:j.employeeName.split(" ")[1]||"",prenom:j.employeeName.split(" ")[0]||"",dateDebut:new Date(j.startDate).toLocaleDateString("fr-FR"),dateFin:new Date(j.endDate).toLocaleDateString("fr-FR"),commentaire:j.precisions||"",status:j.status,duration:j.duration,reason:j.reason,employeeEmail:j.employeeEmail}));console.log(" Congs rcuprs depuis l'API:",x),console.log(" Nombre de congs:",x.length),console.log(" Congs valids:",x.filter(j=>j.status==="validated").length),t(x)}else console.log(" Aucune donne reue ou format invalide"),t([])}catch(N){console.error(" Erreur lors du chargement des congs:",N),t([])}finally{r(!1)}},d=()=>{const m=e.filter(N=>N.status==="validated"),f=window.open("","_blank");f.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Planning Annuel - Congs Valids</title>
        <style>
          @page { 
            size: A4 landscape; 
            margin: 1cm; 
          }
          body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            padding: 20px; 
          }
          .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #000;
            padding-bottom: 20px;
          }
          .header h1 {
            margin: 0;
            font-size: 24px;
          }
          .planning-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 2px;
            margin-bottom: 20px;
          }
          .month-header {
            background: #f0f0f0;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            border: 1px solid #000;
          }
          .holiday-item {
            background: #e8f5e8;
            padding: 5px;
            margin: 2px 0;
            border: 1px solid #ccc;
            font-size: 10px;
            border-radius: 3px;
          }
          .employee-name {
            font-weight: bold;
          }
          .dates {
            color: #666;
            font-size: 9px;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Planning Annuel - Congs Valids</h1>
          <p>Boulangerie Arras - ${new Date().getFullYear()}</p>
        </div>
        
        <div class="planning-grid">
          ${Array.from({length:12},(N,C)=>{const x=["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"][C],j=m.filter(v=>new Date(v.dateDebut).getMonth()===C);return`
              <div class="month-header">${x}</div>
              <div>
                ${j.map(v=>`
                  <div class="holiday-item">
                    <div class="employee-name">${v.prenom} ${v.nom}</div>
                    <div class="dates">${v.dateDebut} - ${v.dateFin}</div>
                  </div>
                `).join("")}
              </div>
            `}).join("")}
        </div>
      </body>
      </html>
    `),f.document.close(),f.print()};return s?n.jsx("div",{className:"holiday-status",children:n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des congs..."})]})}):n.jsxs("div",{className:"holiday-status",children:[n.jsxs("div",{className:"holiday-header",children:[n.jsx("h3",{children:" tat des Congs"}),n.jsxs("div",{style:{background:"#17a2b8",color:"white",padding:"5px 10px",margin:"5px 0",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:[" DPLOIEMENT #012 - ",new Date().toLocaleString()]}),n.jsxs("div",{className:"holiday-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:c,disabled:s,children:" Actualiser"}),n.jsx("button",{className:"btn btn-success",onClick:d,disabled:e.filter(m=>m.status==="validated").length===0,children:" Imprimer Planning"})]})]}),n.jsxs("div",{className:"holiday-stats",children:[n.jsxs("div",{className:"stat-item",children:[n.jsx("span",{className:"stat-number",children:e.length}),n.jsx("span",{className:"stat-label",children:"Total"})]}),n.jsxs("div",{className:"stat-item",children:[n.jsx("span",{className:"stat-number",children:e.filter(m=>m.status==="validated").length}),n.jsx("span",{className:"stat-label",children:"Valids"})]}),n.jsxs("div",{className:"stat-item",children:[n.jsx("span",{className:"stat-number",children:e.filter(m=>m.status==="rejected").length}),n.jsx("span",{className:"stat-label",children:"Rejets"})]}),n.jsxs("div",{className:"stat-item",children:[n.jsx("span",{className:"stat-number",children:e.filter(m=>m.status==="pending").length}),n.jsx("span",{className:"stat-label",children:"En attente"})]})]}),n.jsxs("div",{className:"holiday-info",children:[n.jsx("p",{children:' Utilisez le bouton "Imprimer Planning" pour voir le calendrier des congs valids.'}),n.jsx("p",{children:' Pour grer les demandes de congs, utilisez la page "Gestion des congs".'})]})]})},bj=()=>{var Ie,G,de;const[e,t]=h.useState(null),[s,r]=h.useState(!1),[a,l]=h.useState(new Date().getMonth()+1),[o,i]=h.useState(new Date().getFullYear()),[c,d]=h.useState([]),[m,f]=h.useState({}),[N,C]=h.useState({}),[x,j]=h.useState({}),[v,u]=h.useState({}),[p,b]=h.useState(""),[E,D]=h.useState(!1),[F,R]=h.useState(null);h.useEffect(()=>{e!=null&&e.employees&&e.employees.length>0&&g(e.employees)},[a,o,e==null?void 0:e.employees]),h.useEffect(()=>{(e==null?void 0:e.accountantComment)!==void 0&&b(e.accountantComment||"")},[e==null?void 0:e.accountantComment]),h.useEffect(()=>()=>{F&&clearTimeout(F)},[F]);const g=async k=>{try{const K={};k&&k.length>0&&await Promise.all(k.map(async X=>{try{const le=await Y.get(`/primes/employee/${X.employeeId}/month/${a}/year/${o}`);le.data.success&&le.data.data&&(K[X.employeeId]=le.data.data.map(se=>({primeName:se.primeId.name,amount:se.amount})))}catch(le){console.error(`Erreur lors du chargement des primes pour ${X.employeeName}:`,le)}})),u(K)}catch(K){console.error("Erreur lors du chargement des primes:",K)}},P=async()=>{try{const k=await Y.get("/advance-requests");if(k.data.success){const K=z(a),X=o.toString(),le=`${K} ${X}`;console.log(" Recherche acomptes pour le mois slectionn UNIQUEMENT:",le),console.log(" Tous les acomptes rcuprs:",k.data.data);const se=k.data.data.filter(ce=>{if(!(ce.status==="approved"))return console.log(`   ${ce.employeeName}: status=${ce.status} (non approuv)`),!1;if(!ce.deductionMonth)return console.log(`   ${ce.employeeName}: pas de mois de dduction`),!1;const Te=ce.deductionMonth.toLowerCase().trim()===le.toLowerCase();return console.log(`  ${Te?"":""} ${ce.employeeName}: month="${ce.deductionMonth}" vs recherche="${le}"  ${Te?"MATCH":"NO MATCH"}`),Te});console.log(` Acomptes filtrs trouvs pour ${le}:`,se.length,"acompte(s)"),console.log(" Dtails:",se.map(ce=>`${ce.employeeName}: ${ce.amount}`)),d(se)}}catch(k){console.error("Erreur lors du chargement des acomptes:",k)}},$=async()=>{var k,K;r(!0);try{const X=await Y.get(`/employee-status?month=${a}&year=${o}`),se=(Array.isArray((k=X.data)==null?void 0:k.employees)?X.data.employees:[]).map(ge=>{const xe=typeof ge.overpaymentAmount=="number"?ge.overpaymentAmount:0,ct=Math.round(xe*100)/100;return{...ge,overpaymentAmount:ct}}),ce={},re={};se.forEach(ge=>{var Ze,$t;const xe=(($t=(Ze=ge.employeeId)==null?void 0:Ze.toString)==null?void 0:$t.call(Ze))??ge.employeeId;if(!xe)return;const At=Number((ge.overpaymentAmount||0).toFixed(2)).toString();ce[xe]=At,re[xe]=At});const Pe=se.reduce((ge,xe)=>ge+(xe.overpaymentAmount||0),0),Te=typeof((K=X.data)==null?void 0:K.overpaymentTotal)=="number"?X.data.overpaymentTotal:Pe,Se=Math.round((Te||0)*100)/100;f(ce),C(re),t({...X.data,employees:se,overpaymentTotal:Se}),await P(),await g(se)}catch(X){console.error("Erreur lors du chargement des donnes:",X),O.error("Erreur lors du chargement des donnes")}finally{r(!1)}},T=(k,K)=>{var le;if(!k&&k!==0)return;const X=((le=k==null?void 0:k.toString)==null?void 0:le.call(k))??k;K!=null&&f(se=>({...se,[X]:K}))},w=async k=>{var Se,ge;if(!(k!=null&&k.employeeId))return;const K=((ge=(Se=k.employeeId)==null?void 0:Se.toString)==null?void 0:ge.call(Se))??k.employeeId,X=(m[K]??"0").toString(),le=X.trim()===""?"0":X.replace(",","."),se=parseFloat(le);if(Number.isNaN(se)||se<0){O.error("Montant de trop peru invalide"),f(xe=>({...xe,[K]:N[K]??"0"}));return}const ce=Math.round(se*100)/100,re=ce.toString();f(xe=>({...xe,[K]:re}));const Pe=parseFloat((N[K]??"0").toString().replace(",",".")),Te=Number.isNaN(Pe)?0:Pe;if(!(Math.abs(Te-ce)<.005))try{j(xe=>({...xe,[K]:!0})),await Y.put("/employee-status/overpayment",{employeeId:k.employeeId,employeeName:k.employeeName,month:a,year:o,amount:ce}),C(xe=>({...xe,[K]:re})),t(xe=>{if(!(xe!=null&&xe.employees))return xe;const ct=xe.employees.map(Ze=>{var Nt,ds;return(((ds=(Nt=Ze.employeeId)==null?void 0:Nt.toString)==null?void 0:ds.call(Nt))??Ze.employeeId)===K?{...Ze,overpaymentAmount:ce}:Ze}),At=ct.reduce((Ze,$t)=>Ze+($t.overpaymentAmount||0),0);return{...xe,employees:ct,overpaymentTotal:Math.round(At*100)/100}}),O.success(`Trop peru sauvegard pour ${k.employeeName}`)}catch(xe){console.error("Erreur lors de la sauvegarde du trop peru:",xe),O.error(`Erreur lors de la sauvegarde du trop peru pour ${k.employeeName}`),f(ct=>({...ct,[K]:N[K]??"0"}))}finally{j(xe=>({...xe,[K]:!1}))}},A=k=>{var se;if(!k&&k!==0)return 0;const K=((se=k==null?void 0:k.toString)==null?void 0:se.call(k))??k,X=m[K];if(X==null||X==="")return 0;const le=parseFloat(X.toString().replace(",","."));return Number.isNaN(le)?0:Math.round(le*100)/100},S=()=>e!=null&&e.employees?e.employees.reduce((k,K)=>k+A(K.employeeId),0):0,V=()=>{const k=window.open("","_blank"),K=document.querySelector(".print-content");if(K){const X=K.cloneNode(!0),le=X.querySelector(".accountant-comment-section"),se=X.querySelector(".accountant-comment-display");le&&le.remove(),se&&se.remove(),k.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>tat des Salaris - ${z(a)} ${o}</title>
          <style>
            body { 
              font-family: Arial, sans-serif; 
              margin: 0; 
              padding: 20px; 
              color: #000;
            }
            .print-header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 2px solid #000;
              padding-bottom: 20px;
            }
            .print-header h1 {
              margin: 0 0 10px 0;
              font-size: 24px;
              font-weight: bold;
            }
            .print-header h2 {
              margin: 0 0 10px 0;
              font-size: 18px;
            }
            .print-date {
              font-size: 12px;
              color: #666;
            }
            .status-table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 30px;
            }
            .status-table th,
            .status-table td {
              border: 1px solid #000;
              padding: 8px;
              text-align: left;
            }
            .status-table th {
              background: #f0f0f0;
              font-weight: bold;
            }
            .totals-row {
              background: #f0f0f0;
              font-weight: bold;
            }
            .print-summary {
              margin-top: 20px;
            }
            .summary-item {
              margin-bottom: 10px;
            }
            .accountant-comment {
              margin-top: 30px;
              padding: 20px;
              border: 2px solid #000;
              background: #fff;
              border-radius: 5px;
            }
            .accountant-comment h3 {
              margin: 0 0 10px 0;
              font-size: 16px;
              font-weight: bold;
              color: #000;
            }
            .accountant-comment-content {
              white-space: pre-wrap;
              font-size: 12px;
              line-height: 1.5;
              color: #000;
              min-height: 100px;
            }
            @media print {
              body { margin: 0; padding: 15px; }
              .status-table tbody tr { page-break-inside: avoid; }
              .accountant-comment {
                page-break-inside: avoid;
              }
            }
          </style>
        </head>
        <body>
          ${X.outerHTML}
          ${p?`
            <div class="accountant-comment">
              <h3> Commentaire pour la comptable :</h3>
              <div class="accountant-comment-content">${p.replace(/\n/g,"<br>")}</div>
            </div>
          `:""}
        </body>
        </html>
      `),k.document.close(),k.focus(),k.print(),k.close()}else window.print()},y=()=>{if(!e)return;let k="data:text/csv;charset=utf-8,";if(k+=["Salari","Frais Repas","Total KM","Acompte","Trop Peru","Primes","Total Gnral"].join(",")+`
`,e.employees&&e.employees.length>0){e.employees.forEach(ge=>{const xe=W(ge.employeeName,ge.employeeId),ct=A(ge.employeeId),At=I(ge.employeeId),Ze=ge.mealExpense.totalAmount+xe-ct+At,$t=[`"${ge.employeeName||"N/A"}"`,`"${M(ge.mealExpense.totalAmount)}"`,`"${ge.kmExpense.totalKm||0} km"`,`"${M(xe)}"`,`"${M(ct)}"`,`"${M(At)}"`,`"${M(Ze)}"`];k+=$t.join(",")+`
`});const se=e.employees.reduce((ge,xe)=>ge+xe.mealExpense.totalAmount,0),ce=e.employees.reduce((ge,xe)=>ge+xe.kmExpense.totalKm,0),re=c.reduce((ge,xe)=>ge+xe.amount,0),Pe=S(),Te=e.employees.reduce((ge,xe)=>ge+I(xe.employeeId),0),Se=se+re-Pe+Te;k+=`"TOTAUX","${M(se)}","${ce} km","${M(re)}","${M(Pe)}","${M(Te)}","${M(Se)}"
`}else k+=`"Aucune donne disponible","","","","","",""
`;const X=encodeURI(k),le=document.createElement("a");le.setAttribute("href",X),le.setAttribute("download",`etat_salaries_${z(a)}_${o}.csv`),document.body.appendChild(le),le.click(),document.body.removeChild(le)},z=k=>["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"][k-1],M=k=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(k),I=k=>!v[k]||v[k].length===0?0:v[k].reduce((K,X)=>K+(X.amount||0),0),q=k=>{b(k),F&&clearTimeout(F);const K=setTimeout(async()=>{try{D(!0),await Y.put("/employee-status/accountant-comment",{month:a,year:o,comment:k})}catch(X){console.error("Erreur lors de la sauvegarde du commentaire:",X),O.error("Erreur lors de la sauvegarde du commentaire")}finally{D(!1)}},1e3);R(K)},U=async()=>{try{D(!0),await Y.put("/employee-status/accountant-comment",{month:a,year:o,comment:p}),O.success("Commentaire sauvegard",{autoClose:1e3})}catch(k){console.error("Erreur lors de la sauvegarde du commentaire:",k),O.error("Erreur lors de la sauvegarde du commentaire")}finally{D(!1)}},W=(k,K)=>{if(!c||c.length===0)return console.log(` Aucun acompte disponible pour ${k}`),0;const X=k.split(" - ")[0].trim().toLowerCase();console.log(` Recherche acomptes pour: "${k}" (ID: ${K})`),console.log(" Acomptes disponibles:",c.map(ce=>({name:ce.employeeName,id:ce.employeeId,amount:ce.amount})));const le=c.filter(ce=>{if(K&&ce.employeeId&&ce.employeeId.toString()===K.toString())return console.log(`   Correspondance par ID: ${ce.employeeId} === ${K} (${ce.amount})`),!0;if(ce.employeeName){const re=ce.employeeName.split(" - ")[0].trim().toLowerCase();if(re===X)return console.log(`   Correspondance par nom exact: "${re}" === "${X}" (${ce.amount})`),!0;if(re.includes(X)||X.includes(re))return console.log(`   Correspondance partielle: "${re}" contient "${X}" (${ce.amount})`),!0}return!1}),se=le.reduce((ce,re)=>ce+re.amount,0);return console.log(` Total acomptes trouvs pour ${k}: ${le.length} acompte(s) = ${se}`),se};if(s)return n.jsx("div",{className:"employee-status-print fade-in",children:n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des donnes..."})]})})});const te=((Ie=e==null?void 0:e.employees)==null?void 0:Ie.reduce((k,K)=>{var X;return k+(((X=K.mealExpense)==null?void 0:X.totalAmount)||0)},0))||0,ae=((G=e==null?void 0:e.employees)==null?void 0:G.reduce((k,K)=>{var X;return k+(((X=K.kmExpense)==null?void 0:X.totalKm)||0)},0))||0,me=(c==null?void 0:c.reduce((k,K)=>k+(K.amount||0),0))||0,ue=e!=null&&e.employees?S():0,pe=((de=e==null?void 0:e.employees)==null?void 0:de.reduce((k,K)=>k+I(K.employeeId),0))||0,be=te+me-ue+pe;return n.jsxs("div",{className:"employee-status-print fade-in",children:[n.jsxs("div",{className:"page-header",children:[n.jsxs("h2",{children:[" tat des Salaris - ",z(a)," ",o]}),n.jsxs("div",{className:"header-actions",children:[n.jsxs("div",{className:"date-selector",children:[n.jsx("select",{value:a,onChange:k=>l(parseInt(k.target.value)),className:"form-control",children:Array.from({length:12},(k,K)=>n.jsx("option",{value:K+1,children:z(K+1)},K+1))}),n.jsx("select",{value:o,onChange:k=>i(parseInt(k.target.value)),className:"form-control",children:Array.from({length:10},(k,K)=>{const X=new Date().getFullYear()-2+K;return n.jsx("option",{value:X,children:X},X)})})]}),n.jsx("button",{className:"btn btn-primary",onClick:$,disabled:s,children:s?" Chargement...":" Actualiser"}),n.jsx("button",{className:"btn btn-success",onClick:V,disabled:!e,children:" Imprimer"}),n.jsx("button",{className:"btn btn-info",onClick:y,disabled:!e,children:" Exporter Excel"})]})]}),e&&n.jsxs("div",{className:"print-content",children:[n.jsxs("div",{className:"print-header",children:[n.jsx("h1",{children:"tat des Salaris"}),n.jsxs("h2",{children:[z(e.month)," ",e.year]}),n.jsxs("div",{className:"print-date",children:["Gnr le ",new Date().toLocaleDateString("fr-FR")]})]}),n.jsxs("div",{className:"accountant-comment-section",style:{padding:"1.5rem 2rem",borderBottom:"1px solid #dee2e6"},children:[n.jsxs("label",{htmlFor:"accountant-comment",style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#2c3e50"},children:[" Commentaire pour la comptable :",E&&n.jsx("span",{style:{marginLeft:"10px",fontSize:"0.85rem",color:"#007bff",fontStyle:"italic"},children:"(sauvegarde en cours...)"})]}),n.jsx("textarea",{id:"accountant-comment",rows:"10",value:p,onChange:k=>q(k.target.value),onBlur:U,placeholder:"Ajoutez un commentaire qui sera affich sur la feuille d'impression...",style:{width:"100%",padding:"0.75rem",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"0.95rem",fontFamily:"Arial, sans-serif",lineHeight:"1.5",resize:"vertical",minHeight:"150px"}})]}),n.jsx("div",{className:"print-table",children:n.jsxs("table",{className:"status-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"header-employee",children:"Salari"}),n.jsx("th",{className:"header-meal",children:"Frais Repas"}),n.jsx("th",{className:"header-km",children:"Total KM"}),n.jsx("th",{className:"header-advance",children:"Acompte"}),n.jsx("th",{className:"header-overpayment",children:"Trop Peru"}),n.jsx("th",{className:"header-primes",children:"Primes"}),n.jsx("th",{className:"header-total",children:"Total Gnral"})]})}),n.jsx("tbody",{children:e.employees.map(k=>{var Pe,Te;const K=W(k.employeeName,k.employeeId),X=A(k.employeeId),le=I(k.employeeId),se=k.mealExpense.totalAmount+K-X+le,ce=((Te=(Pe=k.employeeId)==null?void 0:Pe.toString)==null?void 0:Te.call(Pe))??k.employeeId,re=Object.prototype.hasOwnProperty.call(m,ce)?m[ce]:"0";return n.jsxs("tr",{children:[n.jsx("td",{className:"employee-name",children:n.jsx("strong",{children:k.employeeName})}),n.jsx("td",{className:"meal-amount",children:M(k.mealExpense.totalAmount)}),n.jsxs("td",{className:"km-amount",children:[k.kmExpense.totalKm||0," km"]}),n.jsx("td",{className:"advance-amount",children:M(K)}),n.jsx("td",{className:"overpayment-amount",children:n.jsxs("div",{className:"overpayment-input-wrapper",children:[n.jsx("input",{type:"number",min:"0",step:"0.01",className:"overpayment-input",value:re,onChange:Se=>T(k.employeeId,Se.target.value),onBlur:()=>w(k),onKeyDown:Se=>{Se.key==="Enter"&&(Se.preventDefault(),Se.currentTarget.blur())}}),x[ce]&&n.jsx("span",{className:"overpayment-saving","aria-live":"polite",title:"Sauvegarde en cours",children:""})]})}),n.jsx("td",{className:"primes-amount",children:v[k.employeeId]&&v[k.employeeId].length>0?n.jsxs("div",{children:[v[k.employeeId].map((Se,ge)=>n.jsxs("div",{style:{fontSize:"0.9rem"},children:[Se.primeName,": ",M(Se.amount)]},ge)),n.jsxs("div",{style:{marginTop:"5px",fontWeight:"bold",borderTop:"1px solid #ddd",paddingTop:"3px"},children:["Total: ",M(le)]})]}):n.jsx("span",{style:{color:"#999"},children:"-"})}),n.jsx("td",{className:"total-amount",children:n.jsx("strong",{children:M(se)})})]},k.employeeId)})}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"totals-row",children:[n.jsx("td",{children:n.jsx("strong",{children:"TOTAUX"})}),n.jsx("td",{children:n.jsx("strong",{children:M(te)})}),n.jsx("td",{children:n.jsxs("strong",{children:[ae," km"]})}),n.jsx("td",{children:n.jsx("strong",{children:M(me)})}),n.jsx("td",{children:n.jsx("strong",{children:M(ue)})}),n.jsx("td",{children:n.jsx("strong",{children:M(pe)})}),n.jsx("td",{children:n.jsx("strong",{children:M(be)})})]})})]})}),n.jsxs("div",{className:"print-summary",children:[n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Nombre de salaris :"})," ",e.employees.length]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Total frais repas :"})," ",M(te)]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Total kilomtres :"})," ",ae," km"]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Total acomptes :"})," ",M(me)]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Total trop peru :"})," ",M(ue)]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Total primes :"})," ",M(pe)]}),n.jsxs("div",{className:"summary-item",children:[n.jsx("strong",{children:"Total gnral :"})," ",M(be)]})]}),p&&n.jsxs("div",{className:"accountant-comment-display",style:{padding:"1.5rem 2rem",marginTop:"1rem",borderTop:"2px solid #dee2e6",display:"none"},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"16px",fontWeight:"bold",color:"#2c3e50"},children:" Commentaire pour la comptable :"}),n.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"14px",lineHeight:"1.6",color:"#495057"},children:p})]})]}),!e&&!s&&n.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[n.jsx("h3",{children:" Aucune donne"}),n.jsx("p",{children:'Cliquez sur "Actualiser" pour charger les donnes du mois slectionn.'})]}),n.jsx("div",{style:{marginTop:"2rem"},children:n.jsx(jj,{})})]})},Nj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState(!0);h.useEffect(()=>{a()},[]);const a=async()=>{try{r(!0);const d=await Y.get("/employees");let m=null;d.data.success&&d.data.data?m=d.data.data:Array.isArray(d.data)&&(m=d.data),m?t(m):(t([]),O.error("Format de donnes invalide"))}catch(d){O.error("Erreur lors du chargement des employs"),console.error(d),t([])}finally{r(!1)}},l=()=>{const d={};return e.filter(f=>f.contractType==="Apprentissage"&&f.tutor).forEach(f=>{const N=f.tutor;if(!d[N]){const C=e.find(x=>x._id===N);C&&(d[N]={tutor:C,apprentices:[]})}d[N]&&d[N].apprentices.push(f)}),Object.values(d)},o=d=>({vendeuse:"Vendeuse",apprenti:"Apprenti",responsable:"Responsable",manager:"Manager",preparateur:"Prparateur",chef_prod:"Chef Prod",boulanger:"Boulanger"})[d]||d,i=d=>d?new Date(d).toLocaleDateString("fr-FR"):"-";if(s)return n.jsx("div",{className:"card",children:n.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des tuteurs..."})]})});const c=l();return n.jsxs("div",{className:"tutors fade-in",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h2",{children:" Gestion des Tuteurs"}),n.jsx("p",{children:"Liste des tuteurs et de leurs apprentis"})]}),c.length===0?n.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[n.jsx("h3",{children:" Aucun tuteur trouv"}),n.jsx("p",{children:"Aucun apprenti n'a de tuteur assign pour le moment."})]}):n.jsx("div",{className:"card",children:n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Tuteur"}),n.jsx("th",{children:"Rle"}),n.jsx("th",{children:"Statut"}),n.jsx("th",{children:"Apprentis"}),n.jsx("th",{children:"Dtails des apprentis"})]})}),n.jsx("tbody",{children:c.map((d,m)=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("strong",{children:d.tutor.name})}),n.jsx("td",{children:o(d.tutor.role)}),n.jsx("td",{children:n.jsx("span",{style:{color:d.tutor.isActive?"#28a745":"#dc3545",fontWeight:"bold"},children:d.tutor.isActive?"Actif":"Inactif"})}),n.jsx("td",{children:n.jsx("span",{style:{backgroundColor:"#007bff",color:"white",padding:"0.25rem 0.5rem",borderRadius:"50%",fontSize:"0.9rem",fontWeight:"bold"},children:d.apprentices.length})}),n.jsx("td",{children:n.jsx("div",{style:{maxWidth:"300px"},children:d.apprentices.map((f,N)=>{var C;return n.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",backgroundColor:"#f8f9fa",borderRadius:"4px",border:"1px solid #dee2e6"},children:[n.jsx("div",{style:{fontWeight:"bold",color:"#495057"},children:f.name}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["ge: ",f.age," ans",f.isMinor&&n.jsx("span",{style:{color:"#ffc107",marginLeft:"0.5rem"},children:"(Mineur)"})]}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["Contrat: ",f.contractType]}),f.contractEndDate&&n.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["Fin: ",i(f.contractEndDate)]}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["Formation: ",((C=f.trainingDays)==null?void 0:C.join(", "))||"Aucune"]}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["Statut:",n.jsx("span",{style:{color:f.isActive?"#28a745":"#dc3545",fontWeight:"bold",marginLeft:"0.25rem"},children:f.isActive?"Actif":"Inactif"})]})]},f._id)})})})]},d.tutor._id))})]})})}),n.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[n.jsx("h3",{children:" Statistiques"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#007bff"},children:c.length}),n.jsx("div",{style:{color:"#6c757d"},children:"Tuteurs actifs"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#28a745"},children:e.filter(d=>d.contractType==="Apprentissage").length}),n.jsx("div",{style:{color:"#6c757d"},children:"Apprentis total"})]}),n.jsxs("div",{style:{textAlign:"center",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffc107"},children:e.filter(d=>d.contractType==="Apprentissage"&&!d.tutor).length}),n.jsx("div",{style:{color:"#6c757d"},children:"Sans tuteur"})]})]})]})]})},gu=()=>{const[e,t]=h.useState({employeeName:"",employeeEmail:"",startDate:"",endDate:""}),[s,r]=h.useState(null),[a,l]=h.useState(null),[o,i]=h.useState(!1),[c,d]=h.useState(""),[m,f]=h.useState(""),[N,C]=h.useState([]),[x,j]=h.useState(!0),[v,u]=h.useState(!1),p=Ot();h.useEffect(()=>{(async()=>{try{console.log(" Chargement des employs depuis:",`${p}/employees`);const g=await je.get(`${p}/employees`);console.log(" Rponse API employs:",g.data);let P=null;g.data.success&&g.data.data?P=g.data.data:Array.isArray(g.data)&&(P=g.data),P?(C(P),console.log(" Employs chargs:",P)):(console.error(" Rponse API invalide:",g.data),d("Erreur: rponse API invalide"),f("error"))}catch(g){console.error(" Erreur rcupration employs:",g),d("Erreur lors du chargement de la liste des employs"),f("error")}finally{j(!1)}})()},[p]);const b=R=>{const{name:g,value:P}=R.target;if(g==="employeeName"){const $=N.find(T=>T.name===P);t(T=>({...T,[g]:P,employeeEmail:$?$.email:""}))}else t($=>({...$,[g]:P}))},E=R=>{const g=R.target.files[0];if(g){if(!["image/jpeg","image/jpg","application/pdf"].includes(g.type)){d("Seuls les fichiers JPG et PDF sont accepts"),f("error");return}if(g.size>10*1024*1024){d("Le fichier ne doit pas dpasser 10MB"),f("error");return}if(r(g),d(""),f(""),g.type.startsWith("image/")){const $=new FileReader;$.onload=T=>{l(T.target.result)},$.readAsDataURL(g)}else l(null)}},D=async R=>{var g,P;if(R.preventDefault(),!(v||o)){if(!s){d("Veuillez slectionner un fichier"),f("error");return}u(!0),i(!0),d("");try{const $=new FormData;$.append("sickLeaveFile",s),$.append("employeeName",e.employeeName),$.append("employeeEmail",e.employeeEmail),$.append("startDate",e.startDate),$.append("endDate",e.endDate);const T=await je.post(`${p}/sick-leaves/upload`,$,{headers:{"Content-Type":"multipart/form-data"}});T.data.success?(d("Arrt maladie envoy avec succs !"),f("success"),t({employeeName:"",employeeEmail:"",startDate:"",endDate:""}),r(null),l(null),document.getElementById("fileInput").value=""):(d(T.data.error||"Erreur lors de l'envoi"),f("error"))}catch($){console.error("Erreur upload:",$),d(((P=(g=$.response)==null?void 0:g.data)==null?void 0:P.error)||"Erreur lors de l'envoi de l'arrt maladie"),f("error")}finally{i(!1),u(!1)}}},F=()=>new Date().toISOString().split("T")[0];return n.jsx("div",{className:"sick-leave-upload-standalone",children:n.jsxs("div",{className:"upload-container",children:[n.jsxs("div",{className:"upload-header",children:[n.jsx("h1",{children:" Envoi d'Arrt Maladie"}),n.jsx("p",{children:"Envoyez votre arrt maladie"})]}),n.jsxs("form",{onSubmit:D,className:"upload-form",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"employeeName",children:"Nom complet *"}),n.jsxs("select",{id:"employeeName",name:"employeeName",value:e.employeeName,onChange:b,required:!0,disabled:x,children:[n.jsx("option",{value:"",children:x?"Chargement...":"Slectionnez votre nom"}),N.map(R=>n.jsx("option",{value:R.name,children:R.name},R._id))]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"employeeEmail",children:"Email *"}),n.jsx("input",{type:"email",id:"employeeEmail",name:"employeeEmail",value:e.employeeEmail,onChange:b,required:!0,placeholder:"votre.email@exemple.com",readOnly:!0,className:"readonly-input"})]}),n.jsxs("div",{className:"date-group",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"startDate",children:"Date de dbut d'arrt *"}),n.jsx("input",{type:"date",id:"startDate",name:"startDate",value:e.startDate,onChange:b,required:!0,max:F()})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"endDate",children:"Date de fin d'arrt *"}),n.jsx("input",{type:"date",id:"endDate",name:"endDate",value:e.endDate,onChange:b,required:!0,min:e.startDate||F()})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"fileInput",children:"Arrt maladie (JPG ou PDF) *"}),n.jsxs("div",{className:"file-upload-area",children:[n.jsx("input",{type:"file",id:"fileInput",accept:".jpg,.jpeg,.pdf",onChange:E,required:!0,className:"file-input"}),n.jsx("label",{htmlFor:"fileInput",className:"file-label",children:s?n.jsxs("div",{className:"file-selected",children:[n.jsx("span",{className:"file-icon",children:""}),n.jsx("span",{className:"file-name",children:s.name}),n.jsxs("span",{className:"file-size",children:["(",(s.size/1024/1024).toFixed(2)," MB)"]})]}):n.jsxs("div",{className:"file-placeholder",children:[n.jsx("span",{className:"upload-icon",children:""}),n.jsx("span",{children:"Cliquez pour slectionner un fichier"}),n.jsx("small",{children:"JPG, PDF (max 10MB)"})]})})]})]}),a&&n.jsxs("div",{className:"preview-container",children:[n.jsx("h3",{children:"Aperu :"}),n.jsx("img",{src:a,alt:"Aperu",className:"preview-image"})]}),c&&n.jsx("div",{className:`message ${m}`,children:c}),n.jsx("button",{type:"submit",className:"submit-button",disabled:o||v,children:o||v?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"spinner"}),"Envoi en cours..."]}):n.jsx(n.Fragment,{children:" Envoyer l'arrt maladie"})})]}),n.jsxs("div",{className:"upload-info",children:[n.jsx("h3",{children:" Informations importantes"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Seuls les fichiers JPG et PDF sont accepts"}),n.jsx("li",{children:"Taille maximum : 10MB"}),n.jsx("li",{children:"Vous recevrez une confirmation par email si votre arrt nous est bien transmis"})]})]})]})})},wj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState({}),[a,l]=h.useState(!0),[o,i]=h.useState("all"),[c,d]=h.useState(1),[m,f]=h.useState(1),[N,C]=h.useState(""),[x,j]=h.useState(""),[v,u]=h.useState(null),[p,b]=h.useState(!1),[E,D]=h.useState(!1),[F,R]=h.useState(null),[g,P]=h.useState({startDate:"",endDate:""}),$=Ot(),T=h.useCallback(async()=>{var G,de,k,K;try{l(!0),console.log(" Rcupration des arrts maladie...");const X={page:c,limit:50,sortBy:"uploadDate",sortOrder:"desc"};o!=="all"&&(X.status=o);const le=await je.get(`${$}/sick-leaves`,{params:X});if(le.data.success){let se=le.data.data.sickLeaves||le.data.data;console.log(" Arrts maladie reus:",se),o!=="all"&&(se=se.filter(Se=>Se.status===o)),se.sort((Se,ge)=>new Date(ge.uploadDate)-new Date(Se.uploadDate));const ce=12,re=(c-1)*ce,Pe=re+ce,Te=se.slice(re,Pe);t(Te),f(Math.ceil(se.length/ce)),console.log(` ${se.length} arrts maladie rcuprs, ${Te.length} affichs`)}else console.log(" Rponse API sans succs:",le.data),C("Erreur: Rponse API invalide"),j("error")}catch(X){console.error(" Erreur lors du chargement des arrts maladie:",X),console.error(" Dtails de l'erreur:",(G=X.response)==null?void 0:G.data),console.error(" Status:",(de=X.response)==null?void 0:de.status),C(`Erreur lors du chargement des arrts maladie: ${((K=(k=X.response)==null?void 0:k.data)==null?void 0:K.error)||X.message}`),j("error")}finally{l(!1)}},[o,c,$]),w=async()=>{var de,k;if(window.confirm(` ATTENTION : Cette action va supprimer TOUTES les donnes des arrts maladie de la base de donnes.

- Les fichiers sur le NAS seront conservs
- Seuls les enregistrements de la base de donnes seront supprims
- Cette action est IRRVERSIBLE

tes-vous sr de vouloir continuer ?`))try{console.log(" Suppression de tous les arrts maladie..."),l(!0);const K=await je.delete(`${$}/sick-leaves/all`);K.data.success?(C(` ${K.data.deletedCount} arrts maladie supprims de la base de donnes`),j("success"),await T(),await A()):(C(" Erreur lors de la suppression"),j("error"))}catch(K){console.error(" Erreur suppression arrts maladie:",K),C(` Erreur lors de la suppression: ${((k=(de=K.response)==null?void 0:de.data)==null?void 0:k.error)||K.message}`),j("error")}finally{l(!1)}},A=h.useCallback(async()=>{try{console.log(" Rcupration des statistiques...");const G=await je.get(`${$}/sick-leaves/stats/overview`);G.data.success&&(r(G.data.data),console.log(" Statistiques rcupres:",G.data.data))}catch(G){if(console.error("Erreur rcupration statistiques:",G),e.length>0){const de={total:e.length,pending:e.filter(k=>k.status==="pending").length,validated:e.filter(k=>k.status==="validated").length,declared:e.filter(k=>k.status==="declared").length,rejected:e.filter(k=>k.status==="rejected").length,overdue:0};r(de)}}},[$]);h.useEffect(()=>{T(),A()},[o,c,T,A]);const S=async G=>{var de,k,K;try{(await je.put(`${$}/sick-leaves/${G}/validate`,{validatedBy:"Admin",notes:"Valid par l'administrateur"})).data.success&&(C("Arrt maladie valid avec succs"),j("success"),T(),A())}catch(X){console.error("Erreur validation:",X),((de=X.response)==null?void 0:de.status)===400?(C(((K=(k=X.response)==null?void 0:k.data)==null?void 0:K.error)||"Cet arrt maladie a dj t trait"),j("warning"),T(),A()):(C("Erreur lors de la validation"),j("error"))}},V=async G=>{const de=prompt("Raison du rejet (obligatoire):");if(!de||de.trim()===""){C("La raison du rejet est obligatoire"),j("error");return}if(window.confirm(`tes-vous sr de vouloir rejeter cet arrt maladie ?

Raison : ${de}

Un email sera envoy au salari pour l'informer du rejet.`))try{(await je.put(`${$}/sick-leaves/${G}/reject`,{rejectedBy:"Admin",reason:de.trim()})).data.success&&(C("Arrt maladie rejet - Email envoy au salari"),j("success"),T(),A())}catch(K){console.error("Erreur rejet:",K),C("Erreur lors du rejet"),j("error")}},y=async G=>{const de=prompt("Notes de dclaration (optionnel):")||"",k=window.confirm(`Souhaitez-vous envoyer l'arrt maladie au comptable ?

Cliquez sur OK pour envoyer l'email au comptable.
Cliquez sur Annuler pour marquer comme dclar sans envoyer d'email.`);try{(await je.put(`${$}/sick-leaves/${G}/declare`,{declaredBy:"Admin",notes:de,sendToAccountant:k})).data.success&&(C(k?"Arrt maladie marqu comme dclar et email envoy au comptable":"Arrt maladie marqu comme dclar (email non envoy)"),j("success"),T(),A())}catch(K){console.error("Erreur dclaration:",K),C("Erreur lors de la dclaration"),j("error")}},z=async G=>{if(window.confirm("tes-vous sr de vouloir supprimer cet arrt maladie ? Cette action est irrversible et aucun email ne sera envoy."))try{(await je.delete(`${$}/sick-leaves/${G}`)).data.success&&(C("Arrt maladie supprim avec succs"),j("success"),T(),A())}catch(de){console.error("Erreur suppression:",de),C("Erreur lors de la suppression"),j("error")}},M=async G=>{var de,k;try{(await je.post(`${$}/sick-leaves/${G}/resend-accountant-email`)).data.success?(C("Email au comptable renvoy avec succs"),j("success"),T()):(C("Erreur lors du renvoi de l'email"),j("error"))}catch(K){console.error("Erreur renvoi email:",K),C(((k=(de=K.response)==null?void 0:de.data)==null?void 0:k.error)||"Erreur lors du renvoi de l'email au comptable"),j("error")}},I=G=>{R(G),P({startDate:G.startDate.split("T")[0],endDate:G.endDate.split("T")[0]}),D(!0)},q=()=>{D(!1),R(null),P({startDate:"",endDate:""})},U=async G=>{if(G.preventDefault(),!!F)try{(await je.put(`${$}/sick-leaves/${F._id}`,{startDate:g.startDate,endDate:g.endDate})).data.success&&(C("Dates modifies avec succs"),j("success"),q(),T())}catch(de){console.error("Erreur lors de la modification:",de),C("Erreur lors de la modification des dates"),j("error")}},W=(G="")=>G.split(";")[0].trim().toLowerCase(),te=(G="")=>{const de=W(G);return{"application/pdf":"pdf","image/jpeg":"jpg","image/jpg":"jpg","image/png":"png"}[de]||""},ae=async G=>{if(G!=null&&G._id)try{const de=await je.get(`${$}/sick-leaves/${G._id}/download`,{responseType:"blob"}),k=de.headers["content-type"]||"application/octet-stream",K=new Blob([de.data],{type:k}),X=W(k),le=de.headers["content-disposition"];let se=G.originalFileName||`arret-maladie-${G._id}`;if(le){const Te=le.match(/filename\*?=(?:UTF-8'')?\"?([^\";]+)/i);if(Te&&Te[1])try{se=decodeURIComponent(Te[1].replace(/\"/g,"").trim())}catch{se=Te[1].replace(/\"/g,"").trim()}}const ce=te(X);ce&&!se.toLowerCase().endsWith(`.${ce}`)&&(se=`${se}.${ce}`);const re=window.URL.createObjectURL(K),Pe=document.createElement("a");Pe.href=re,Pe.setAttribute("download",se),document.body.appendChild(Pe),Pe.click(),Pe.remove(),window.URL.revokeObjectURL(re),console.log(" Fichier tlcharg:",se)}catch(de){console.error(" Erreur tlchargement:",de),C("Erreur lors du tlchargement du fichier"),j("error")}},me=G=>{u(G),b(!0)},ue=()=>{b(!1),u(null)},pe=G=>{const k={pending:{text:"En attente",class:"status-pending"},validated:{text:"Valid",class:"status-validated"},declared:{text:"Dclar",class:"status-declared"},rejected:{text:"Rejet",class:"status-rejected"}}[G]||{text:G,class:"status-default"};return n.jsx("span",{className:`status-badge ${k.class}`,children:k.text})},be=G=>new Date(G).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}),Ie=G=>{if(G===0)return"0 Bytes";const de=1024,k=["Bytes","KB","MB","GB"],K=Math.floor(Math.log(G)/Math.log(de));return parseFloat((G/Math.pow(de,K)).toFixed(2))+" "+k[K]};return n.jsxs("div",{className:"sick-leave-admin",children:[n.jsxs("div",{className:"admin-header",children:[n.jsx("h1",{children:" Gestion des Arrts Maladie"}),n.jsx("p",{children:"Suivi et validation des arrts maladie des salaris"})]}),n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-item",children:[n.jsx("div",{className:"stat-number",children:s.total||0}),n.jsx("div",{className:"stat-label",children:"Total"})]}),n.jsxs("div",{className:"stat-item pending",children:[n.jsx("div",{className:"stat-number",children:s.pending||0}),n.jsx("div",{className:"stat-label",children:"En attente"})]}),n.jsxs("div",{className:"stat-item validated",children:[n.jsx("div",{className:"stat-number",children:s.validated||0}),n.jsx("div",{className:"stat-label",children:"Valids"})]}),n.jsxs("div",{className:"stat-item declared",children:[n.jsx("div",{className:"stat-number",children:s.declared||0}),n.jsx("div",{className:"stat-label",children:"Dclars"})]}),s.overdue>0&&n.jsxs("div",{className:"stat-item overdue",children:[n.jsx("div",{className:"stat-number",children:s.overdue}),n.jsx("div",{className:"stat-label",children:"En retard"})]})]}),n.jsxs("div",{className:"admin-actions",children:[n.jsx("button",{className:"btn btn-danger",onClick:w,disabled:a||(s.total||0)===0,style:{opacity:(s.total||0)===0?.5:1,cursor:(s.total||0)===0?"not-allowed":"pointer"},children:" Effacer toutes les donnes"}),n.jsxs("p",{className:"admin-warning",children:[" Attention : Ce bouton supprime uniquement les donnes de la base de donnes.",n.jsx("br",{}),"Les fichiers sur le NAS sont conservs."]})]}),n.jsx("div",{className:"filters-row",children:n.jsxs("select",{value:o,onChange:G=>{i(G.target.value),d(1)},className:"status-filter",children:[n.jsx("option",{value:"all",children:"Tous les statuts"}),n.jsx("option",{value:"pending",children:"En attente"}),n.jsx("option",{value:"validated",children:"Valids"}),n.jsx("option",{value:"declared",children:"Dclars"}),n.jsx("option",{value:"rejected",children:"Rejets"})]})}),N&&n.jsx("div",{className:`message ${x}`,children:N}),n.jsx("div",{className:"sick-leaves-list",children:a?n.jsx("div",{className:"loading",children:"Chargement..."}):e.length===0?n.jsx("div",{className:"no-data",children:"Aucun arrt maladie trouv"}):n.jsx("div",{className:"sick-leaves-grid",children:e.map(G=>{var de,k,K;return n.jsxs("div",{className:"sick-leave-card",children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"employee-info",children:[n.jsx("h3",{children:G.employeeName}),n.jsx("p",{children:G.employeeEmail})]}),pe(G.status)]}),n.jsxs("div",{className:"card-content",children:[n.jsxs("div",{className:"period",children:[n.jsx("strong",{children:"Priode:"})," ",be(G.startDate)," - ",be(G.endDate),n.jsxs("span",{className:"duration",children:["(",G.duration," jour",G.duration>1?"s":"",")"]})]}),n.jsxs("div",{className:"file-info",children:[n.jsx("strong",{children:"Fichier:"})," ",G.originalFileName,n.jsxs("span",{className:"file-size",children:["(",Ie(G.fileSize),")"]})]}),n.jsxs("div",{className:"validation-info",children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[n.jsxs("div",{className:`quality-score ${G.autoValidation.qualityScore>=60?"good":"poor"}`,children:["Score: ",G.autoValidation.qualityScore,"/100"]}),n.jsx("button",{onClick:()=>z(G._id),className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"0.9em"},title:"Supprimer (sans envoyer d'email)",children:""})]}),G.isOverdue&&n.jsx("div",{className:"overdue-warning",children:" En retard"}),n.jsxs("div",{className:"email-status",style:{marginTop:"8px",fontSize:"0.75em"},children:[G.status==="validated"||G.status==="declared"?(de=G.validationEmail)!=null&&de.sent?n.jsx("div",{style:{color:"#155724",marginBottom:"2px"},title:`Email de validation envoy le ${new Date(G.validationEmail.sentAt).toLocaleString("fr-FR")}`,children:" Validation: Envoy"}):n.jsx("div",{style:{color:"#721c24",marginBottom:"2px"},title:"Email de validation non envoy",children:" Validation: Non envoy"}):(k=G.confirmationEmail)!=null&&k.sent?n.jsx("div",{style:{color:"#155724",marginBottom:"2px"},title:`Email de confirmation envoy le ${new Date(G.confirmationEmail.sentAt).toLocaleString("fr-FR")}`,children:" Confirmation: Envoy"}):n.jsx("div",{style:{color:"#721c24",marginBottom:"2px"},title:"Email de confirmation non envoy",children:" Confirmation: Non envoy"}),(K=G.accountantNotification)!=null&&K.sent?n.jsx("div",{style:{color:"#155724"},title:`Email comptable envoy le ${new Date(G.accountantNotification.sentAt).toLocaleString("fr-FR")}  ${G.accountantNotification.sentTo}`,children:" Comptable: Envoy"}):n.jsx("div",{style:{color:"#721c24"},title:"Email comptable non envoy",children:" Comptable: Non envoy"})]})]})]}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{onClick:()=>me(G),className:"btn btn-info",title:"Voir dtails",children:""}),n.jsx("button",{onClick:()=>ae(G),className:"btn btn-download",title:"Tlcharger",children:""}),G.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>I(G),className:"btn btn-warning",title:"Modifier les dates",children:""}),n.jsx("button",{onClick:()=>S(G._id),className:"btn btn-success",title:"Valider",children:""}),n.jsx("button",{onClick:()=>V(G._id),className:"btn btn-danger",title:"Rejeter",children:""})]}),G.status==="validated"&&n.jsx("button",{onClick:()=>y(G._id),className:"btn btn-primary",title:"Marquer comme dclar",children:""}),(G.status==="validated"||G.status==="declared")&&n.jsx("button",{onClick:()=>M(G._id),className:"btn btn-warning",title:"Renvoyer l'email au comptable",children:""})]})]},G._id)})})}),m>1&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{onClick:()=>d(G=>Math.max(G-1,1)),disabled:c===1,className:"page-btn",children:"Prcdent"}),n.jsxs("span",{className:"page-info",children:["Page ",c," sur ",m]}),n.jsx("button",{onClick:()=>d(G=>Math.min(G+1,m)),disabled:c===m,className:"page-btn",children:"Suivant"})]}),p&&v&&n.jsx("div",{className:"modal-overlay",onClick:ue,children:n.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:"Dtails de l'arrt maladie"}),n.jsx("button",{onClick:ue,className:"close-btn",children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Salari"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nom:"})," ",v.employeeName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",v.employeeEmail]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Priode d'arrt"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Dbut:"})," ",be(v.startDate)]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Fin:"})," ",be(v.endDate)]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Dure:"})," ",v.duration," jour",v.duration>1?"s":""]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Fichier"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nom:"})," ",v.originalFileName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Taille:"})," ",Ie(v.fileSize)]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Type:"})," ",v.fileType]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Upload le:"})," ",be(v.uploadDate)]})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Validation automatique"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Score:"})," ",v.autoValidation.qualityScore,"/100"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Message:"})," ",v.autoValidation.validationMessage]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Lisible:"})," ",v.autoValidation.isReadable?"Oui":"Non"]})]}),v.manualValidation.validatedBy&&n.jsxs("div",{className:"detail-section",children:[n.jsx("h3",{children:"Validation manuelle"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Valid par:"})," ",v.manualValidation.validatedBy]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",be(v.manualValidation.validatedAt)]}),v.manualValidation.validationNotes&&n.jsxs("p",{children:[n.jsx("strong",{children:"Notes:"})," ",v.manualValidation.validationNotes]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{onClick:()=>ae(v._id),className:"btn btn-download",children:" Tlcharger"}),n.jsx("button",{onClick:ue,className:"btn btn-secondary",children:"Fermer"})]})]})}),E&&F&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:" Modifier les dates"}),n.jsx("button",{onClick:q,className:"close-btn",children:""})]}),n.jsxs("form",{onSubmit:U,children:[n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"form-group",children:n.jsxs("label",{children:["Employ: ",F.employeeName]})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editStartDate",children:"Date de dbut:"}),n.jsx("input",{type:"date",id:"editStartDate",value:g.startDate,onChange:G=>P({...g,startDate:G.target.value}),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editEndDate",children:"Date de fin:"}),n.jsx("input",{type:"date",id:"editEndDate",value:g.endDate,onChange:G=>P({...g,endDate:G.target.value}),required:!0})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"submit",className:"btn btn-primary",children:" Sauvegarder"}),n.jsx("button",{type:"button",onClick:q,className:"btn btn-secondary",children:"Annuler"})]})]})]})})]})},Sj=()=>n.jsx("div",{className:"sick-leave-home",children:n.jsxs("div",{className:"home-container",children:[n.jsxs("div",{className:"home-header",children:[n.jsx("h1",{children:" Arrts Maladie"}),n.jsx("p",{children:"Envoyez votre arrt maladie en toute scurit"})]}),n.jsxs("div",{className:"home-content",children:[n.jsxs("div",{className:"info-card",children:[n.jsx("h2",{children:" Comment envoyer votre arrt maladie ?"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Remplissez le formulaire avec vos informations"}),n.jsx("li",{children:"Scannez ou photographiez votre arrt maladie"}),n.jsx("li",{children:"Envoyez le fichier (JPG ou PDF)"}),n.jsx("li",{children:"Recevez une confirmation"})]})]}),n.jsxs("div",{className:"requirements-card",children:[n.jsx("h2",{children:" Exigences"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Fichier JPG ou PDF uniquement"}),n.jsx("li",{children:"Taille maximum : 10MB"}),n.jsx("li",{children:"Document lisible et de bonne qualit"}),n.jsx("li",{children:"Dates de dbut et fin d'arrt"})]})]}),n.jsxs("div",{className:"security-card",children:[n.jsx("h2",{children:" Scurit"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Vos donnes sont chiffres"}),n.jsx("li",{children:"Stockage scuris sur notre serveur"}),n.jsx("li",{children:"Accs restreint aux administrateurs"}),n.jsx("li",{children:"Conformit RGPD"})]})]})]}),n.jsx("div",{className:"action-section",children:n.jsx(qp,{to:"/sick-leave-upload",className:"upload-button",children:" Envoyer mon arrt maladie"})}),n.jsxs("div",{className:"contact-info",children:[n.jsx("h3",{children:" Besoin d'aide ?"}),n.jsx("p",{children:"Contactez votre responsable ou l'administration"})]})]})}),Cj=2032,kj=()=>{Un();const[e,t]=h.useState([]),[s,r]=h.useState([]),[a,l]=h.useState(!0),[o,i]=h.useState(!1),[c,d]=h.useState(null),[m,f]=h.useState({startDate:"",endDate:""}),[N,C]=h.useState("all"),[x,j]=h.useState("all"),v=()=>"/lon/".replace(/\/$/,"");console.log(" VacationRequestAdmin - Rendu du composant"),h.useEffect(()=>{console.log(" tat showEditModal chang:",o),o||console.log(" Modal ferm - Stack trace:",new Error().stack)},[o]);const u=async()=>{try{l(!0),console.log(" Rcupration des demandes de congs...");const S=await Y.get("/vacation-requests");S.data.success?(t(S.data.data),console.log(" Demandes de congs charges:",S.data.data.length),E(S.data.data)):(t([]),r([]),console.error(" Format de donnes invalide"))}catch(S){console.error(" Erreur lors du chargement:",S),O.error("Erreur lors du chargement des demandes de congs"),t([]),r([])}finally{l(!1)}},p=S=>{if(!S)return null;const V=new Date(S);return Number.isNaN(V.getTime())?null:V.getFullYear()},b=h.useMemo(()=>{const S=new Set,V=new Date().getFullYear();e.forEach(y=>{const z=p(y.startDate),M=p(y.endDate),I=p(y.createdAt);z&&S.add(z),M&&S.add(M),I&&S.add(I)});for(let y=V;y<=Cj;y+=1)S.add(y);return Array.from(S).sort((y,z)=>y-z)},[e]),E=(S=e)=>{let V=S;if(N!=="all"&&(V=V.filter(y=>y.status===N)),x!=="all"){const y=parseInt(x,10);V=V.filter(z=>(p(z.startDate)??p(z.endDate)??p(z.createdAt))===y)}r(V)};h.useEffect(()=>{E()},[N,x,e]),h.useEffect(()=>{u()},[]);const D=S=>{console.log(" Ouverture modal modification pour:",S);const V={startDate:S.startDate,endDate:S.endDate,startDateType:typeof S.startDate,endDateType:typeof S.endDate};console.log(" Dates originales:",V);const y={startDate:S.startDate.split("T")[0],endDate:S.endDate.split("T")[0]};console.log(" Dates extraites:",y),d(S),f(y),i(!0),console.log(" Modal ouvert:",!0),setTimeout(()=>{console.log(" Vrification modal aprs 1 seconde - Modal devrait tre ouvert"),o||console.log(" MODAL FERM AUTOMATIQUEMENT - Raison possible: re-render ou autre vnement")},1e3)},F=()=>{console.log(" Fermeture modal - Appele depuis:",new Error().stack),console.log(" tat showEditModal avant fermeture:",o),i(!1),d(null),f({startDate:"",endDate:""})},R=async S=>{if(S.preventDefault(),!!c)try{console.log(" Soumission modification pour:",c._id),console.log(" Nouvelles dates:",m);const V=await Y.patch(`/vacation-requests/${c._id}`,{startDate:m.startDate,endDate:m.endDate});console.log(" Rponse API modification:",V.data),V.data.success?(O.success("Demande de congs modifie avec succs"),F(),u()):O.error("Erreur lors de la modification")}catch(V){console.error(" Erreur lors de la modification:",V),O.error("Erreur lors de la modification de la demande")}},g=async S=>{try{(await Y.patch(`/vacation-requests/${S}/accept`)).data.success&&(O.success("Demande accepte"),u())}catch(V){console.error("Erreur acceptation:",V),O.error("Erreur lors de l'acceptation")}},P=async S=>{try{(await Y.patch(`/vacation-requests/${S}/reject`)).data.success&&(O.success("Demande rejete"),u())}catch(V){console.error("Erreur rejet:",V),O.error("Erreur lors du rejet")}},$=async S=>{try{(await Y.patch(`/vacation-requests/${S}/cancel`)).data.success&&(O.success("Demande annule"),u())}catch(V){console.error("Erreur annulation:",V),O.error("Erreur lors de l'annulation")}},T=S=>{const y={pending:{text:"En attente",class:"badge-warning",icon:""},validated:{text:"Valid",class:"badge-success",icon:""},accepted:{text:"Accept",class:"badge-success",icon:""},rejected:{text:"Rejet",class:"badge-danger",icon:""},cancelled:{text:"Annul",class:"badge-secondary",icon:""}}[S]||{text:S,class:"badge-secondary",icon:""};return n.jsxs("span",{className:`status-badge ${y.class}`,children:[y.icon," ",y.text]})},w=S=>new Date(S).toLocaleDateString("fr-FR"),A=(S,V)=>{const y=new Date(S),z=new Date(V),M=Math.abs(z-y);return Math.ceil(M/(1e3*60*60*24))+1};return n.jsxs("div",{className:"vacation-request-admin",children:[n.jsxs("div",{className:"admin-header",children:[n.jsx("h1",{children:" Gestion des Demandes de Congs"}),n.jsx("p",{children:"Validation et suivi des demandes de congs des employs"})]}),n.jsxs("div",{className:"admin-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>window.open(`${v()}/vacation-planning`,"_blank"),children:" Impression Calendrier"}),n.jsx("button",{className:"btn btn-warning",onClick:async()=>{try{const S=await Y.post("/vacation-requests/sync-employees");S.data.success&&(O.success(`Synchronisation termine: ${S.data.syncedCount} employs mis  jour`),u())}catch{O.error("Erreur lors de la synchronisation")}},children:" Synchroniser Congs"})]}),n.jsxs("div",{className:"filters-section",children:[n.jsxs("div",{className:"filter-group",children:[n.jsx("label",{htmlFor:"status-filter",children:"Statut :"}),n.jsxs("select",{id:"status-filter",value:N,onChange:S=>C(S.target.value),className:"form-control",children:[n.jsxs("option",{value:"all",children:["Toutes (",e.length,")"]}),n.jsxs("option",{value:"pending",children:[" En attente (",e.filter(S=>S.status==="pending").length,")"]}),n.jsxs("option",{value:"validated",children:[" Valides (",e.filter(S=>S.status==="validated").length,")"]}),n.jsxs("option",{value:"rejected",children:[" Rejetes (",e.filter(S=>S.status==="rejected").length,")"]})]})]}),n.jsxs("div",{className:"filter-group",children:[n.jsx("label",{htmlFor:"year-filter",children:"Anne des congs :"}),n.jsxs("select",{id:"year-filter",value:x,onChange:S=>j(S.target.value),className:"form-control",children:[n.jsx("option",{value:"all",children:"Toutes les annes"}),b.map(S=>n.jsx("option",{value:S,children:S},S))]})]})]}),n.jsx("div",{className:"vacation-requests-list",children:a?n.jsx("div",{className:"loading",children:"Chargement des demandes de congs..."}):s.length===0?n.jsx("div",{className:"no-data",children:n.jsx("p",{children:"Aucune demande de congs trouve pour les filtres slectionns"})}):n.jsx("div",{className:"requests-grid",children:s.map(S=>n.jsxs("div",{className:`request-card status-${S.status}`,children:[n.jsxs("div",{className:"card-header",children:[n.jsxs("div",{className:"employee-info",children:[n.jsx("h3",{className:"employee-name",children:S.employeeName}),n.jsx("p",{className:"employee-email",children:S.employeeEmail}),n.jsxs("p",{className:"employee-city",children:[" ",S.city]})]}),n.jsx("div",{className:"status-badge-container",children:T(S.status)})]}),n.jsxs("div",{className:"card-content",children:[n.jsxs("div",{className:"info-row period-row",children:[n.jsx("span",{className:"info-label",children:" Priode"}),n.jsxs("span",{className:"info-value",children:[w(S.startDate),"  ",w(S.endDate)]}),n.jsxs("span",{className:"duration-badge",children:[A(S.startDate,S.endDate)," jour",A(S.startDate,S.endDate)>1?"s":""]})]}),S.type&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" Type"}),n.jsx("span",{className:"info-value",children:S.type||"-"})]}),S.reason&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" Raison"}),n.jsx("span",{className:"info-value",children:S.reason||"-"})]}),S.validatedAt&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" Valid le"}),n.jsx("span",{className:"info-value",children:w(S.validatedAt)})]}),S.rejectedAt&&n.jsxs("div",{className:"info-row",children:[n.jsx("span",{className:"info-label",children:" Rejet le"}),n.jsx("span",{className:"info-value",children:w(S.rejectedAt)})]})]}),n.jsxs("div",{className:"card-actions",children:[S.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>g(S._id),className:"btn btn-success btn-action",title:"Accepter",children:" Accepter"}),n.jsx("button",{onClick:()=>D(S),className:"btn btn-warning btn-action",title:"Modifier",children:" Modifier"}),n.jsx("button",{onClick:()=>P(S._id),className:"btn btn-danger btn-action",title:"Rejeter",children:" Rejeter"})]}),S.status==="validated"&&n.jsx("button",{onClick:()=>$(S._id),className:"btn btn-secondary btn-action",title:"Annuler",children:" Annuler"})]})]},S._id))})}),o&&c&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:" Modifier les dates de congs"}),n.jsx("button",{onClick:F,className:"close-btn",children:""})]}),n.jsxs("form",{onSubmit:R,children:[n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"form-group",children:n.jsxs("label",{children:["Employ: ",c.employeeName]})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editStartDate",children:"Date de dbut:"}),n.jsx("input",{type:"date",id:"editStartDate",value:m.startDate,onChange:S=>f({...m,startDate:S.target.value}),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{htmlFor:"editEndDate",children:"Date de fin:"}),n.jsx("input",{type:"date",id:"editEndDate",value:m.endDate,onChange:S=>f({...m,endDate:S.target.value}),required:!0})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{type:"submit",className:"btn btn-primary",children:" Sauvegarder"}),n.jsx("button",{type:"button",onClick:F,className:"btn btn-secondary",children:"Annuler"})]})]})]})})]})},Ej=()=>{const[e,t]=h.useState([]),[s,r]=h.useState([]),[a,l]=h.useState(!0),[o,i]=h.useState(new Date().getFullYear()),[c,d]=h.useState("vente"),m=async()=>{try{l(!0);const P=await Y.get("/employees"),$=P.data.success?P.data.data:P.data;r($);const T=await Y.get("/vacation-requests"),A=(T.data.success?T.data.data:T.data).filter(S=>S.status==="validated");t(A)}catch(P){console.error(" Erreur lors du chargement:",P),O.error("Erreur lors du chargement des donnes")}finally{l(!1)}};h.useEffect(()=>{m()},[]);const f={vente:["Vendeuse","Responsable","Manager","App. Vendeuse"],production:["Chef Prod","Boulanger","App. Boulanger","Prparateur","App. Prparateur"]},N=()=>{const P=f[c];return s.filter($=>{const T=$.role||"";return P.some(w=>T.toLowerCase().includes(w.toLowerCase()))}).sort(($,T)=>$.name.localeCompare(T.name))},C=(P,$)=>new Date($,P,0).getDate(),x=(P,$,T)=>new Date(T,$-1,P).getDay(),j=P=>["D","L","M","M","J","V","S"][P],v=(P,$,T)=>x(P,$,T)===0,u=(P,$,T,w)=>{const A=s.find(y=>y._id===P);if(!A)return null;const S=new Date(Date.UTC(w,T-1,$));return S.setHours(12,0,0,0),e.find(y=>{if(y.employeeName!==A.name||y.status!=="validated")return!1;const z=y.startDate.split("T")[0],M=y.endDate.split("T")[0],[I,q,U]=z.split("-").map(Number),[W,te,ae]=M.split("-").map(Number),me=new Date(Date.UTC(I,q-1,U));me.setHours(12,0,0,0);const ue=new Date(Date.UTC(W,te-1,ae));return ue.setHours(12,0,0,0),S>=me&&S<=ue})},p=P=>{const $=(P||"").toLowerCase();return $.includes("vendeuse")||$.includes("responsable")||$.includes("manager")||$.includes("app. vendeuse")?"#e3f2fd":$.includes("chef prod")||$.includes("boulanger")||$.includes("app. boulanger")?"#fff3e0":$.includes("prparateur")||$.includes("app. prparateur")?"#e8f5e8":"#f5f5f5"},b=[{name:"Janvier",number:1},{name:"Fvrier",number:2},{name:"Mars",number:3},{name:"Avril",number:4},{name:"Mai",number:5},{name:"Juin",number:6},{name:"Juillet",number:7},{name:"Aot",number:8},{name:"Septembre",number:9},{name:"Octobre",number:10},{name:"Novembre",number:11},{name:"Dcembre",number:12}],E=31,D=()=>{window.print()};if(a)return n.jsxs("div",{className:"vacation-planning-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement du planning..."})]});const F=N(),R=c==="vente"?"Vente":"Prpa",g=new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"vacation-planning",children:[n.jsxs("div",{className:"print-header",children:["Planning Congs ",R," - Gnr le ",g]}),n.jsxs("div",{className:"planning-header",children:[n.jsxs("div",{className:"header-title",children:[n.jsxs("h1",{children:["Calendrier ",o]}),n.jsx("p",{className:"subtitle",children:"Planning annuel des congs valids"})]}),n.jsxs("div",{className:"header-controls",children:[n.jsxs("div",{className:"control-group",children:[n.jsx("label",{children:"Anne :"}),n.jsx("select",{value:o,onChange:P=>i(parseInt(P.target.value)),className:"control-select",children:Array.from({length:5},(P,$)=>{const T=new Date().getFullYear()-2+$;return n.jsx("option",{value:T,children:T},T)})})]}),n.jsxs("div",{className:"control-group",children:[n.jsx("label",{children:"Catgorie :"}),n.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"control-select",children:[n.jsx("option",{value:"vente",children:"Vente (Vendeuse, Responsable, Manager, App. Vendeuse)"}),n.jsx("option",{value:"production",children:"Production (Chef Prod, Boulanger, Prparateur, Apprentis)"})]})]}),n.jsx("button",{onClick:D,className:"btn-print",children:" Imprimer"})]})]}),n.jsxs("div",{className:"legend",children:[n.jsxs("div",{className:"legend-item",children:[n.jsx("span",{className:"legend-color vente"}),n.jsx("span",{children:"Vente"})]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("span",{className:"legend-color chef-boulanger"}),n.jsx("span",{children:"Chef Prod / Boulanger"})]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("span",{className:"legend-color preparateur"}),n.jsx("span",{children:"Prparateur"})]})]}),n.jsx("div",{className:"calendar-wrapper",children:n.jsxs("table",{className:"calendar-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"first-header"}),b.map(P=>n.jsx("th",{className:"month-header",children:P.name},P.number))]})}),n.jsx("tbody",{children:Array.from({length:E},(P,$)=>{const T=$+1;return n.jsxs("tr",{className:"day-row",children:[n.jsx("td",{className:"day-number-cell",children:T<=31?T:""}),b.map(w=>{const A=C(w.number,o),S=T<=A,V=S?x(T,w.number,o):-1,y=S?j(V):"",z=S&&v(T,w.number,o),M=F.filter(I=>u(I._id,T,w.number,o)!==null);return n.jsx("td",{className:`calendar-day-cell ${S?"":"empty"} ${z?"sunday":""}`,children:S&&n.jsxs("div",{className:"day-content",children:[n.jsx("span",{className:"day-value",children:T}),n.jsx("span",{className:"day-letter",children:y}),M.length>0&&n.jsx("div",{className:"vacation-initials",children:M.map((I,q)=>{const U=u(I._id,T,w.number,o);if(!U)return null;const W=I.name.split(" ");let te="";W.length>=2?te=W[0].charAt(0).toUpperCase()+W[W.length-1].charAt(0).toUpperCase():W.length===1&&(te=W[0].substring(0,2).toUpperCase());const ae=new Date(U.startDate),me=new Date(U.endDate);return n.jsx("span",{className:"employee-initial",style:{backgroundColor:p(I.role),color:"#333"},title:`${I.name}: ${ae.toLocaleDateString("fr-FR")} - ${me.toLocaleDateString("fr-FR")}`,children:te},I._id)})})]})},w.number)})]},T)})})]})})]})},Dj=()=>{const[e,t]=h.useState(new Date().toISOString().slice(0,7)),[s,r]=h.useState([]),[a,l]=h.useState(!1),[o,i]=h.useState(!1),[c,d]=h.useState("up"),[m,f]=h.useState(!1),[N,C]=h.useState(""),[x,j]=h.useState(1),[v,u]=h.useState(!1),[p,b]=h.useState(""),[E,D]=h.useState({up:{count:0,amount:0},pluxee:{count:0,amount:0},bimpli:{count:0,amount:0},edenred:{count:0,amount:0},total:{count:0,amount:0}});h.useEffect(()=>{F()},[e]),h.useEffect(()=>{R()},[s]);const F=async()=>{try{l(!0);const I=await Y.get(`/ticket-restaurant?month=${e}`);r(I.data.tickets||[])}catch(I){console.error("Erreur lors du chargement des tickets:",I),O.error("Erreur lors du chargement des tickets")}finally{l(!1)}},R=()=>{const I={up:{count:0,amount:0},pluxee:{count:0,amount:0},bimpli:{count:0,amount:0},edenred:{count:0,amount:0},total:{count:0,amount:0}};s.forEach(q=>{I[q.provider]&&(I[q.provider].count++,I[q.provider].amount+=q.amount),I.total.count++,I.total.amount+=q.amount}),D(I)},g=async(I,q=!1)=>{var U,W,te;try{f(!0);const ae=window.pageYOffset||document.documentElement.scrollTop,me=$(I);if(!me){O.error("Impossible d'extraire le montant du ticket");return}const ue={provider:c,amount:me,date:new Date().toISOString().split("T")[0],month:e,barcode:I,...q&&{forceDuplicate:!0}};console.log(" Envoi des donnes:",ue);const pe=await Y.post("/ticket-restaurant",ue);console.log(" Rponse du serveur:",pe.data),O.success(`#${x} - Ticket ${c.toUpperCase()} ajout: ${me}`),j(be=>be+1),await F(),setTimeout(()=>{window.scrollTo(0,ae)},100)}catch(ae){((U=ae.response)==null?void 0:U.status)===409&&((te=(W=ae.response)==null?void 0:W.data)!=null&&te.duplicate)?window.confirm(` Doublon dtect

Ce ticket a dj t scann.

Souhaitez-vous l'ajouter quand mme ?`)?await g(I,!0):O.info("Scan annul"):(console.error("Erreur lors de l'ajout du ticket:",ae),O.error("Erreur lors de l'ajout du ticket"))}finally{f(!1)}},P=async()=>{var te,ae,me;const I=p.replace(",",".").trim(),q=parseFloat(I);if(!I||isNaN(q)||q<=0||q>999.99){O.error("Veuillez saisir un montant valide (ex: 6.80 ou 9.50)");return}const U=Math.round(q*100)/100,W=`MANUAL-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;try{f(!0);const ue=window.pageYOffset||document.documentElement.scrollTop,pe={provider:c,amount:U,date:new Date().toISOString().split("T")[0],month:e,barcode:W},be=await Y.post("/ticket-restaurant",pe);O.success(`#${x} - Ticket ${c.toUpperCase()} (saisie manuelle) ajout: ${U}`),j(Ie=>Ie+1),await F(),u(!1),b(""),setTimeout(()=>window.scrollTo(0,ue),100)}catch(ue){((te=ue.response)==null?void 0:te.status)===409&&((me=(ae=ue.response)==null?void 0:ae.data)!=null&&me.duplicate)?O.error("Erreur inattendue (doublon). Ressayez."):(console.error("Erreur saisie manuelle:",ue),O.error("Erreur lors de l'ajout du ticket"))}finally{f(!1)}},$=I=>{if(console.log(" Code-barres scann:",I),!I||I.length<10)return console.warn(" Code-barres trop court:",I),null;try{let q=null;if(I.length===24){console.log(" Extraction par structure officielle (24 caractres)...");const U=I.substring(11,16);console.log(" Montant brut extrait:",U,"centimes");const W=parseFloat(U)/100;!isNaN(W)&&W>0&&W<=999.99&&(q=W,console.log(" Structure officielle:",U,"centimes ",q,""))}return q?(console.log(" Montant final:",q,""),Math.round(q*100)/100):(console.log(" Aucun montant valide trouv"),null)}catch(q){return console.error(" Erreur lors de l'extraction du montant:",q),null}},T=async I=>{if(window.confirm("tes-vous sr de vouloir supprimer ce ticket ?"))try{await Y.delete(`/ticket-restaurant/${I}`),O.success("Ticket supprim"),await F()}catch(q){console.error("Erreur lors de la suppression:",q),O.error("Erreur lors de la suppression du ticket")}},w=async()=>{if(s.length===0){O.info("Aucun ticket  supprimer");return}const I=` ATTENTION 

Vous tes sur le point de supprimer TOUS les ${s.length} tickets du mois ${new Date(e).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}.

Montant total : ${y(E.total.amount)}

Cette action est IRRVERSIBLE !

tes-vous absolument sr ?`;if(window.confirm(I))try{l(!0);let q=0,U=0;for(const W of s)try{await Y.delete(`/ticket-restaurant/${W._id}`),q++}catch(te){console.error(`Erreur suppression ticket ${W._id}:`,te),U++}U===0?O.success(` ${q} tickets supprims avec succs`):O.warning(` ${q} tickets supprims, ${U} erreurs`),await F()}catch(q){console.error("Erreur lors de la suppression globale:",q),O.error("Erreur lors de la suppression des tickets")}finally{l(!1)}},A=()=>{i(!0),console.log(" Dmarrage du scanner..."),setTimeout(()=>{const I=document.getElementById("barcode-input");I?(I.focus(),console.log(" Focus appliqu sur input scanner"),console.log(" Scanner prt - Pointez vers le code-barres")):console.error(" Input scanner non trouv")},100)},S=()=>{i(!1)},V=I=>{const q=I.target.value;console.log(" Input dtect:",q,"Longueur:",q.length);const U=N+q;console.log(" Buffer actuel:",U,"Longueur:",U.length),I.target.value="",U.length===24?(console.log(" Code-barres complet scann:",U),g(U),C("")):U.length>24?(console.error(" Buffer trop long, rinitialisation"),O.error(" Erreur de scan. Veuillez rescanner le ticket."),C("")):C(U)},y=I=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(I),z=I=>({up:"UP",pluxee:"Pluxee",bimpli:"Bimpli",edenred:"Edenred"})[I]||I.toUpperCase(),M=I=>({up:"#e74c3c",pluxee:"#3498db",bimpli:"#2ecc71",edenred:"#f39c12"})[I]||"#95a5a6";return n.jsxs("div",{className:"ticket-restaurant fade-in",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h2",{children:" Gestion des Tickets Restaurant"}),n.jsx("div",{className:"header-actions",children:n.jsxs("div",{className:"month-selector",children:[n.jsx("label",{htmlFor:"month",children:"Mois :"}),n.jsx("input",{type:"month",id:"month",value:e,onChange:I=>t(I.target.value),className:"form-control"})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"card-header",children:n.jsx("h3",{children:" Scanner des Tickets"})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"scanner-controls",children:[n.jsxs("div",{className:"provider-selector",children:[n.jsx("label",{children:"Fournisseur :"}),n.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"form-control",disabled:o,children:[n.jsx("option",{value:"up",children:"UP"}),n.jsx("option",{value:"pluxee",children:"Pluxee"}),n.jsx("option",{value:"bimpli",children:"Bimpli"}),n.jsx("option",{value:"edenred",children:"Edenred"})]})]}),o?n.jsxs("div",{className:"scanner-active",children:[n.jsxs("div",{className:"scanner-status",children:[n.jsx("div",{className:"scanner-indicator"}),n.jsx("span",{children:"Scanner actif - Pointez vers le code-barres"}),n.jsxs("span",{className:"scan-order-badge",children:["Prochain scan: #",x]})]}),n.jsx("input",{id:"barcode-input",type:"text",onChange:V,placeholder:"Code-barres sera captur automatiquement",style:{position:"absolute",left:"-9999px",opacity:0,width:"1px",height:"1px"},autoFocus:!0}),n.jsx("button",{className:"btn btn-secondary",onClick:S,children:"Arrter le scanner"}),N.length>0&&n.jsxs("div",{className:"buffer-status",children:[n.jsxs("span",{children:["Buffer: ",N.length,"/24 caractres"]}),n.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>{C(""),console.log(" Buffer rinitialis - Redmarrage du scanner"),i(!1),setTimeout(()=>{i(!0),setTimeout(()=>{const I=document.getElementById("barcode-input");I&&(I.focus(),console.log(" Scanner redmarr et focus restaur"))},100)},200),O.info(" Buffer rinitialis - Scanner redmarr")},children:" Rinitialiser"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn btn-primary",onClick:A,disabled:m,children:m?" Traitement...":" Dmarrer le scanner"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>u(!0),disabled:m,title:"Saisir un ticket manuellement en cas de problme de code-barres",children:" Saisie manuelle"})]})]})})]}),n.jsx("div",{className:"totals-grid",children:Object.entries(E).map(([I,q])=>I==="total"?null:n.jsxs("div",{className:"total-card",style:{borderColor:M(I)},children:[n.jsx("div",{className:"total-header",children:n.jsx("h4",{style:{color:M(I)},children:z(I)})}),n.jsxs("div",{className:"total-content",children:[n.jsxs("div",{className:"total-count",children:[n.jsx("span",{className:"count-number",children:q.count}),n.jsx("span",{className:"count-label",children:"tickets"})]}),n.jsx("div",{className:"total-amount",children:y(q.amount)})]})]},I))}),n.jsxs("div",{className:"card total-general",children:[n.jsx("div",{className:"card-header",children:n.jsx("h3",{children:" Total du mois"})}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"general-totals",children:[n.jsxs("div",{className:"total-item",children:[n.jsx("span",{className:"total-label",children:"Nombre total de tickets :"}),n.jsx("span",{className:"total-value",children:E.total.count})]}),n.jsxs("div",{className:"total-item",children:[n.jsx("span",{className:"total-label",children:"Montant total :"}),n.jsx("span",{className:"total-value amount",children:y(E.total.amount)})]})]})})]}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{children:" Historique des tickets"}),s.length>0&&n.jsxs("button",{className:"btn btn-danger",onClick:w,title:"Supprimer tous les tickets du mois",children:[" Tout effacer (",s.length,")"]})]}),n.jsx("div",{className:"card-body",children:a?n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement des tickets..."})]}):s.length===0?n.jsx("div",{className:"empty-state",children:n.jsx("p",{children:" Aucun ticket enregistr pour ce mois"})}):n.jsx("div",{className:"tickets-list",children:s.map((I,q)=>n.jsxs("div",{className:"ticket-item",children:[n.jsxs("div",{className:"ticket-info",children:[n.jsxs("div",{className:"ticket-provider",style:{color:M(I.provider)},children:[z(I.provider),I.barcode&&I.barcode.startsWith("MANUAL-")&&n.jsx("span",{className:"ticket-manual-badge",children:" (manuel)"})]}),n.jsx("div",{className:"ticket-amount",children:y(I.amount)}),n.jsx("div",{className:"ticket-date",children:new Date(I.date).toLocaleDateString("fr-FR")})]}),n.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>T(I._id),title:"Supprimer ce ticket",children:""})]},I._id||q))})})]}),v&&n.jsx("div",{className:"manual-modal-overlay",onClick:()=>!m&&u(!1),children:n.jsxs("div",{className:"manual-modal",onClick:I=>I.stopPropagation(),children:[n.jsx("h3",{children:" Saisie manuelle"}),n.jsx("p",{className:"manual-modal-desc",children:"En cas de problme de code-barres, saisissez le montant du ticket."}),n.jsxs("div",{className:"manual-modal-field",children:[n.jsx("label",{children:"Fournisseur :"}),n.jsx("span",{className:"manual-modal-provider",children:z(c)})]}),n.jsxs("div",{className:"manual-modal-field",children:[n.jsx("label",{htmlFor:"manual-amount",children:"Montant () :"}),n.jsx("input",{id:"manual-amount",type:"text",inputMode:"decimal",placeholder:"ex: 6.80 ou 9.50",value:p,onChange:I=>b(I.target.value),onKeyDown:I=>I.key==="Enter"&&P(),className:"form-control",autoFocus:!0})]}),n.jsxs("div",{className:"manual-modal-actions",children:[n.jsx("button",{className:"btn btn-secondary",onClick:()=>{u(!1),b("")},disabled:m,children:"Annuler"}),n.jsx("button",{className:"btn btn-primary",onClick:P,disabled:m||!p.trim(),children:m?" Enregistrement...":" Enregistrer"})]})]})})]})},Tj=({document:e,onDownload:t,getCategoryIcon:s,getCategoryLabel:r,formatFileSize:a,formatDate:l,isPersonal:o=!1})=>{const i=()=>{t(e._id,e.title)},d=(()=>{if(!o||!e.expiryDate)return null;const m=new Date,N=new Date(e.expiryDate)-m,C=Math.ceil(N/(1e3*60*60*24));return C<=0?{status:"expired",text:"Expir",class:"expired"}:C<=7?{status:"warning",text:`Expire dans ${C} jour${C>1?"s":""}`,class:"warning"}:C<=15?{status:"info",text:`Expire dans ${C} jours`,class:"info"}:null})();return n.jsxs("div",{className:`document-card ${o?"personal":"general"}`,children:[n.jsxs("div",{className:"document-header",children:[n.jsx("div",{className:"document-icon",children:s(e.category)}),n.jsxs("div",{className:"document-title",children:[n.jsx("h3",{children:e.title}),n.jsx("span",{className:"document-category",children:r(e.category)})]}),d&&n.jsx("div",{className:`expiry-badge ${d.class}`,children:d.text})]}),n.jsxs("div",{className:"document-content",children:[e.description&&n.jsx("p",{className:"document-description",children:e.description}),n.jsxs("div",{className:"document-details",children:[n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:" Ajout le:"}),n.jsx("span",{className:"detail-value",children:l(e.uploadDate)})]}),n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:" Taille:"}),n.jsx("span",{className:"detail-value",children:a(e.fileSize)})]}),e.downloadCount>0&&n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:" Tlcharg:"}),n.jsxs("span",{className:"detail-value",children:[e.downloadCount," fois"]})]}),e.lastDownloadDate&&n.jsxs("div",{className:"detail-item",children:[n.jsx("span",{className:"detail-label",children:" Dernier tlchargement:"}),n.jsx("span",{className:"detail-value",children:l(e.lastDownloadDate)})]})]})]}),n.jsxs("div",{className:"document-actions",children:[n.jsxs("button",{className:"download-btn",onClick:i,disabled:(d==null?void 0:d.status)==="expired",children:[n.jsx("span",{className:"download-icon",children:""}),"Tlcharger"]}),(d==null?void 0:d.status)==="expired"&&n.jsx("div",{className:"expired-message",children:" Ce document a expir et ne peut plus tre tlcharg"})]})]})},xu=({title:e,description:t,documents:s,onDownload:r,getCategoryIcon:a,getCategoryLabel:l,formatFileSize:o,formatDate:i,emptyMessage:c,isPersonal:d=!1})=>n.jsxs("div",{className:"documents-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("h2",{children:e}),n.jsx("p",{className:"section-description",children:t})]}),s.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("div",{className:"empty-icon",children:""}),n.jsx("h3",{children:"Aucun document"}),n.jsx("p",{children:c})]}):n.jsx("div",{className:"documents-grid",children:s.map(m=>n.jsx(Tj,{document:m,onDownload:r,getCategoryIcon:a,getCategoryLabel:l,formatFileSize:o,formatDate:i,isPersonal:d},m._id))}),s.length>0&&n.jsx("div",{className:"section-footer",children:n.jsxs("p",{className:"document-count",children:[s.length," document",s.length>1?"s":""," disponible",s.length>1?"s":""]})})]}),Ei=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],vu=Ot(),Aj=e=>{const t=e instanceof Date&&!Number.isNaN(e.getTime())?new Date(e):new Date,s=new Date(t),a=1-(s.getDay()===0?7:s.getDay());s.setDate(s.getDate()+a),s.setHours(0,0,0,0);const l=new Date(s);return l.setDate(s.getDate()+6),l.setHours(23,59,59,999),{start:s,end:l}},yu=e=>!(e instanceof Date)||Number.isNaN(e.getTime())?"":new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0],_j=e=>{const t=new Date(e);if(Number.isNaN(t.getTime()))return null;const s=(t.getDay()+6)%7;return Ei[s]},ju=e=>!(e instanceof Date)||Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).format(e),Pj=()=>{const{user:e}=Wn(),[t,s]=h.useState([]),[r,a]=h.useState([]),[l,o]=h.useState(!0),[i,c]=h.useState("general"),[d,m]=h.useState(null),[f,N]=h.useState({objectifCartesFid:0,objectifPromo:0,presences:{}}),[C,x]=h.useState("");h.useEffect(()=>{if(e){F();const w=new Date,{start:A}=Aj(w);x(yu(A))}},[e]),h.useEffect(()=>{C&&(e!=null&&e.employeeId)&&(j(),v())},[C,e==null?void 0:e.employeeId]);const j=async()=>{try{const w=new URL(`${vu}/daily-sales/weekly`);w.searchParams.set("weekStart",C);const A=await fetch(w.toString());if(A.ok){const S=await A.json();S.success&&m(S.data)}}catch(w){console.error("Erreur chargement stats hebdo:",w)}},v=async()=>{try{const w=new URL(`${vu}/daily-sales/objectives`);w.searchParams.set("weekStart",C);const A=await fetch(w.toString());if(A.ok){const S=await A.json();S.success&&N({objectifCartesFid:S.data.objectifCartesFid||0,objectifPromo:S.data.objectifPromo||0,presences:S.data.presences||{}})}}catch(w){console.error("Erreur chargement objectifs:",w)}},u=h.useMemo(()=>{if(!(d!=null&&d.dailySales)||!(e!=null&&e.employeeId))return{totalCartes:0,totalPromo:0,perDay:{}};const w={totalCartes:0,totalPromo:0,perDay:{}};return d.dailySales.forEach(A=>{var V,y;const S=((V=A.employeeId)==null?void 0:V._id)||A.employeeId;if((S==null?void 0:S.toString())===((y=e.employeeId)==null?void 0:y.toString())){const z=parseInt(A.nbCartesFid,10)||0,M=parseInt(A.nbPromo,10)||0;w.totalCartes+=z,w.totalPromo+=M;const I=_j(A.date);if(I){const q=w.perDay[I]||{cartes:0,promo:0};q.cartes+=z,q.promo+=M,w.perDay[I]=q}}}),w},[d,e==null?void 0:e.employeeId]),p=f.presences[e==null?void 0:e.employeeId]||{},b=Ei.filter(w=>p[w]).length,E=b>0?Math.ceil(f.objectifCartesFid/(Object.values(f.presences).reduce((w,A)=>w+Object.values(A||{}).filter(Boolean).length,0)||1)):0,D=b>0?Math.ceil(f.objectifPromo/(Object.values(f.presences).reduce((w,A)=>w+Object.values(A||{}).filter(Boolean).length,0)||1)):0,F=async()=>{try{o(!0);const w=await Y.get("/documents/general");if(w.data.success&&s(w.data.data),e.employeeId){const A=await Y.get(`/documents/personal/${e.employeeId}`);A.data.success&&a(A.data.data)}}catch(w){console.error("Erreur lors du chargement des documents:",w),O.error("Erreur lors du chargement des documents")}finally{o(!1)}},R=async(w,A)=>{try{console.log(" Tlchargement document:",w);let S=`/documents/${w}/download`;e.employeeId&&(S+=`?employeeId=${e.employeeId}`);const V=document.createElement("a");V.href=`${Ot()}${S}`,V.download=A,document.body.appendChild(V),V.click(),document.body.removeChild(V),O.success(` Tlchargement de "${A}" dmarr`)}catch(S){console.error("Erreur lors du tlchargement:",S),O.error("Erreur lors du tlchargement du document")}},g=w=>({notice:"",procedure:"",formation:"",payslip:"",contract:"",other:""})[w]||"",P=w=>({notice:"Notice",procedure:"Procdure",formation:"Formation",payslip:"Fiche de paie",contract:"Contrat",other:"Autre"})[w]||w,$=w=>{if(w===0)return"0 Bytes";const A=1024,S=["Bytes","KB","MB","GB"],V=Math.floor(Math.log(w)/Math.log(A));return parseFloat((w/Math.pow(A,V)).toFixed(2))+" "+S[V]},T=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return l?n.jsx("div",{className:"employee-dashboard",children:n.jsxs("div",{className:"loading-container",children:[n.jsx("div",{className:"loading"}),n.jsx("p",{children:"Chargement de vos documents..."})]})}):n.jsxs("div",{className:"employee-dashboard",children:[n.jsxs("div",{className:"dashboard-header",children:[n.jsx("h1",{children:" Mes Documents"}),n.jsxs("p",{children:["Bienvenue ",(e==null?void 0:e.name)||"Employ",", consultez vos documents personnels et gnraux"]})]}),n.jsxs("div",{className:"dashboard-tabs",children:[n.jsxs("button",{className:`tab ${i==="general"?"active":""}`,onClick:()=>c("general"),children:[" Documents Gnraux (",t.length,")"]}),n.jsxs("button",{className:`tab ${i==="personal"?"active":""}`,onClick:()=>c("personal"),children:[" Mes Documents (",r.length,")"]}),n.jsx("button",{className:`tab ${i==="sales"?"active":""}`,onClick:()=>c("sales"),children:" Mes Ventes"})]}),n.jsx("div",{className:"dashboard-content",children:i==="general"?n.jsx(xu,{title:" Documents Gnraux",description:"Documents accessibles  tous les employs",documents:t,onDownload:R,getCategoryIcon:g,getCategoryLabel:P,formatFileSize:$,formatDate:T,emptyMessage:"Aucun document gnral disponible"}):i==="sales"?n.jsxs("div",{style:{padding:"2rem"},children:[n.jsx("h2",{children:" Mes Ventes - Semaine en cours"}),C&&n.jsxs("div",{style:{marginBottom:"1.5rem"},children:[n.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Semaine :"}),n.jsx("input",{type:"week",value:(()=>{const w=new Date(C),A=w.getFullYear(),S=Math.ceil((w-new Date(A,0,1))/(7*24*60*60*1e3));return`${A}-W${String(S).padStart(2,"0")}`})(),onChange:w=>{const[A,S]=w.target.value.split("-W"),V=new Date(A,0,1),y=V.getDay()||7,z=(parseInt(S)-1)*7+(1-y);V.setDate(V.getDate()+z),x(yu(V))},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd"}})]}),C&&n.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Semaine :"})," ",ju(new Date(C))," au ",ju(new Date(new Date(C).setDate(new Date(C).getDate()+6)))]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Objectif par prsence :"}),"  ",E," cartes fidlit /  ",D," promo quinzaine"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Mes prsences :"})," ",b," jour",b>1?"s":""]})]}),n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:" Rsum de la semaine"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem"},children:[n.jsxs("div",{style:{padding:"1rem",backgroundColor:"#e3f2fd",borderRadius:"8px",border:"2px solid #2196f3"},children:[n.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:" Cartes Fidlit"}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:u.totalCartes||0}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Objectif : ",b*E]})]}),n.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff3e0",borderRadius:"8px",border:"2px solid #ff9800"},children:[n.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:" Promo Quinzaine"}),n.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:u.totalPromo||0}),n.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:["Objectif : ",b*D]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{children:" Dtail jour par jour"}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"1rem"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[n.jsx("th",{style:{padding:"0.75rem",textAlign:"left",border:"1px solid #dee2e6"},children:"Jour"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:"Prsent"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:" Cartes Fidlit"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:" Promo Quinzaine"}),n.jsx("th",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:"Statut"})]})}),n.jsx("tbody",{children:Ei.map(w=>{var q;const A=p[w]||!1,S=((q=u.perDay)==null?void 0:q[w])||{cartes:0,promo:0},V=A?E:0,y=A?D:0,z=V>0?S.cartes>=V:!1,M=y>0?S.promo>=y:!1,I=A?z&&M?"success":"danger":S.cartes>0||S.promo>0?"info":"neutral";return n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"0.75rem",border:"1px solid #dee2e6",fontWeight:"bold"},children:w}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:A?"":""}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:[n.jsx("strong",{children:S.cartes})," / ",V]}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:[n.jsx("strong",{children:S.promo})," / ",y]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6",color:I==="success"?"#28a745":I==="danger"?"#dc3545":I==="info"?"#17a2b8":"#6c757d",fontWeight:"bold"},children:I==="success"?" Atteint":I==="danger"?" Non atteint":I==="info"?" Donnes sans prsence":""})]},w)})}),n.jsx("tfoot",{children:n.jsxs("tr",{style:{backgroundColor:"#f8f9fa",fontWeight:"bold"},children:[n.jsx("td",{style:{padding:"0.75rem",border:"1px solid #dee2e6"},children:"Total"}),n.jsxs("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:[b," jour(s)"]}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:u.totalCartes||0}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:u.totalPromo||0}),n.jsx("td",{style:{padding:"0.75rem",textAlign:"center",border:"1px solid #dee2e6"},children:""})]})})]})]})]}):n.jsx(xu,{title:" Mes Documents Personnels",description:"Vos documents personnels (fiches de paie, contrats, etc.)",documents:r,onDownload:R,getCategoryIcon:g,getCategoryLabel:P,formatFileSize:$,formatDate:T,emptyMessage:"Aucun document personnel disponible",isPersonal:!0})}),n.jsx("div",{className:"dashboard-footer",children:n.jsxs("div",{className:"info-box",children:[n.jsx("h3",{children:" Informations importantes"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[" Les ",n.jsx("strong",{children:"documents gnraux"})," sont accessibles  tous les employs"]}),n.jsxs("li",{children:[" Les ",n.jsx("strong",{children:"documents personnels"})," sont spcifiques  votre compte"]}),n.jsx("li",{children:" Les documents personnels sont automatiquement supprims aprs 1 mois"}),n.jsx("li",{children:' Cliquez sur "Tlcharger" pour sauvegarder un document sur votre appareil'})]})]})})]})},Rj=()=>{const[e,t]=h.useState([]),[s,r]=h.useState({}),[a,l]=h.useState(!0),[o,i]=h.useState(null),[c,d]=h.useState(!1),[m,f]=h.useState("all"),[N,C]=h.useState("");h.useEffect(()=>{x(),j()},[N,m]);const x=async()=>{try{l(!0);const R={};N&&(R.month=N),m!=="all"&&(R.status=m);const g=await Y.get("/advance-requests",{params:R});g.data.success&&t(g.data.data)}catch(R){console.error("Erreur rcupration demandes acompte:",R),O.error("Erreur lors du chargement des demandes")}finally{l(!1)}},j=async()=>{try{const R={};N&&(R.month=N);const g=await Y.get("/advance-requests/stats",{params:R});g.data.success&&r(g.data.data)}catch(R){console.error("Erreur rcupration stats acompte:",R)}},v=async(R,g,P={})=>{try{if((await Y.put(`/advance-requests/${R}`,{status:g,...P})).data.success){O.success(`Demande ${g==="approved"?"approuve":"rejete"} avec succs`);const T={};N&&(T.month=N),m!=="all"&&(T.status=m);const w=await Y.get("/advance-requests",{params:T});w.data.success&&t(w.data.data);const A={};N&&(A.month=N);const S=await Y.get("/advance-requests/stats",{params:A});S.data.success&&r(S.data.data),d(!1),i(null)}}catch($){console.error("Erreur action acompte:",$),O.error("Erreur lors de l'action")}},u=R=>{i(R),d(!0)},p=()=>{d(!1),i(null)},b=()=>e,E=R=>({pending:"En attente",approved:"Approuve",rejected:"Rejete"})[R]||R,D=R=>({pending:"status-pending",approved:"status-approved",rejected:"status-rejected"})[R]||"",F=()=>{const R=b(),g=m==="all"?"Toutes":m==="pending"?"En attente":m==="approved"?"Approuves":"Rejetes",P=N||"Tous les mois",$=window.open("","_blank");$.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Demandes d'Acompte - ${g} - ${P}</title>
        <meta charset="utf-8">
        <style>
          @media print {
            @page {
              margin: 1cm;
            }
            body {
              font-family: Arial, sans-serif;
              font-size: 12px;
              color: #000;
              margin: 0;
              padding: 20px;
            }
            .no-print { display: none !important; }
          }
          body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            color: #000;
            margin: 0;
            padding: 20px;
            background: white;
          }
          .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
          }
          .header h1 {
            margin: 0 0 10px 0;
            font-size: 24px;
            color: #333;
          }
          .header .filter-info {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
          }
          .print-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
          }
          .print-table th {
            background-color: #f0f0f0;
            border: 1px solid #333;
            padding: 10px;
            text-align: left;
            font-weight: bold;
          }
          .print-table td {
            border: 1px solid #333;
            padding: 8px;
          }
          .print-table tr:nth-child(even) {
            background-color: #f9f9f9;
          }
          .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
          }
          .status-approved {
            background-color: #d4edda;
            color: #155724;
          }
          .status-pending {
            background-color: #fff3cd;
            color: #856404;
          }
          .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
          }
          .amount {
            font-weight: bold;
            color: #28a745;
          }
          .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 10px;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 10px;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1> Gestion des Demandes d'Acompte</h1>
          <div class="filter-info">
            <strong>Filtre:</strong> ${g} | <strong>Mois:</strong> ${P}
          </div>
          <div class="filter-info">
            <strong>Date d'impression:</strong> ${new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}
          </div>
        </div>
        <table class="print-table">
          <thead>
            <tr>
              <th>Salari</th>
              <th>Montant</th>
              <th>Mois de dduction</th>
              <th>Date de demande</th>
              <th>Statut</th>
            </tr>
          </thead>
          <tbody>
            ${R.length===0?`
              <tr>
                <td colspan="5" style="text-align: center; padding: 20px;">
                  Aucune demande d'acompte trouve
                </td>
              </tr>
            `:R.map(T=>`
              <tr>
                <td>${T.employeeName||"-"}</td>
                <td class="amount">${T.amount||0}</td>
                <td>${T.deductionMonth||"-"}</td>
                <td>${new Date(T.createdAt).toLocaleDateString("fr-FR")}</td>
                <td>
                  <span class="status-badge status-${T.status||"pending"}">
                    ${E(T.status)}
                  </span>
                </td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        ${R.length>0?`
          <div style="margin-top: 20px; text-align: right;">
            <strong>Total: ${R.length} demande(s) | 
            Montant total: ${R.reduce((T,w)=>T+(w.amount||0),0)}</strong>
          </div>
        `:""}
        <div class="footer">
          <p>Boulangerie Planning - Impression gnre le ${new Date().toLocaleDateString("fr-FR")}</p>
        </div>
      </body>
      </html>
    `),$.document.close(),setTimeout(()=>{$.focus(),$.print()},250)};return a?n.jsx("div",{className:"advance-requests",children:n.jsxs("div",{className:"loading",children:[n.jsx("div",{className:"spinner"}),n.jsx("p",{children:"Chargement des demandes d'acompte..."})]})}):n.jsxs("div",{className:"advance-requests",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h2",{children:" Gestion des Demandes d'Acompte"}),n.jsxs("div",{className:"header-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:x,children:" Actualiser"}),n.jsx("button",{className:"btn btn-secondary",onClick:F,title:"Imprimer les demandes affiches",children:" Imprimer"})]})]}),n.jsxs("div",{className:"advance-stats",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:s.pending||0}),n.jsx("div",{className:"stat-label",children:"En attente"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:s.approved||0}),n.jsx("div",{className:"stat-label",children:"Approuves"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:s.rejected||0}),n.jsx("div",{className:"stat-label",children:"Rejetes"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsxs("div",{className:"stat-number",children:[s.totalAmount||0,""]}),n.jsx("div",{className:"stat-label",children:"Montant total"})]})]}),n.jsxs("div",{className:"filters",children:[n.jsxs("button",{className:`filter-btn ${m==="all"?"active":""}`,onClick:()=>f("all"),children:["Toutes (",s.total||0,")"]}),n.jsxs("button",{className:`filter-btn ${m==="pending"?"active":""}`,onClick:()=>f("pending"),children:["En attente (",s.pending||0,")"]}),n.jsxs("button",{className:`filter-btn ${m==="approved"?"active":""}`,onClick:()=>f("approved"),children:["Approuves (",s.approved||0,")"]}),n.jsxs("button",{className:`filter-btn ${m==="rejected"?"active":""}`,onClick:()=>f("rejected"),children:["Rejetes (",s.rejected||0,")"]}),n.jsxs("div",{className:"month-filter",children:[n.jsx("label",{htmlFor:"month-select",children:" Mois :"}),n.jsxs("select",{id:"month-select",value:N,onChange:R=>C(R.target.value),className:"month-select",children:[n.jsx("option",{value:"",children:"Tous les mois"}),(()=>{const R=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],g=new Date().getFullYear(),P=[];for(let $=g;$<=g+1;$++)R.forEach((T,w)=>{P.push(n.jsxs("option",{value:`${T} ${$}`,children:[T," ",$]},`${T} ${$}`))});return P})()]})]})]}),n.jsx("div",{className:"requests-list",children:b().length===0?n.jsx("div",{className:"no-requests",children:n.jsx("p",{children:"Aucune demande d'acompte trouve"})}):b().map(R=>n.jsxs("div",{className:"request-card",children:[n.jsxs("div",{className:"request-info",children:[n.jsxs("div",{className:"employee-info",children:[n.jsx("div",{className:"employee-name",children:R.employeeName}),n.jsx("div",{className:"employee-email",children:R.employeeEmail})]}),n.jsxs("div",{className:"request-details",children:[n.jsxs("div",{className:"amount",children:[R.amount,""]}),n.jsxs("div",{className:"month",children:["Dduction: ",R.deductionMonth]}),n.jsxs("div",{className:"date",children:["Demand le: ",new Date(R.createdAt).toLocaleDateString("fr-FR")]}),R.comment&&n.jsxs("div",{className:"comment",children:[n.jsx("strong",{children:"Commentaire:"})," ",R.comment]}),R.managerComment&&n.jsxs("div",{className:"manager-comment",children:[n.jsx("strong",{children:"Commentaire manager:"})," ",R.managerComment]})]})]}),n.jsxs("div",{className:"request-actions",children:[n.jsx("div",{className:`status-badge ${D(R.status)}`,children:E(R.status)}),R.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>v(R._id,"approved"),children:" Approuver"}),n.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>u(R),children:" Modifier"}),n.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>v(R._id,"rejected"),children:" Rejeter"})]})]})]},R._id))}),c&&o&&n.jsx("div",{className:"modal-overlay",children:n.jsxs("div",{className:"modal-content",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:" Modifier la Demande d'Acompte"}),n.jsx("button",{className:"close-btn",onClick:p,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"form-group",children:n.jsxs("label",{children:["Employ: ",o.employeeName]})}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Montant ():"}),n.jsx("input",{type:"number",id:"editAmount",defaultValue:o.amount,min:"1",max:"5000",step:"0.01"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Mois de dduction:"}),n.jsxs("select",{id:"editMonth",defaultValue:o.deductionMonth,children:[n.jsx("option",{value:"Janvier 2025",children:"Janvier 2025"}),n.jsx("option",{value:"Fvrier 2025",children:"Fvrier 2025"}),n.jsx("option",{value:"Mars 2025",children:"Mars 2025"}),n.jsx("option",{value:"Avril 2025",children:"Avril 2025"}),n.jsx("option",{value:"Mai 2025",children:"Mai 2025"}),n.jsx("option",{value:"Juin 2025",children:"Juin 2025"}),n.jsx("option",{value:"Juillet 2025",children:"Juillet 2025"}),n.jsx("option",{value:"Aot 2025",children:"Aot 2025"}),n.jsx("option",{value:"Septembre 2025",children:"Septembre 2025"}),n.jsx("option",{value:"Octobre 2025",children:"Octobre 2025"}),n.jsx("option",{value:"Novembre 2025",children:"Novembre 2025"}),n.jsx("option",{value:"Dcembre 2025",children:"Dcembre 2025"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Commentaire du manager:"}),n.jsx("textarea",{id:"editComment",rows:"3",placeholder:"Commentaire optionnel..."})]}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{className:"btn btn-success",onClick:()=>{const R=document.getElementById("editAmount").value;document.getElementById("editMonth").value;const g=document.getElementById("editComment").value;v(o._id,"approved",{approvedAmount:R,managerComment:g})},children:" Approuver avec modifications"}),n.jsx("button",{className:"btn btn-danger",onClick:()=>{const R=document.getElementById("editComment").value;v(o._id,"rejected",{managerComment:R})},children:" Rejeter"}),n.jsx("button",{className:"btn btn-secondary",onClick:p,children:"Annuler"})]})]})]})})]})},Nr=e=>{const t=new Date(e),s=t.getDay()||7;return s!==1&&t.setDate(t.getDate()-(s-1)),t.setHours(0,0,0,0),t},wo=e=>new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0],So=e=>{if(!e)return Nr(new Date);const t=new Date(e);return Number.isNaN(t.getTime())?Nr(new Date):Nr(t)},Mj=e=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).format(e),Lj=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const s=new Date(t);s.setDate(t.getDate()+6);const r=new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"short",year:"numeric"});return`${r.format(t)}  ${r.format(s)}`},wa=e=>{const t=Number.parseFloat(e)||0,s=Math.round(t*100)/100;return`${s>0?"+":""}${s.toFixed(2)} h`},bu=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=(t.getUTCDay()+6)%7;t.setUTCDate(t.getUTCDate()-s+3);const r=new Date(Date.UTC(t.getUTCFullYear(),0,4)),a=t-r;return 1+Math.round(a/(7*24*60*60*1e3))},Ij=()=>{var R,g;const{isAdmin:e}=Wn(),[t,s]=h.useState(()=>wo(Nr(new Date))),[r,a]=h.useState([]),[l,o]=h.useState(!1),[i,c]=h.useState(!1),[d,m]=h.useState({open:!1,loading:!1,employee:null,entries:[],total:0,aggregateTotal:0}),f=h.useCallback(async P=>{var $;o(!0);try{const T=await Y.get("/recup-hours",{params:{weekStart:P}});if(($=T.data)!=null&&$.success){const{data:w}=T.data;a((w.employees||[]).map(A=>({...A,weekHours:Number(A.weekHours||0),totalHours:Number(A.totalHours||0),comment:A.comment||""})))}else O.error("Impossible de charger les heures de rcup")}catch(T){console.error(" Erreur chargement heures rcup:",T),O.error("Erreur lors du chargement des heures de rcup")}finally{o(!1)}},[]);h.useEffect(()=>{f(t)},[t,f]);const N=P=>{const $=wo(So(P.target.value));s($)},C=P=>{const $=So(t);$.setDate($.getDate()+P*7),s(wo(Nr($)))},x=(P,$)=>{const T=Number.parseFloat($);a(w=>w.map(A=>A.employeeId===P?{...A,weekHours:Number.isNaN(T)?0:T}:A))},j=(P,$)=>{a(T=>T.map(w=>w.employeeId===P?{...w,comment:$}:w))},v=async P=>{var $;m({open:!0,loading:!0,employee:P,entries:[],total:0,aggregateTotal:Number(P.totalHours||0)});try{const T=await Y.get(`/recup-hours/${P.employeeId}/history`);if(($=T.data)!=null&&$.success){const{data:w}=T.data;m(A=>({...A,loading:!1,entries:(w.entries||[]).map(S=>({...S,hours:Number(S.hours||0)})),total:Number(w.totalHours||0)}))}else m(w=>({...w,loading:!1})),O.error("Impossible de rcuprer les dtails de cette personne")}catch(T){console.error(" Erreur historique heures rcup:",T),m(w=>({...w,loading:!1})),O.error("Erreur lors du chargement des dtails")}},u=()=>{m({open:!1,loading:!1,employee:null,entries:[],total:0,aggregateTotal:0})},p=async()=>{try{c(!0),await Y.post("/recup-hours",{weekStart:t,entries:r.map(P=>({employeeId:P.employeeId,hours:Number(P.weekHours)||0,comment:P.comment||""}))}),O.success("Heures de rcup enregistres avec succs"),await f(t)}catch(P){console.error(" Erreur sauvegarde heures rcup:",P),O.error("Erreur lors de la sauvegarde des heures de rcup")}finally{c(!1)}},b=e(),E=h.useMemo(()=>{const P=r.reduce((T,w)=>T+(Number(w.weekHours)||0),0),$=r.reduce((T,w)=>T+(Number(w.totalHours)||0),0);return{weekTotal:P,cumulativeTotal:$}},[r]),D=So(t),F=bu(D);return n.jsxs("div",{className:"recup-page fade-in",children:[n.jsxs("div",{className:"recup-header",children:[n.jsxs("div",{className:"recup-header-title",children:[n.jsx("h2",{children:" Heures de rcup"}),n.jsxs("p",{children:["Semaine ",F,"  ",Mj(D)]})]}),n.jsxs("div",{className:"recup-week-selector",children:[n.jsx("button",{type:"button",className:"nav-button",onClick:()=>C(-1),disabled:l,"aria-label":"Semaine prcdente",children:""}),n.jsx("input",{type:"date",value:t,onChange:N,disabled:l}),n.jsx("button",{type:"button",className:"nav-button",onClick:()=>C(1),disabled:l,"aria-label":"Semaine suivante",children:""})]}),b&&n.jsx("button",{type:"button",className:"btn btn-success",onClick:p,disabled:i||l,children:i?" Sauvegarde...":" Enregistrer"})]}),!b&&n.jsx("div",{className:"recup-info card",children:n.jsx("p",{children:"Consultation des heures de rcup. Contactez votre responsable pour toute modification."})}),n.jsxs("div",{className:"recup-summary",children:[n.jsxs("div",{className:"recup-summary-card",children:[n.jsx("span",{className:"summary-label",children:"Total semaine"}),n.jsxs("span",{className:`summary-value ${E.weekTotal>=0?"positive":"negative"}`,children:[E.weekTotal>0?"+":"",E.weekTotal.toFixed(2)," h"]})]}),n.jsxs("div",{className:"recup-summary-card",children:[n.jsx("span",{className:"summary-label",children:"Cumul global"}),n.jsxs("span",{className:`summary-value ${E.cumulativeTotal>=0?"positive":"negative"}`,children:[E.cumulativeTotal>0?"+":"",E.cumulativeTotal.toFixed(2)," h"]})]})]}),n.jsx("div",{className:"recup-card",children:l?n.jsxs("div",{className:"recup-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement des heures de rcup..."})]}):n.jsxs("table",{className:"recup-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Salari"}),n.jsx("th",{children:"Total cumul"}),n.jsx("th",{children:"Heures semaine"}),n.jsx("th",{children:"Justificatif"})]})}),n.jsx("tbody",{children:r.map(P=>{var w;const $=P.totalHours>0?"positive":P.totalHours<0?"negative":"neutral",T=P.weekHours>0?"positive":P.weekHours<0?"negative":"neutral";return n.jsxs("tr",{children:[n.jsxs("td",{children:[n.jsx("div",{className:"employee-name",children:P.employeeName}),n.jsx("div",{className:"employee-role",children:P.role}),n.jsx("button",{type:"button",className:"detail-button",onClick:()=>v(P),disabled:l||d.loading&&((w=d.employee)==null?void 0:w.employeeId)===P.employeeId,children:"Dtails"})]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${$}`,children:[P.totalHours>0?"+":"",Number(P.totalHours||0).toFixed(2)," h"]})}),n.jsx("td",{children:n.jsxs("div",{className:"hours-input-wrapper",children:[n.jsx("input",{type:"number",step:"0.25",className:`hours-input ${T}`,value:P.weekHours,disabled:!b,onChange:A=>x(P.employeeId,A.target.value)}),n.jsx("span",{className:`hours-helper ${T}`,children:P.weekHours>0?" rcuprer":P.weekHours<0?"Rcupr":"quilibre"})]})}),n.jsx("td",{children:n.jsx("textarea",{className:"justificatif-input",rows:2,value:P.comment,disabled:!b,onChange:A=>j(P.employeeId,A.target.value),placeholder:"Raison du dpassement"})})]},P.employeeId)})})]})}),!l&&r.length===0&&n.jsxs("div",{className:"recup-empty card",children:[n.jsx("h3",{children:" Aucun salari"}),n.jsx("p",{children:"Ajoutez des salaris pour commencer  suivre les heures de rcup."})]}),d.open&&n.jsx("div",{className:"recup-history-backdrop",role:"presentation",onClick:u,children:n.jsxs("div",{className:"recup-history-modal",role:"dialog","aria-modal":"true","aria-labelledby":"recup-history-title",onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{className:"history-header",children:[n.jsxs("div",{children:[n.jsx("h3",{id:"recup-history-title",children:"Dtails des heures"}),n.jsxs("p",{className:"history-employee",children:[(R=d.employee)==null?void 0:R.employeeName," ",n.jsx("span",{className:"history-role",children:(g=d.employee)==null?void 0:g.role})]})]}),n.jsx("button",{type:"button",className:"history-close",onClick:u,children:""})]}),n.jsxs("div",{className:"history-summary",children:[n.jsxs("div",{className:"history-summary-item",children:[n.jsx("span",{className:"summary-label",children:"Total cumul (tableau)"}),n.jsx("span",{className:`summary-value ${d.aggregateTotal>=0?"positive":"negative"}`,children:wa(d.aggregateTotal)})]}),n.jsxs("div",{className:"history-summary-item",children:[n.jsx("span",{className:"summary-label",children:"Somme du dtail"}),n.jsx("span",{className:`summary-value ${d.total>=0?"positive":"negative"}`,children:wa(d.total)})]}),n.jsxs("div",{className:"history-summary-item",children:[n.jsx("span",{className:"summary-label",children:"cart"}),n.jsx("span",{className:`summary-value ${Math.abs(d.aggregateTotal-d.total)<.01?"neutral":"negative"}`,children:wa(d.aggregateTotal-d.total)})]})]}),d.loading?n.jsxs("div",{className:"history-loading",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Chargement du dtail..."})]}):d.entries.length===0?n.jsx("div",{className:"history-empty",children:n.jsx("p",{children:"Aucun historique dheures de rcup enregistr pour ce salari."})}):n.jsx("div",{className:"history-table-wrapper",children:n.jsxs("table",{className:"recup-history-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Semaine"}),n.jsx("th",{children:"Heures"}),n.jsx("th",{children:"Justificatif"})]})}),n.jsx("tbody",{children:d.entries.map(P=>{const $=P.weekStart?new Date(P.weekStart):null,T=$&&!Number.isNaN($.getTime())?`Semaine ${bu($)}`:"";return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"history-week",children:[n.jsx("span",{className:"week-number",children:T}),n.jsx("span",{className:"week-range",children:Lj(P.weekStart)})]})}),n.jsx("td",{children:n.jsx("span",{className:`badge ${P.hours>0?"positive":P.hours<0?"negative":"neutral"}`,children:wa(P.hours)})}),n.jsx("td",{children:P.comment?n.jsx("span",{className:"history-comment",children:P.comment}):n.jsx("span",{className:"history-comment muted",children:""})})]},`${P.weekStart}-${P.hours}`)})})]})})]})})]})},Fj=()=>{const{isAdmin:e}=Wn(),[t,s]=h.useState([]),[r,a]=h.useState([]),[l,o]=h.useState({}),[i,c]=h.useState({}),[d,m]=h.useState(!0),[f,N]=h.useState(!1),[C,x]=h.useState({name:"",frequency:"mensuelle",amountLevel0:0,amountLevel1:0,amountLevel2:0}),[j,v]=h.useState(null),[u,p]=h.useState(new Date().getMonth()+1),[b,E]=h.useState(new Date().getFullYear());h.useEffect(()=>{e()&&D()},[e]),h.useEffect(()=>{e()&&u&&b&&F()},[u,b,e]);const D=async()=>{try{m(!0);const[y,z,M]=await Promise.all([Y.get("/primes"),Y.get("/employees"),Y.get("/primes/assignments")]);if(y.data.success&&s(y.data.data),z.data.success&&z.data.data&&a(z.data.data),M.data.success){const I={};M.data.data.forEach(q=>{I[q.employeeId._id]||(I[q.employeeId._id]={}),I[q.employeeId._id][q.primeId._id]=q.isActive}),o(I)}}catch(y){console.error("Erreur lors du chargement:",y),O.error("Erreur lors du chargement des donnes")}finally{m(!1)}},F=async()=>{try{const y=await Y.get(`/primes/calculations?month=${u}&year=${b}`);if(y.data.success){const z={};y.data.data.forEach(M=>{const I=`${M.employeeId._id}_${M.primeId._id}`;z[I]={level:M.level,amount:M.amount}}),c(z)}}catch(y){console.error("Erreur lors du chargement des calculs:",y)}},R=async y=>{y.preventDefault();try{(await Y.post("/primes",C)).data.success&&(O.success("Prime cre avec succs"),x({name:"",frequency:"mensuelle",amountLevel0:0,amountLevel1:0,amountLevel2:0}),D())}catch(z){console.error("Erreur lors de la cration:",z),O.error("Erreur lors de la cration de la prime")}},g=async y=>{try{(await Y.put(`/primes/${y._id}`,y)).data.success&&(O.success("Prime mise  jour avec succs"),v(null),D())}catch(z){console.error("Erreur lors de la mise  jour:",z),O.error("Erreur lors de la mise  jour de la prime")}},P=async y=>{if(window.confirm("tes-vous sr de vouloir supprimer cette prime ?"))try{(await Y.delete(`/primes/${y}`)).data.success&&(O.success("Prime supprime avec succs"),D())}catch(z){console.error("Erreur lors de la suppression:",z),O.error("Erreur lors de la suppression de la prime")}},$=(y,z)=>{o(M=>{var I;return{...M,[y]:{...M[y],[z]:!((I=M[y])!=null&&I[z])}}})},T=async()=>{try{N(!0);const y=[];Object.keys(l).forEach(M=>{Object.keys(l[M]).forEach(I=>{y.push({employeeId:M,primeId:I,isActive:l[M][I]||!1})})}),(await Y.post("/primes/assignments",{assignments:y})).data.success&&(O.success("Affectations sauvegardes avec succs"),D())}catch(y){console.error("Erreur lors de la sauvegarde:",y),O.error("Erreur lors de la sauvegarde des affectations")}finally{N(!1)}},w=(y,z,M)=>{const I=t.find(W=>W._id===z);if(!I)return;let q=0;M===0?q=I.amountLevel0||0:M===1?q=I.amountLevel1:M===2&&(q=I.amountLevel2);const U=`${y}_${z}`;c(W=>({...W,[U]:{level:M,amount:q}}))},A=async()=>{try{N(!0);const y=[];Object.keys(i).forEach(M=>{const[I,q]=M.split("_"),U=i[M];y.push({employeeId:I,primeId:q,month:u,year:b,level:U.level})}),(await Y.post("/primes/calculations",{calculations:y})).data.success&&(O.success("Calculs sauvegards avec succs"),F())}catch(y){console.error("Erreur lors de la sauvegarde:",y),O.error("Erreur lors de la sauvegarde des calculs")}finally{N(!1)}},S=y=>["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"][y-1]||"",V=r.filter(y=>{const z=l[y._id]||{};return Object.values(z).some(M=>M===!0)});return e()?d?n.jsx("div",{className:"primes-page fade-in",children:n.jsx("div",{className:"card",children:n.jsx("div",{className:"loading",children:"Chargement..."})})}):n.jsxs("div",{className:"primes-page fade-in",children:[n.jsx("h2",{children:" Gestion des Primes"}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:"1 Dfinition des Primes"}),n.jsxs("form",{onSubmit:R,style:{marginBottom:"2rem"},children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nom de la prime *"}),n.jsx("input",{type:"text",value:C.name,onChange:y=>x({...C,name:y.target.value}),required:!0,className:"form-control"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Frquence *"}),n.jsxs("select",{value:C.frequency,onChange:y=>x({...C,frequency:y.target.value}),required:!0,className:"form-control",children:[n.jsx("option",{value:"mensuelle",children:"Mensuelle"}),n.jsx("option",{value:"annuelle",children:"Annuelle"})]})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Montant Niveau 0 (non atteint)"}),n.jsx("input",{type:"number",step:"0.01",value:C.amountLevel0,onChange:y=>x({...C,amountLevel0:parseFloat(y.target.value)||0}),className:"form-control"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Montant Niveau 1 (atteint) *"}),n.jsx("input",{type:"number",step:"0.01",value:C.amountLevel1,onChange:y=>x({...C,amountLevel1:parseFloat(y.target.value)||0}),required:!0,className:"form-control"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Montant Niveau 2 (dpass) *"}),n.jsx("input",{type:"number",step:"0.01",value:C.amountLevel2,onChange:y=>x({...C,amountLevel2:parseFloat(y.target.value)||0}),required:!0,className:"form-control"})]})]}),n.jsx("button",{type:"submit",className:"btn btn-primary",children:" Crer la prime"})]}),n.jsxs("div",{className:"primes-list",children:[n.jsx("h4",{children:"Liste des primes"}),t.length===0?n.jsx("p",{children:"Aucune prime dfinie"}):n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Frquence"}),n.jsx("th",{children:"Niveau 0"}),n.jsx("th",{children:"Niveau 1"}),n.jsx("th",{children:"Niveau 2"}),n.jsx("th",{children:"Actions"})]})}),n.jsx("tbody",{children:t.map(y=>n.jsx("tr",{style:y.frequency==="annuelle"||y.frequency==="annual"?{color:"#dc3545",fontWeight:"bold"}:{},children:(j==null?void 0:j._id)===y._id?n.jsxs(n.Fragment,{children:[n.jsx("td",{children:n.jsx("input",{type:"text",value:j.name,onChange:z=>v({...j,name:z.target.value}),className:"form-control"})}),n.jsx("td",{children:n.jsxs("select",{value:j.frequency,onChange:z=>v({...j,frequency:z.target.value}),className:"form-control",children:[n.jsx("option",{value:"mensuelle",children:"Mensuelle"}),n.jsx("option",{value:"annuelle",children:"Annuelle"})]})}),n.jsx("td",{children:n.jsx("input",{type:"number",step:"0.01",value:j.amountLevel0,onChange:z=>v({...j,amountLevel0:parseFloat(z.target.value)||0}),className:"form-control"})}),n.jsx("td",{children:n.jsx("input",{type:"number",step:"0.01",value:j.amountLevel1,onChange:z=>v({...j,amountLevel1:parseFloat(z.target.value)||0}),className:"form-control"})}),n.jsx("td",{children:n.jsx("input",{type:"number",step:"0.01",value:j.amountLevel2,onChange:z=>v({...j,amountLevel2:parseFloat(z.target.value)||0}),className:"form-control"})}),n.jsxs("td",{children:[n.jsx("button",{onClick:()=>g(j),className:"btn btn-sm btn-success",children:" Sauvegarder"}),n.jsx("button",{onClick:()=>v(null),className:"btn btn-sm btn-secondary",children:" Annuler"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{children:y.name}),n.jsx("td",{children:y.frequency}),n.jsxs("td",{children:[y.amountLevel0||0,""]}),n.jsxs("td",{children:[y.amountLevel1,""]}),n.jsxs("td",{children:[y.amountLevel2,""]}),n.jsxs("td",{children:[n.jsx("button",{onClick:()=>v({...y}),className:"btn btn-sm btn-primary",children:" Modifier"}),n.jsx("button",{onClick:()=>P(y._id),className:"btn btn-sm btn-danger",children:" Supprimer"})]})]})},y._id))})]})]})]}),n.jsxs("div",{className:"card",style:{marginBottom:"2rem"},children:[n.jsx("h3",{children:"2 Affectation des Primes"}),n.jsx("p",{children:"Slectionnez les primes accessibles pour chaque salari"}),r.length===0?n.jsx("p",{children:"Aucun salari trouv"}):t.length===0?n.jsx("p",{children:"Veuillez d'abord crer des primes"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Salari"}),t.map(y=>n.jsx("th",{style:y.frequency==="annuelle"||y.frequency==="annual"?{color:"#dc3545",fontWeight:"bold"}:{},children:y.name},y._id))]})}),n.jsx("tbody",{children:r.map(y=>n.jsxs("tr",{children:[n.jsx("td",{children:y.name}),t.map(z=>{var M;return n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:((M=l[y._id])==null?void 0:M[z._id])||!1,onChange:()=>$(y._id,z._id)})},z._id)})]},y._id))})]})}),n.jsx("button",{onClick:T,disabled:f,className:"btn btn-success",style:{marginTop:"1rem"},children:f?" Sauvegarde...":" Sauvegarder les affectations"})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{children:"3 Calcul Mensuel de la Prime"}),n.jsxs("div",{className:"form-row",style:{marginBottom:"1rem"},children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Mois"}),n.jsx("select",{value:u,onChange:y=>p(parseInt(y.target.value)),className:"form-control",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(y=>n.jsx("option",{value:y,children:S(y)},y))})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Anne"}),n.jsx("select",{value:b,onChange:y=>E(parseInt(y.target.value)),className:"form-control",children:Array.from({length:10},(y,z)=>new Date().getFullYear()-2+z).map(y=>n.jsx("option",{value:y,children:y},y))})]})]}),V.length===0?n.jsx("p",{children:"Aucun salari n'a de prime assigne"}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Salari"}),t.map(y=>n.jsxs("th",{style:y.frequency==="annuelle"||y.frequency==="annual"?{color:"#dc3545",fontWeight:"bold"}:{},children:[y.name,n.jsx("br",{}),n.jsxs("small",{style:{fontSize:"0.8rem",color:y.frequency==="annuelle"||y.frequency==="annual"?"#dc3545":"#666"},children:["(0: ",y.amountLevel0||0," | 1: ",y.amountLevel1," | 2: ",y.amountLevel2,")"]})]},y._id))]})}),n.jsx("tbody",{children:V.map(y=>{const z=l[y._id]||{};return Object.values(z).some(I=>I===!0)?n.jsxs("tr",{children:[n.jsx("td",{children:y.name}),t.map(I=>{if(!(z[I._id]===!0))return n.jsx("td",{children:"-"},I._id);const U=`${y._id}_${I._id}`,W=i[U]||{level:0,amount:I.amountLevel0||0};return n.jsxs("td",{children:[n.jsxs("select",{value:W.level,onChange:te=>w(y._id,I._id,parseInt(te.target.value)),className:"form-control",children:[n.jsxs("option",{value:"0",children:["Niveau 0 (non atteint) - ",I.amountLevel0||0,""]}),n.jsxs("option",{value:"1",children:["Niveau 1 (atteint) - ",I.amountLevel1,""]}),n.jsxs("option",{value:"2",children:["Niveau 2 (dpass) - ",I.amountLevel2,""]})]}),n.jsxs("div",{style:{marginTop:"5px",fontWeight:"bold",color:"#28a745"},children:["Montant: ",W.amount,""]})]},I._id)})]},y._id):null})})]})}),n.jsx("button",{onClick:A,disabled:f,className:"btn btn-success",style:{marginTop:"1rem"},children:f?" Sauvegarde...":" Sauvegarder les calculs"})]})]})]}):n.jsx("div",{className:"primes-page fade-in",children:n.jsxs("div",{className:"card",children:[n.jsx("h2",{children:" Accs refus"}),n.jsx("p",{children:"Cette page est rserve aux administrateurs."})]})})},Oj=()=>{var I,q;const[e,t]=h.useState([]),[s,r]=h.useState([]),[a,l]=h.useState({}),[o,i]=h.useState(!0),[c,d]=h.useState("all"),[m,f]=h.useState(1),[N,C]=h.useState(1),[x,j]=h.useState(""),[v,u]=h.useState(""),[p,b]=h.useState(!1),E=Ot();h.useEffect(()=>{D(),F(),R()},[c,m]);const D=async()=>{try{i(!0);const U=new URLSearchParams({page:m,limit:20,sortBy:"uploadDate",sortOrder:"desc"});c!=="all"&&U.append("status",c);const W=await je.get(`${E}/mutuelle?${U}`);W.data.success&&(t(W.data.data.mutuelles),C(W.data.data.pagination.pages))}catch(U){console.error("Erreur rcupration justificatifs mutuelle:",U),j("Erreur lors du chargement des justificatifs mutuelle"),u("error")}finally{i(!1)}},F=async()=>{try{const U=await je.get(`${E}/mutuelle/stats`);U.data.success&&l(U.data.data)}catch(U){console.error("Erreur rcupration statistiques:",U)}},R=async()=>{try{const U=await je.get(`${E}/mutuelle/employees-list`);U.data.success&&r(U.data.data)}catch(U){console.error("Erreur rcupration liste employs:",U)}},g=async U=>{try{(await je.put(`${E}/mutuelle/${U}/validate`,{validatedBy:"Admin",notes:"Valid par l'administrateur"})).data.success&&(j("Justificatif mutuelle valid avec succs"),u("success"),D(),F())}catch(W){console.error("Erreur validation:",W),j("Erreur lors de la validation"),u("error")}},P=async U=>{const W=prompt("Raison du rejet (ex: Document illisible):");if(W)try{(await je.put(`${E}/mutuelle/${U}/reject`,{rejectedBy:"Admin",reason:W})).data.success&&(j("Justificatif mutuelle rejet"),u("success"),D(),F())}catch(te){console.error("Erreur rejet:",te),j("Erreur lors du rejet"),u("error")}},$=async U=>{if(window.confirm("tes-vous sr de vouloir supprimer ce justificatif ? Cette action est irrversible."))try{(await je.delete(`${E}/mutuelle/${U}`)).data.success&&(j("Justificatif mutuelle supprim avec succs"),u("success"),D(),F())}catch(W){console.error("Erreur suppression:",W),j("Erreur lors de la suppression"),u("error")}},T=(U="")=>U.split(";")[0].trim().toLowerCase(),w=(U="")=>{const W=T(U);return{"application/pdf":"pdf","image/jpeg":"jpg","image/jpg":"jpg","image/png":"png"}[W]||""},A=async U=>{if(U!=null&&U._id)try{const W=await je.get(`${E}/mutuelle/${U._id}/download`,{responseType:"blob"}),te=W.headers["content-type"]||"application/octet-stream",ae=new Blob([W.data],{type:te}),me=T(te),ue=W.headers["content-disposition"];let pe=U.originalFileName||`mutuelle-${U._id}`;if(ue){const de=ue.match(/filename\*?=(?:UTF-8'')?\"?([^\";]+)/i);if(de&&de[1])try{pe=decodeURIComponent(de[1].replace(/\"/g,"").trim())}catch{pe=de[1].replace(/\"/g,"").trim()}}const be=w(me);be&&!pe.toLowerCase().endsWith(`.${be}`)&&(pe=`${pe}.${be}`);const Ie=window.URL.createObjectURL(ae),G=document.createElement("a");G.href=Ie,G.setAttribute("download",pe),document.body.appendChild(G),G.click(),G.remove(),window.URL.revokeObjectURL(Ie)}catch(W){console.error("Erreur tlchargement:",W),j("Erreur lors du tlchargement"),u("error")}},S=()=>{b(!0)},V=async()=>{try{const U=await je.get(`${E}/mutuelle?limit=1000`),W=U.data.success?U.data.data.mutuelles:[],te=window.open("","_blank"),ae=s.filter(pe=>pe.mutuelle==="Oui Entreprise"),me=s.filter(pe=>pe.mutuelle==="Non Perso"),ue={};W.forEach(pe=>{var Ie;const be=((Ie=pe.employeeId)==null?void 0:Ie._id)||pe.employeeId;be&&(!ue[be]||new Date(pe.uploadDate)>new Date(ue[be]))&&(ue[be]=pe.uploadDate)}),te.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Liste des Mutuelles</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 20px; }
              h1 { text-align: center; }
              h2 { margin-top: 30px; }
              table { width: 100%; border-collapse: collapse; margin-top: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
            </style>
          </head>
          <body>
            <h1>Liste des Mutuelles - ${new Date().toLocaleDateString("fr-FR")}</h1>
            
            <h2>Salaris avec Mutuelle Entreprise (${ae.length})</h2>
            <table>
              <thead>
                <tr>
                  <th>Nom</th>
                </tr>
              </thead>
              <tbody>
                ${ae.map(pe=>`
                  <tr>
                    <td>${pe.name}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
            
            <h2>Salaris avec Mutuelle Personnelle (${me.length})</h2>
            <table>
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Date d'envoi du justificatif</th>
                </tr>
              </thead>
              <tbody>
                ${me.map(pe=>{const be=pe._id||pe.id,Ie=ue[be]?new Date(ue[be]).toLocaleDateString("fr-FR"):"-";return`
                    <tr>
                      <td>${pe.name}</td>
                      <td>${Ie}</td>
                    </tr>
                  `}).join("")}
              </tbody>
            </table>
          </body>
        </html>
      `),te.document.close(),te.print()}catch(U){console.error("Erreur rcupration justificatifs pour impression:",U),j("Erreur lors de la rcupration des donnes pour impression"),u("error")}},y=U=>{const te={pending:{text:"En attente",class:"status-pending"},validated:{text:"Valid",class:"status-validated"},rejected:{text:"Rejet",class:"status-rejected"}}[U]||{text:U,class:"status-default"};return n.jsx("span",{className:`status-badge ${te.class}`,children:te.text})},z=U=>new Date(U).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}),M=U=>{if(U===0)return"0 Bytes";const W=1024,te=["Bytes","KB","MB","GB"],ae=Math.floor(Math.log(U)/Math.log(W));return parseFloat((U/Math.pow(W,ae)).toFixed(2))+" "+te[ae]};return n.jsxs("div",{className:"mutuelle-management",children:[n.jsxs("div",{className:"management-header",children:[n.jsx("h1",{children:" Gestion des Mutuelles"}),n.jsx("p",{children:"Suivi et validation des justificatifs de mutuelle personnelle"})]}),n.jsxs("div",{className:"stats-container",children:[n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:a.total||0}),n.jsx("div",{className:"stat-label",children:"Total justificatifs"})]}),n.jsxs("div",{className:"stat-card pending",children:[n.jsx("div",{className:"stat-number",children:a.pending||0}),n.jsx("div",{className:"stat-label",children:"En attente"})]}),n.jsxs("div",{className:"stat-card validated",children:[n.jsx("div",{className:"stat-number",children:a.validated||0}),n.jsx("div",{className:"stat-label",children:"Valids"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:((I=a.employees)==null?void 0:I.withMutuelle)||0}),n.jsx("div",{className:"stat-label",children:"Avec mutuelle entreprise"})]}),n.jsxs("div",{className:"stat-card",children:[n.jsx("div",{className:"stat-number",children:((q=a.employees)==null?void 0:q.withoutMutuelle)||0}),n.jsx("div",{className:"stat-label",children:"Avec mutuelle personnelle"})]})]}),n.jsx("div",{className:"actions-container",style:{marginBottom:"20px",display:"flex",gap:"10px"},children:n.jsx("button",{onClick:S,className:"btn btn-primary",children:" Imprimer la liste des mutuelles"})}),n.jsx("div",{className:"filters-container",children:n.jsxs("select",{value:c,onChange:U=>{d(U.target.value),f(1)},className:"status-filter",children:[n.jsx("option",{value:"all",children:"Tous les statuts"}),n.jsx("option",{value:"pending",children:"En attente"}),n.jsx("option",{value:"validated",children:"Valids"}),n.jsx("option",{value:"rejected",children:"Rejets"})]})}),x&&n.jsx("div",{className:`message ${v}`,children:x}),n.jsx("div",{className:"mutuelles-list",children:o?n.jsx("div",{className:"loading",children:"Chargement..."}):e.length===0?n.jsx("div",{className:"no-data",children:"Aucun justificatif mutuelle trouv"}):n.jsxs("div",{className:"mutuelles-table",children:[n.jsxs("div",{className:"table-header",children:[n.jsx("div",{children:"Salari"}),n.jsx("div",{children:"Date upload"}),n.jsx("div",{children:"Fichier"}),n.jsx("div",{children:"Statut"}),n.jsx("div",{children:"Validation"}),n.jsx("div",{children:"Actions"})]}),e.map(U=>n.jsxs("div",{className:"table-row",children:[n.jsxs("div",{className:"employee-info",children:[n.jsx("div",{className:"employee-name",children:U.employeeName}),n.jsx("div",{className:"employee-email",children:U.employeeEmail})]}),n.jsx("div",{className:"date-info",children:z(U.uploadDate)}),n.jsxs("div",{className:"file-info",children:[n.jsx("div",{className:"file-name",children:U.originalFileName}),n.jsxs("div",{className:"file-details",children:[M(U.fileSize),"  ",U.fileType.split("/")[1].toUpperCase()]})]}),n.jsxs("div",{className:"status-info",children:[y(U.status),U.expirationDate&&U.status==="validated"&&n.jsxs("div",{className:"expiration-info",children:["Expire le: ",z(U.expirationDate)]})]}),n.jsx("div",{className:"validation-info",children:n.jsxs("div",{className:"auto-validation",children:[n.jsxs("div",{className:`quality-score ${U.autoValidation.qualityScore>=60?"good":"poor"}`,children:["Score: ",U.autoValidation.qualityScore,"/100"]}),n.jsx("div",{className:"validation-message",children:U.autoValidation.validationMessage})]})}),n.jsxs("div",{className:"actions",children:[n.jsx("button",{onClick:()=>A(U),className:"action-btn download",title:"Tlcharger",children:""}),U.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>g(U._id),className:"action-btn validate",title:"Valider",children:""}),n.jsx("button",{onClick:()=>P(U._id),className:"action-btn reject",title:"Rejeter",children:""})]}),n.jsx("button",{onClick:()=>$(U._id),className:"action-btn delete",title:"Supprimer",children:""})]})]},U._id))]})}),N>1&&n.jsxs("div",{className:"pagination",children:[n.jsx("button",{onClick:()=>f(U=>Math.max(U-1,1)),disabled:m===1,className:"page-btn",children:"Prcdent"}),n.jsxs("span",{className:"page-info",children:["Page ",m," sur ",N]}),n.jsx("button",{onClick:()=>f(U=>Math.min(U+1,N)),disabled:m===N,className:"page-btn",children:"Suivant"})]}),p&&n.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:n.jsxs("div",{className:"modal-content",onClick:U=>U.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:" Imprimer la liste des mutuelles"}),n.jsx("button",{className:"close-btn",onClick:()=>b(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("p",{children:"Voulez-vous imprimer la liste des salaris avec leur statut mutuelle ?"}),n.jsxs("div",{className:"modal-actions",children:[n.jsx("button",{onClick:V,className:"btn btn-primary",children:"Imprimer"}),n.jsx("button",{onClick:()=>b(!1),className:"btn btn-secondary",children:"Annuler"})]})]})]})})]})},$j=()=>{const[e,t]=h.useState([]),[s,r]=h.useState([]),[a,l]=h.useState(!0),[o,i]=h.useState("ambassadors"),[c,d]=h.useState({firstName:"",lastName:"",phone:"",email:"",couponValidityDays:30}),[m,f]=h.useState(!1),[N,C]=h.useState({firstName:"",lastName:"",phone:"",ambassadorCode:""}),[x,j]=h.useState(!1),v=Ot();h.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const T=Jp(),w=T?{Authorization:`Bearer ${T}`}:{},[A,S]=await Promise.all([fetch(`${v}/ambassadors/ambassadors`,{headers:w}),fetch(`${v}/ambassadors/clients`,{headers:w})]);if(A.ok){const V=await A.json();t(V.data||[])}if(S.ok){const V=await S.json();r(V.data||[])}}catch(T){console.error(T),O.error("Erreur lors du chargement")}finally{l(!1)}},p=async T=>{var w,A,S,V,y;if(T.preventDefault(),!((w=c.firstName)!=null&&w.trim())||!((A=c.lastName)!=null&&A.trim())||!((S=c.phone)!=null&&S.trim())){O.error("Nom, prnom et tlphone requis");return}f(!0);try{const z=await Y.post("/ambassadors/ambassadors",c);z.data.success?(O.success("Ambassadeur cr avec le code "+z.data.data.code),d({firstName:"",lastName:"",phone:"",email:"",couponValidityDays:30}),u()):O.error(z.data.error||"Erreur")}catch(z){O.error(((y=(V=z.response)==null?void 0:V.data)==null?void 0:y.error)||"Erreur lors de la cration")}finally{f(!1)}},b=async T=>{var w,A,S,V,y,z;if(T.preventDefault(),!((w=N.firstName)!=null&&w.trim())||!((A=N.lastName)!=null&&A.trim())||!((S=N.phone)!=null&&S.trim())||!((V=N.ambassadorCode)!=null&&V.trim())){O.error("Nom, prnom, tlphone et code ambassadeur requis");return}j(!0);try{const M=await Y.post("/ambassadors/clients",N);M.data.success?(O.success("Client parrain cr"),C({firstName:"",lastName:"",phone:"",ambassadorCode:""}),u()):O.error(M.data.error||"Erreur")}catch(M){O.error(((z=(y=M.response)==null?void 0:y.data)==null?void 0:z.error)||"Erreur lors de la cration")}finally{j(!1)}},E=async T=>{try{(await Y.put(`/ambassadors/clients/${T._id}`,{giftClaimed:!T.giftClaimed})).data.success&&u()}catch{O.error("Erreur")}},D=async T=>{try{(await Y.put(`/ambassadors/clients/${T._id}`,{giftReceived:!T.giftReceived})).data.success&&u()}catch{O.error("Erreur")}},F=async T=>{if(window.confirm("Supprimer cet ambassadeur ?"))try{await Y.delete(`/ambassadors/ambassadors/${T}`),O.success("Ambassadeur supprim"),u()}catch{O.error("Erreur")}},R=async T=>{if(window.confirm("Supprimer ce client ?"))try{await Y.delete(`/ambassadors/clients/${T}`),O.success("Client supprim"),u()}catch{O.error("Erreur")}},g=async T=>{if(window.confirm("Rgnrer un nouveau coupon valide pour ce client ?"))try{const w=await Y.post(`/ambassadors/clients/${T._id}/regenerate-coupon`);w.data.success?(O.success("Coupon rgnr"),u()):O.error(w.data.error||"Erreur")}catch{O.error("Erreur")}},P=T=>{if(!T.couponExpiresAt)return"-";const w=new Date(T.couponExpiresAt),A=new Date;return w<A?`Expir depuis ${Math.ceil((A-w)/864e5)} j`:`Valide ${Math.ceil((w-A)/(24*60*60*1e3))} j`},$=T=>{var A;const w=e.find(S=>S.code===T);w&&(i("ambassadors"),(A=document.getElementById(`amb-${w._id}`))==null||A.scrollIntoView({behavior:"smooth"}))};return a?n.jsx("div",{className:"ambassadeur-page",children:n.jsx("div",{className:"ambassadeur-loading",children:"Chargement..."})}):n.jsxs("div",{className:"ambassadeur-page",children:[n.jsx("div",{className:"ambassadeur-header",children:n.jsx("h1",{children:" Programme Ambassadeur"})}),n.jsxs("div",{className:"ambassadeur-tabs",children:[n.jsx("button",{className:o==="ambassadors"?"active":"",onClick:()=>i("ambassadors"),children:"Ambassadeurs"}),n.jsx("button",{className:o==="clients"?"active":"",onClick:()=>i("clients"),children:"Clients parrains"})]}),o==="ambassadors"&&n.jsxs("div",{className:"ambassadeur-section",children:[n.jsxs("div",{className:"ambassadeur-card",children:[n.jsx("h2",{children:"Nouvel ambassadeur"}),n.jsx("p",{className:"ambassadeur-hint",children:"Le code client unique est gnr automatiquement."}),n.jsxs("form",{onSubmit:p,className:"ambassadeur-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("input",{type:"text",placeholder:"Prnom *",value:c.firstName,onChange:T=>d({...c,firstName:T.target.value}),required:!0}),n.jsx("input",{type:"text",placeholder:"Nom *",value:c.lastName,onChange:T=>d({...c,lastName:T.target.value}),required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("input",{type:"tel",placeholder:"Tlphone *",value:c.phone,onChange:T=>d({...c,phone:T.target.value}),required:!0}),n.jsx("input",{type:"email",placeholder:"Email",value:c.email,onChange:T=>d({...c,email:T.target.value})})]}),n.jsx("div",{className:"form-row",children:n.jsx("input",{type:"number",placeholder:"Dure validit coupon (jours) *",min:1,value:c.couponValidityDays||"",onChange:T=>d({...c,couponValidityDays:parseInt(T.target.value,10)||30})})}),n.jsx("button",{type:"submit",disabled:m,children:m?"Cration...":"Crer l'ambassadeur"})]})]}),n.jsxs("div",{className:"ambassadeur-list",children:[n.jsx("h2",{children:"Liste des ambassadeurs"}),e.length===0?n.jsx("p",{className:"ambassadeur-empty",children:"Aucun ambassadeur."}):n.jsxs("table",{className:"ambassadeur-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Tlphone"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Code client"}),n.jsx("th",{children:"Clients parrains Total"}),n.jsx("th",{children:"Cadeaux retirs"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:e.map(T=>n.jsxs("tr",{id:`amb-${T._id}`,children:[n.jsxs("td",{children:[T.firstName," ",T.lastName]}),n.jsx("td",{children:T.phone}),n.jsx("td",{children:T.email||"-"}),n.jsx("td",{children:n.jsx("strong",{children:T.code})}),n.jsx("td",{children:n.jsx("strong",{children:T.clientsCount??0})}),n.jsx("td",{children:n.jsx("strong",{children:T.giftsRetiredCount??0})}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn-delete",onClick:()=>F(T._id),children:"Supprimer"})})]},T._id))})]})]})]}),o==="clients"&&n.jsxs("div",{className:"ambassadeur-section",children:[n.jsxs("div",{className:"ambassadeur-card",children:[n.jsx("h2",{children:"Nouveau client parrain"}),n.jsx("p",{className:"ambassadeur-hint",children:"Saisissez le code ambassadeur du client qui a parrain."}),n.jsxs("form",{onSubmit:b,className:"ambassadeur-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("input",{type:"text",placeholder:"Prnom *",value:N.firstName,onChange:T=>C({...N,firstName:T.target.value}),required:!0}),n.jsx("input",{type:"text",placeholder:"Nom *",value:N.lastName,onChange:T=>C({...N,lastName:T.target.value}),required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("input",{type:"tel",placeholder:"Tlphone *",value:N.phone,onChange:T=>C({...N,phone:T.target.value}),required:!0}),n.jsx("input",{type:"text",placeholder:"Code ambassadeur *",value:N.ambassadorCode,onChange:T=>C({...N,ambassadorCode:(T.target.value||"").toUpperCase()}),list:"ambassador-codes",required:!0}),n.jsx("datalist",{id:"ambassador-codes",children:e.map(T=>n.jsx("option",{value:T.code},T._id))})]}),n.jsx("button",{type:"submit",disabled:x,children:x?"Cration...":"Crer le client"})]})]}),n.jsxs("div",{className:"ambassadeur-list",children:[n.jsx("h2",{children:"Liste des clients parrains"}),s.length===0?n.jsx("p",{className:"ambassadeur-empty",children:"Aucun client parrain."}):n.jsxs("table",{className:"ambassadeur-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Client"}),n.jsx("th",{children:"Tlphone"}),n.jsx("th",{children:"Code ambassadeur"}),n.jsx("th",{children:"Coupon"}),n.jsx("th",{children:"Cadeau reu"}),n.jsx("th",{children:"Cadeau retir"}),n.jsx("th",{children:"Saisi par"}),n.jsx("th",{})]})}),n.jsx("tbody",{children:s.map(T=>n.jsxs("tr",{children:[n.jsxs("td",{children:[T.firstName," ",T.lastName]}),n.jsx("td",{children:T.phone}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn-link-code",onClick:()=>$(T.ambassadorCode),title:"Voir l'ambassadeur",children:T.ambassadorCode})}),n.jsxs("td",{title:T.couponRegeneratedCount?`Rgnr ${T.couponRegeneratedCount} fois`:"",children:[n.jsx("span",{className:T.couponExpiresAt&&new Date(T.couponExpiresAt)<new Date?"text-danger":"",children:P(T)}),!T.giftReceived&&n.jsx("button",{type:"button",className:"btn-regenerate",onClick:()=>g(T),title:"Rgnrer un coupon valide",children:"Rgnrer"})]}),n.jsx("td",{children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:!!T.giftClaimed,onChange:()=>E(T)}),"Bnfici"]})}),n.jsx("td",{children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:!!T.giftReceived,onChange:()=>D(T)}),"Retir"]})}),n.jsx("td",{title:T.giftReceivedByName?`Retir par: ${T.giftReceivedByName}`:"",children:T.recordedByName||"-"}),n.jsx("td",{children:n.jsx("button",{type:"button",className:"btn-delete",onClick:()=>R(T._id),children:"Supprimer"})})]},T._id))})]})]})]})]})},zj=()=>{const{user:e}=Wn();return e?n.jsxs("div",{className:"App",children:[n.jsx(Vy,{}),n.jsxs("div",{className:"app-container",children:[n.jsx(By,{}),n.jsx("main",{className:"app-main",children:n.jsxs(Hp,{children:[n.jsx(Ae,{path:"/",element:n.jsx(yi,{to:"/dashboard",replace:!0})}),n.jsx(Ae,{path:"/dashboard",element:n.jsx(We,{children:n.jsx(ij,{})})}),n.jsx(Ae,{path:"/employees",element:n.jsx(We,{children:n.jsx(aj,{})})}),n.jsx(Ae,{path:"/constraints",element:n.jsx(We,{children:n.jsx(oj,{})})}),n.jsx(Ae,{path:"/planning",element:n.jsx(We,{requiredPermission:"view_planning",children:n.jsx(lj,{})})}),n.jsx(Ae,{path:"/sales-stats",element:n.jsx(We,{requiredPermission:"view_sales_stats",children:n.jsx(hj,{})})}),n.jsx(Ae,{path:"/absences",element:n.jsx(We,{requiredPermission:"view_absences",children:n.jsx(gj,{})})}),n.jsx(Ae,{path:"/meal-expenses",element:n.jsx(We,{requiredPermission:"view_meal_expenses",children:n.jsx(xj,{})})}),n.jsx(Ae,{path:"/km-expenses",element:n.jsx(We,{requiredPermission:"view_km_expenses",children:n.jsx(vj,{})})}),n.jsx(Ae,{path:"/parameters",element:n.jsx(We,{adminOnly:!0,children:n.jsx(yj,{})})}),n.jsx(Ae,{path:"/employee-status-print",element:n.jsx(We,{children:n.jsx(bj,{})})}),n.jsx(Ae,{path:"/tutors",element:n.jsx(We,{adminOnly:!0,children:n.jsx(Nj,{})})}),n.jsx(Ae,{path:"/sick-leave",element:n.jsx(yi,{to:"/plan/sick-leave",replace:!0})}),n.jsx(Ae,{path:"/plan/sick-leave",element:n.jsx(Sj,{})}),n.jsx(Ae,{path:"/sick-leave-upload",element:n.jsx(gu,{})}),n.jsx(Ae,{path:"/plan/sick-leave-upload",element:n.jsx(gu,{})}),n.jsx(Ae,{path:"/sick-leave-management",element:n.jsx(We,{adminOnly:!0,children:n.jsx(wj,{})})}),n.jsx(Ae,{path:"/vacation-management",element:n.jsx(We,{adminOnly:!0,children:n.jsx(kj,{})})}),n.jsx(Ae,{path:"/vacation-planning",element:n.jsx(We,{children:n.jsx(Ej,{})})}),n.jsx(Ae,{path:"/ticket-restaurant",element:n.jsx(We,{children:n.jsx(Dj,{})})}),n.jsx(Ae,{path:"/employee-dashboard",element:n.jsx(We,{children:n.jsx(Pj,{})})}),n.jsx(Ae,{path:"/advance-requests",element:n.jsx(We,{children:n.jsx(Rj,{})})}),n.jsx(Ae,{path:"/recup",element:n.jsx(We,{children:n.jsx(Ij,{})})}),n.jsx(Ae,{path:"/primes",element:n.jsx(We,{adminOnly:!0,children:n.jsx(Fj,{})})}),n.jsx(Ae,{path:"/mutuelle-management",element:n.jsx(We,{adminOnly:!0,children:n.jsx(Oj,{})})}),n.jsx(Ae,{path:"/ambassadeur",element:n.jsx(We,{children:n.jsx($j,{})})})]})})]})]}):n.jsx(jh,{})};function Vj(){const e=()=>window.location.pathname.startsWith("/lon")?"/lon":"/lon/";return n.jsx(uv,{children:n.jsx(rv,{basename:e(),children:n.jsxs(Hp,{children:[n.jsx(Ae,{path:"/login",element:n.jsx(jh,{})}),n.jsx(Ae,{path:"/*",element:n.jsx(zj,{})})]})})})}const Bj=Co.createRoot(document.getElementById("root"));Bj.render(n.jsx(Pu.StrictMode,{children:n.jsx(Vj,{})}));
//# sourceMappingURL=index.Dx2s281d.js.map
