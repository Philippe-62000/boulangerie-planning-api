warning: in the working copy of 'backend/controllers/kmExpenseController.js', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/backend/controllers/kmExpenseController.js b/backend/controllers/kmExpenseController.js[m
[1mindex 76928fa..2bdc8f6 100644[m
[1m--- a/backend/controllers/kmExpenseController.js[m
[1m+++ b/backend/controllers/kmExpenseController.js[m
[36m@@ -18,13 +18,22 @@[m [mconst getKmExpenses = async (req, res) => {[m
     [m
     console.log(`ðŸ“Š ${employees.length} employÃ©s rÃ©cupÃ©rÃ©s pour les frais KM`);[m
     [m
[31m-    // RÃ©cupÃ©rer les paramÃ¨tres KM (ceux qui ont un kmValue dÃ©fini et > 0)[m
[31m-    const parameters = await Parameter.find({ [m
[31m-      $and: [[m
[31m-        { kmValue: { $exists: true } },[m
[31m-        { kmValue: { $gt: 0 } }[m
[31m-      ][m
[31m-    }).sort({ name: 1 });[m
[32m+[m[32m    // RÃ©cupÃ©rer les paramÃ¨tres KM (ceux qui ont un kmValue dÃ©fini)[m
[32m+[m[32m    // On prend tous les paramÃ¨tres avec kmValue dÃ©fini, mÃªme s'il est Ã  0[m
[32m+[m[32m    // puis on les trie : d'abord ceux avec kmValue > 0, puis les autres[m
[32m+[m[32m    const allParameters = await Parameter.find({[m[41m [m
[32m+[m[32m      kmValue: { $exists: true }[m
[32m+[m[32m    }).sort({[m[41m [m
[32m+[m[32m      // Trier d'abord par kmValue dÃ©croissant (ceux avec valeur > 0 en premier)[m
[32m+[m[32m      kmValue: -1,[m
[32m+[m[32m      // Puis par nom[m
[32m+[m[32m      name: 1[m[41m [m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    // Limiter Ã  12 paramÃ¨tres maximum[m
[32m+[m[32m    // On prend les 12 premiers, mÃªme si certains ont kmValue = 0[m
[32m+[m[32m    // Cela permet d'afficher toutes les colonnes dÃ©finies dans Parameters[m
[32m+[m[32m    const parameters = allParameters.slice(0, 12);[m
     [m
     console.log(`ðŸš— ${parameters.length} paramÃ¨tres KM trouvÃ©s`);[m
     parameters.forEach(param => {[m
